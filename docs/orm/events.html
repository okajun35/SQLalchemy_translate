<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        
        <title>
            
    
    ORMイベント
 &mdash;
    SQLAlchemy 1.3 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../_static/changelog.css" type="text/css" />
                <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
        <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="SQLAlchemy 1.3 Documentation" href="../index.html" />
        <link rel="up" title="イベントと内部" href="extending.html" />
        <link rel="next" title="ORM内部" href="internals.html" />
        <link rel="prev" title="イベントと内部" href="extending.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">1.3.0b1</span>


        | Release Date: unreleased

    </div>

    <h1>SQLAlchemy 1.3 Documentation</h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">


        <div id="docs-sidebar-popout">
            <h3><a href="../index.html">SQLAlchemy 1.3 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../contents.html">Contents</a> |
                <a href="../genindex.html">Index</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a>
        </h3>

        <ul>
<li><span class="link-container first"><a class="reference external" href="tutorial.html">オブジェクトリレーショナルチュートリアル</a></span></li>
<li><span class="link-container first"><a class="reference external" href="mapper_config.html">マッパー設定</a></span></li>
<li><span class="link-container first"><a class="reference external" href="relationships.html">関係の設定</a></span></li>
<li><span class="link-container first"><a class="reference external" href="loading_objects.html">オブジェクトの読み込み</a></span></li>
<li><span class="link-container first"><a class="reference external" href="session.html">セッションの使用</a></span></li>
<li><span class="link-container first"><a class="reference external" href="extending.html">イベントと内部</a></span><ul>
<li class="selected"><span class="link-container first"><strong>ORMイベント</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container first"><a class="reference external" href="#attribute-events">属性イベント</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#mapper-events">マッパーイベント</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#instance-events">インスタンスイベント</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#session-events">セッションイベント</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#query-events">クエリイベント</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#module-sqlalchemy.orm.instrumentation">計装イベント</a></span></li>
</ul>
</li>
<li><span class="link-container first"><a class="reference external" href="internals.html">ORM内部</a></span></li>
<li><span class="link-container first"><a class="reference external" href="exceptions.html">ORMの例外</a></span></li>
<li><span class="link-container first"><a class="reference external" href="deprecated.html">非推奨のORMイベントインターフェイス</a></span></li>
</ul>
</li>
<li><span class="link-container first"><a class="reference external" href="extensions/index.html">ORM拡張</a></span></li>
<li><span class="link-container first"><a class="reference external" href="examples.html">ORMの例</a></span></li>
</ul>



        </div>

        </div>

    </div>

    

    <div id="docs-body" class="withsidebar" >
        
<div class="section" id="orm-events">
<span id="orm-event-toplevel"></span><h1>ORMイベント<a class="headerlink" href="#orm-events" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>ORMには、サブスクリプションに利用できるさまざまなフックが含まれています。</p>
<p>最も一般的に使用されるORMイベントについては、ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>session_events_toplevel`を参照してください。イベントシステムは一般的に：ref： <a href="#id3"><span class="problematic" id="id4">`</span></a>event_toplevel`で議論されています。接続や低レベルの文の実行などの非ORMイベントは、ref： <a href="#id5"><span class="problematic" id="id6">`</span></a>core_event_toplevel`に記述されています。</p>
<div class="section" id="attribute-events">
<h2>属性イベント<a class="headerlink" href="#attribute-events" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="class">
<dt id="sqlalchemy.orm.events.AttributeEvents">
<em class="property">class </em><code class="descclassname">sqlalchemy.orm.events.</code><code class="descname">AttributeEvents</code><a class="headerlink" href="#sqlalchemy.orm.events.AttributeEvents" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="../core/events.html#sqlalchemy.event.base.Events" title="sqlalchemy.event.base.Events"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.event.base.Events</span></code></a></p>
<p>オブジェクト属性のイベントを定義します。</p>
<p>これらは、通常、ターゲットクラスのクラスバインド記述子で定義されます。</p>
<p>例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="k">def</span> <span class="nf">my_append_listener</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">initiator</span><span class="p">):</span>
    <span class="nb">print</span> <span class="s2">&quot;received append event for target: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">target</span>

<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">MyClass</span><span class="o">.</span><span class="n">collection</span><span class="p">,</span> <span class="s1">&#39;append&#39;</span><span class="p">,</span> <span class="n">my_append_listener</span><span class="p">)</span></pre></div>
</div>
<p>リスナーは `` retval = True``フラグが渡されたときに、値の変更されたバージョンを返すオプションを持っています：func： <cite>〜.event.listen</cite></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">validate_phone</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">oldvalue</span><span class="p">,</span> <span class="n">initiator</span><span class="p">):</span>
    <span class="s2">&quot;Strip non-numeric characters from a phone number&quot;</span>

    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\D&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

<span class="c1"># setup listener on UserContact.phone attribute, instructing</span>
<span class="c1"># it to use the return value</span>
<span class="n">listen</span><span class="p">(</span><span class="n">UserContact</span><span class="o">.</span><span class="n">phone</span><span class="p">,</span> <span class="s1">&#39;set&#39;</span><span class="p">,</span> <span class="n">validate_phone</span><span class="p">,</span> <span class="n">retval</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></pre></div>
</div>
<p>上記のような検証関数は、：exc： <a href="#id1"><span class="problematic" id="id2">`</span></a>ValueError`のような例外を発生させ、操作を中止することもできます。</p>
<p>：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜.event.listen`関数にはいくつかの修飾子があります。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.params.active_history"></span><strong>active_history=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.params.active_history">¶</a> -- Trueの場合、データベースのロードを強制的に停止する必要がある場合でも、&amp;quot;set &amp;quot;イベントが無条件に置き換えられる&amp;quot;old &amp;quot;値を受け取ることを示します。 `` active_history``は：func： <cite>.column_property`と：func：</cite> .relationship`を介して直接設定することもできます。</li>
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.params.propagate"></span><strong>propagate=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.params.propagate">¶</a> -- Trueの場合、指定されたclass属性だけでなく、そのクラスの現在のすべてのサブクラスと、そのクラスのすべての将来のサブクラスで同じ名前の属性に対して、リスナー関数が確立されます。イベント。</li>
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.params.raw"></span><strong>raw=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.params.raw">¶</a> -- Trueの場合、イベントへの &amp;quot;target&amp;quot;引数は、マップされたインスタンス自体ではなく、：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`管理オブジェクトになります。</li>
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.params.retval"></span><strong>retval=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.params.retval">¶</a> -- Trueの場合、ユーザー定義のイベントリスニングは関数からの&amp;quot;値&amp;quot;引数を返す必要があります。これにより、リスニング関数は最終的に&amp;quot;set &amp;quot;または&amp;quot;append &amp;quot;イベントに使用される値を変更することができます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="sqlalchemy.orm.events.AttributeEvents.append">
<code class="descname">append</code><span class="sig-paren">(</span><em>target</em>, <em>value</em>, <em>initiator</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.AttributeEvents.append" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>コレクションの追加イベントを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="o">.</span><span class="n">some_attribute</span><span class="p">,</span> <span class="s1">&#39;append&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_append</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">initiator</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;append&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>appendイベントは、各要素がコレクションに追加されるときに呼び出されます。これは単一項目の追加と&amp;quot;一括置換&amp;quot;操作で発生します。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first simple">
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.append.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.append.params.target">¶</a> -- オブジェクトインスタンスはイベントを受け取ります。リスナーが `` raw = True``で登録されている場合、これは：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`オブジェクトになります。</li>
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.append.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.append.params.value">¶</a> -- 値が追加されます。このリスナーが `` retval = True``で登録されている場合、リスナー関数はこの値、またはそれを置き換える新しい値を返す必要があります。</li>
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.append.params.initiator"></span><strong>initiator</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.append.params.initiator">¶</a> -- イベントの開始を表す：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.attributes.Event`のインスタンスです。チェインされたイベントの伝播を制御するために、バックソースハンドラによって元の値から変更することができます。また、イベントのソースに関する情報を調べることもできます。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">戻り値:</th><td class="field-body"><p class="first last">イベントが `` retval = True``で登録されていれば、与えられた値、または新しい実効値が返されます。</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：meth： <cite>.AttributeEvents.bulk_replace</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.AttributeEvents.bulk_replace">
<code class="descname">bulk_replace</code><span class="sig-paren">(</span><em>target</em>, <em>values</em>, <em>initiator</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.AttributeEvents.bulk_replace" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>コレクションの一括置換イベントを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="o">.</span><span class="n">some_attribute</span><span class="p">,</span> <span class="s1">&#39;bulk_replace&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_bulk_replace</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">initiator</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;bulk_replace&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、バルク・コレクション・セット操作に入ってくる一連の値に対して呼び出されます。この操作は、値がORMオブジェクトとして扱われる前に変更できます。これは、バルク置換ルーチンがどのオブジェクトがすでにコレクションに存在し、ネット置換操作によって削除されているかを調整しようとする前に実行される「初期フック」です。</p>
<p>このメソッドを：meth： <cite>.AttributeEvents.append`イベントの使用と組み合わせるのが典型的です。これらの両方のイベントを使用する場合、一括置換操作では：meth： `.AttributeEvents.bulk_replace`がコレクションとして呼び出された後でも、すべての新しい項目に対して：meth：</cite> .AttributeEvents.append`イベントが呼び出されることに注意してください。全体。 ：meth： <cite>.AttributeEvents.append`イベントが一括置換の一部であるかどうかを判断するには、シンボル：attr：</cite>〜.attributes.OP_BULK_REPLACE`を使用して、着信イニシエータをテストします:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.orm.attributes</span> <span class="k">import</span> <span class="n">OP_BULK_REPLACE</span>

<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeObject</span><span class="o">.</span><span class="n">collection</span><span class="p">,</span> <span class="s2">&quot;bulk_replace&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">process_collection</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">initiator</span><span class="p">):</span>
    <span class="n">values</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">_make_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>

<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeObject</span><span class="o">.</span><span class="n">collection</span><span class="p">,</span> <span class="s2">&quot;append&quot;</span><span class="p">,</span> <span class="n">retval</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">process_collection</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">initiator</span><span class="p">):</span>
    <span class="c1"># make sure bulk_replace didn&#39;t already do it</span>
    <span class="k">if</span> <span class="n">initiator</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">initiator</span><span class="o">.</span><span class="n">op</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">OP_BULK_REPLACE</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">_make_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">value</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.2 で追加.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.bulk_replace.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.bulk_replace.params.target">¶</a> -- オブジェクトインスタンスはイベントを受け取ります。リスナーが `` raw = True``で登録されている場合、これは：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`オブジェクトになります。</li>
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.bulk_replace.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.bulk_replace.params.value">¶</a> -- 設定されている値のシーケンス（例：リスト）。ハンドラは、このリストを適所で変更することができます。</li>
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.bulk_replace.params.initiator"></span><strong>initiator</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.bulk_replace.params.initiator">¶</a> -- イベントの開始を表す：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.attributes.Event`のインスタンスです。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.AttributeEvents.dispose_collection">
<code class="descname">dispose_collection</code><span class="sig-paren">(</span><em>target</em>, <em>collection</em>, <em>collection_adpater</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.AttributeEvents.dispose_collection" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>「コレクションの廃棄」イベントを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="o">.</span><span class="n">some_attribute</span><span class="p">,</span> <span class="s1">&#39;dispose_collection&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_dispose_collection</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">collection</span><span class="p">,</span> <span class="n">collection_adpater</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;dispose_collection&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、コレクションが置き換えられたときにコレクションベースの属性に対してトリガされます。つまり、:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">u1</span><span class="o">.</span><span class="n">addresses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a1</span><span class="p">)</span>

<span class="n">u1</span><span class="o">.</span><span class="n">addresses</span> <span class="o">=</span> <span class="p">[</span><span class="n">a2</span><span class="p">,</span> <span class="n">a3</span><span class="p">]</span>  <span class="c1"># &lt;- old collection is disposed</span></pre></div>
</div>
<p>受け取った古いコレクションには、以前の内容が含まれます。</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.2 で変更: </span>：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.AttributeEvents.dispose_collection`に渡されたコレクションは、そのまま処分される前の内容になります。以前は、コレクションは空になりました。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.0.0 で追加: </span>：meth： <cite>.AttributeEvents.init_collection`と：meth：</cite> .AttributeEvents.dispose_collection`イベントは：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.collection.linker`フックに優先します。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.AttributeEvents.init_collection">
<code class="descname">init_collection</code><span class="sig-paren">(</span><em>target</em>, <em>collection</em>, <em>collection_adapter</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.AttributeEvents.init_collection" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>&amp;#39;collection init&amp;#39;イベントを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="o">.</span><span class="n">some_attribute</span><span class="p">,</span> <span class="s1">&#39;init_collection&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_init_collection</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">collection</span><span class="p">,</span> <span class="n">collection_adapter</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;init_collection&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、最初の空のコレクションが空の属性に対して最初に生成されたとき、およびコレクションがsetイベントなどの新しいもので置き換えられたときのコレクションベースの属性に対してトリガーされます。</p>
<p>たとえば、 `` User.addresses``が関係ベースのコレクションである場合、イベントはここでトリガされます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">u1</span> <span class="o">=</span> <span class="n">User</span><span class="p">()</span>
<span class="n">u1</span><span class="o">.</span><span class="n">addresses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a1</span><span class="p">)</span>  <span class="c1">#  &lt;- new collection</span></pre></div>
</div>
<p>交換作業中にも：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">u1</span><span class="o">.</span><span class="n">addresses</span> <span class="o">=</span> <span class="p">[</span><span class="n">a2</span><span class="p">,</span> <span class="n">a3</span><span class="p">]</span>  <span class="c1">#  &lt;- new collection</span></pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.init_collection.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.init_collection.params.target">¶</a> -- オブジェクトインスタンスはイベントを受け取ります。リスナーが `` raw = True``で登録されている場合、これは：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`オブジェクトになります。</li>
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.init_collection.params.collection"></span><strong>collection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.init_collection.params.collection">¶</a> -- 新しいコレクション。これは常に：paramref： <a href="#id1"><span class="problematic" id="id2">`</span></a>.RelationshipProperty.collection_class`で指定されたものから生成され、常に空になります。</li>
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.init_collection.params.collection_adpater"></span><strong>collection_adpater</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.init_collection.params.collection_adpater">¶</a> -- コレクションへの内部アクセスを仲介する：class： <cite>.CollectionAdapter</cite>。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.0.0 で追加: </span>：meth： <cite>.AttributeEvents.init_collection`と：meth：</cite> .AttributeEvents.dispose_collection`イベントは：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.collection.linker`フックに優先します。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.AttributeEvents.init_scalar">
<code class="descname">init_scalar</code><span class="sig-paren">(</span><em>target</em>, <em>value</em>, <em>dict_</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.AttributeEvents.init_scalar" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>スカラー&amp;quot;init &amp;quot;イベントを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="o">.</span><span class="n">some_attribute</span><span class="p">,</span> <span class="s1">&#39;init_scalar&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_init_scalar</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">dict_</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;init_scalar&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、初期化されていない、固定されていないスカラ属性にアクセスすると呼び出されます。たとえば、read</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">my_object</span><span class="o">.</span><span class="n">some_attribute</span></pre></div>
</div>
<p>初期化されていない属性に対してこれが発生した場合のORMのデフォルトの動作は、値 `` None``を返すことです。これは、Pythonの `` AttributeError``を呼び出す通常の動作とは異なります。ここでのイベントは、イベントリスナーがCore：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Column`オブジェクトで設定されているデフォルトのジェネレータをミラーリングするという前提で、実際に返される値をカスタマイズするために使用できます。</p>
<p>：class： <cite>.Column`のデフォルトジェネレータはタイムスタンプのような変化する値を生成するかもしれないので、：meth：</cite> .AttributeEvents.init_scalar`イベントハンドラを使って**新たに返された値を設定することもできますコアレベルのデフォルト生成関数は効果的に1回のみ実行されますが、その時点で非永続オブジェクトでその属性にアクセスします。通常、初期化されていない属性にアクセスすると、オブジェクトの状態は変更されません（古いSQLAlchemyバージョンでは実際にオブジェクトの状態が変更されました）。</p>
<p>列のデフォルトのジェネレータが特定の定数を返した場合、ハンドラは次のように使用される可能性があります:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SOME_CONSTANT</span> <span class="o">=</span> <span class="mf">3.1415926</span>

<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="c1"># ...</span>

    <span class="n">some_attribute</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Numeric</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">SOME_CONSTANT</span><span class="p">)</span>

<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span>
    <span class="n">MyClass</span><span class="o">.</span><span class="n">some_attribute</span><span class="p">,</span> <span class="s2">&quot;init_scalar&quot;</span><span class="p">,</span>
    <span class="n">retval</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">propagate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_init_some_attribute</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">dict_</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">dict_</span><span class="p">[</span><span class="s1">&#39;some_attribute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">SOME_CONSTANT</span>
    <span class="k">return</span> <span class="n">SOME_CONSTANT</span></pre></div>
</div>
<p>上記では、 `` MyClass.some_attribute``属性を `` SOME_CONSTANT``の値に初期化します。上記のコードには、次の機能が含まれています。</p>
<ul class="simple">
<li>与えられた `` dict_``に `` SOME_CONSTANT``を設定することで、この値がデータベースに永続化されることを示します。これは：class： <cite>.Column`のデフォルトジェネレータでの</cite> <cite>SOME_CONSTANT``の使用に取って代わるものです。 ：ref： `examples_instrumentation`で与えられた</cite> <cite>active_column_defaults.py``の例は、タイムスタンプジェネレータなどのデフォルトの変更に対して同じアプローチを使用しています。この特定の例では、どちらの場合でも `</cite> SOME_CONSTANT``がINSERT文の一部であるため、これを行うことは厳密には必要ではありません。</li>
<li>`` retval = True``フラグを立てることによって、関数から返された値はgetter属性によって返されます。このフラグがなければ、イベントはパッシブオブザーバとみなされ、関数の戻り値は無視されます。</li>
<li>`` propagate = True``フラグは、マッピングされたクラスに継承サブクラスが含まれている場合に重要です。サブクラスもこのイベントリスナーを使用します。このフラグがなければ、継承するサブクラスはイベントハンドラを使用しません。</li>
</ul>
<p>上記の例では、属性セットイベント：meth： <cite>.AttributeEvents.set`と、obj：</cite> .orm.validates`によって提供される関連する検証機能は、私たちの値を`` dict_``を指定します。これらのイベントを新しく生成された値に応答して呼び出すには、与えられたオブジェクトに値を通常の属性セット操作として適用します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SOME_CONSTANT</span> <span class="o">=</span> <span class="mf">3.1415926</span>

<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span>
    <span class="n">MyClass</span><span class="o">.</span><span class="n">some_attribute</span><span class="p">,</span> <span class="s2">&quot;init_scalar&quot;</span><span class="p">,</span>
    <span class="n">retval</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">propagate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_init_some_attribute</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">dict_</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="c1"># will also fire off attribute set events</span>
    <span class="n">target</span><span class="o">.</span><span class="n">some_attribute</span> <span class="o">=</span> <span class="n">SOME_CONSTANT</span>
    <span class="k">return</span> <span class="n">SOME_CONSTANT</span></pre></div>
</div>
<p>複数のリスナーが設定されている場合、 `` retval = True``を指定した前のリスナーから返された値を `` value``引数として渡すことで、値の生成は1つのリスナーから次のリスナーに&amp;quot;連鎖&amp;quot;されます次のリスナーの</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.init_scalar.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.init_scalar.params.target">¶</a> -- オブジェクトインスタンスはイベントを受け取ります。リスナーが `` raw = True``で登録されている場合、これは：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`オブジェクトになります。</li>
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.init_scalar.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.init_scalar.params.value">¶</a> -- このイベントリスナーが呼び出される前に返される値この値は値 `` None``で始まりますが、複数のリスナーが存在する場合は前のイベントハンドラ関数の戻り値になります。</li>
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.init_scalar.params.dict_"></span><strong>dict_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.init_scalar.params.dict_">¶</a> -- このマップされたオブジェクトの属性ディクショナリこれは通常、オブジェクトの `` __dict__``ですが、すべての場合において、属性システムがこの属性の実際の値を得るために使用する宛先を表します。このディクショナリーに値を置くことは、作業ユニットによって生成されたINSERTステートメントで値が使用されるという効果があります。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>examples_instrumentation</cite>  - ` <a href="#id1"><span class="problematic" id="id2">`</span></a>active_column_defaults.py``の例を参照してください。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.AttributeEvents.modified">
<code class="descname">modified</code><span class="sig-paren">(</span><em>target</em>, <em>initiator</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.AttributeEvents.modified" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>「変更された」イベントを受信します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="o">.</span><span class="n">some_attribute</span><span class="p">,</span> <span class="s1">&#39;modified&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_modified</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">initiator</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;modified&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.attributes.flag_modified`関数を使用して、特定の値を設定せずに属性の変更イベントをトリガーするときにトリガーされます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.2 で追加.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.modified.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.modified.params.target">¶</a> -- オブジェクトインスタンスはイベントを受け取ります。リスナーが `` raw = True``で登録されている場合、これは：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`オブジェクトになります。</li>
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.modified.params.initiator"></span><strong>initiator</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.modified.params.initiator">¶</a> -- イベントの開始を表す：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.attributes.Event`のインスタンスです。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.AttributeEvents.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><em>target</em>, <em>value</em>, <em>initiator</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.AttributeEvents.remove" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>コレクションの削除イベントを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="o">.</span><span class="n">some_attribute</span><span class="p">,</span> <span class="s1">&#39;remove&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_remove</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">initiator</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;remove&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first simple">
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.remove.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.remove.params.target">¶</a> -- オブジェクトインスタンスはイベントを受け取ります。リスナーが `` raw = True``で登録されている場合、これは：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`オブジェクトになります。</li>
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.remove.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.remove.params.value">¶</a> -- 値は削除されます。</li>
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.remove.params.initiator"></span><strong>initiator</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.remove.params.initiator">¶</a> -- イベントの開始を表す：class： <cite>.attributes.Event`のインスタンスです。チェインされたイベントの伝搬を制御するために、バックリファレンスハンドラによって元の値から変更される可能性があります。 .. versionchanged :: 0.9.0 `</cite> initiator``引数は、class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.attributes.Event`オブジェクトとして渡され、バックリファレンスによってリンクされたイベントチェーン内のバックリファレンスハンドラによって変更される可能性があります。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">戻り値:</th><td class="field-body"><p class="first last">このイベントには戻り値が定義されていません。</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.AttributeEvents.set">
<code class="descname">set</code><span class="sig-paren">(</span><em>target</em>, <em>value</em>, <em>oldvalue</em>, <em>initiator</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.AttributeEvents.set" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>スカラーセットイベントを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="o">.</span><span class="n">some_attribute</span><span class="p">,</span> <span class="s1">&#39;set&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_set</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">oldvalue</span><span class="p">,</span> <span class="n">initiator</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;set&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span>

<span class="c1"># named argument style (new in 0.9)</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="o">.</span><span class="n">some_attribute</span><span class="p">,</span> <span class="s1">&#39;set&#39;</span><span class="p">,</span> <span class="n">named</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_set</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;set&#39; event&quot;</span>
    <span class="n">target</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first simple">
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.set.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.set.params.target">¶</a> -- オブジェクトインスタンスはイベントを受け取ります。リスナーが `` raw = True``で登録されている場合、これは：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`オブジェクトになります。</li>
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.set.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.set.params.value">¶</a> -- 値が設定されます。このリスナーが `` retval = True``で登録されている場合、リスナー関数はこの値、またはそれを置き換える新しい値を返す必要があります。</li>
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.set.params.oldvalue"></span><strong>oldvalue</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.set.params.oldvalue">¶</a> -- 前の値が置き換えられます。これはシンボル `` NEVER_SET``または `` NO_VALUE``でもかまいません。リスナーが `` active_history = True``で登録されている場合、既存の値が現在アンロードまたは期限切れの場合、属性の前の値がデータベースからロードされます。</li>
<li><span class="target" id="sqlalchemy.orm.events.AttributeEvents.set.params.initiator"></span><strong>initiator</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.AttributeEvents.set.params.initiator">¶</a> -- イベントの開始を表す：class： <cite>.attributes.Event`のインスタンスです。チェインされたイベントの伝搬を制御するために、バックリファレンスハンドラによって元の値から変更される可能性があります。 .. versionchanged :: 0.9.0 `</cite> initiator``引数は、class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.attributes.Event`オブジェクトとして渡され、バックリファレンスによってリンクされたイベントチェーン内のバックリファレンスハンドラによって変更される可能性があります。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">戻り値:</th><td class="field-body"><p class="first last">イベントが `` retval = True``で登録されていれば、与えられた値、または新しい実効値が返されます。</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="mapper-events">
<h2>マッパーイベント<a class="headerlink" href="#mapper-events" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="class">
<dt id="sqlalchemy.orm.events.MapperEvents">
<em class="property">class </em><code class="descclassname">sqlalchemy.orm.events.</code><code class="descname">MapperEvents</code><a class="headerlink" href="#sqlalchemy.orm.events.MapperEvents" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="../core/events.html#sqlalchemy.event.base.Events" title="sqlalchemy.event.base.Events"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.event.base.Events</span></code></a></p>
<p>マッピングに固有のイベントを定義します。</p>
<p>例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="k">def</span> <span class="nf">my_before_insert_listener</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
    <span class="c1"># execute a stored procedure upon INSERT,</span>
    <span class="c1"># apply the value to the row to be inserted</span>
    <span class="n">target</span><span class="o">.</span><span class="n">calculated_value</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span>
                                <span class="s2">&quot;select my_special_function(</span><span class="si">%d</span><span class="s2">)&quot;</span>
                                <span class="o">%</span> <span class="n">target</span><span class="o">.</span><span class="n">special_number</span><span class="p">)</span>

<span class="c1"># associate the listener function with SomeClass,</span>
<span class="c1"># to execute during the &quot;before_insert&quot; hook</span>
<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span>
    <span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;before_insert&#39;</span><span class="p">,</span> <span class="n">my_before_insert_listener</span><span class="p">)</span></pre></div>
</div>
<p>使用可能なターゲットは次のとおりです。</p>
<ul class="simple">
<li>マップされたクラス</li>
<li>（ `` propagate = True``フラグを使用して）マップされたクラスまたはマッピングされるべきクラスのマップされていないスーパークラス</li>
<li>：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Mapper`オブジェクト</li>
<li>：class： <cite>.Mapper`クラスと：func：</cite> .mapper`関数はすべてのマッパーをリッスンします。</li>
</ul>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 0.8.0 で変更: </span>マップされたクラスのマップされていないスーパークラスにマッパーイベントを関連付けることができます。</p>
</div>
<p>マッパーイベントは、オブジェクトの計測、オブジェクトのロード、およびオブジェクトの永続性に関連するものを含め、マッパーのクリティカルセクションにフックを提供します。特に、永続化メソッド：meth： <cite>〜.MapperEvents.before_insert</cite>、および：meth：<cite>〜.MapperEvents.before_update`は、永続化されている状態を増やすための一般的な場所ですが、これらのメソッドはいくつかの重要な制限で動作します。ユーザは、フラッシュ中に追加のデータベース状態を適用するためのより柔軟で使いやすいフックとして：meth： `.SessionEvents.before_flush`と：meth：</cite> .SessionEvents.after_flush`メソッドを評価することが奨励されます。</p>
<p>：class： <cite>.MapperEvents`を使うと、：func：</cite> .event.listen`関数でいくつかの修飾子を利用できます。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.params.propagate"></span><strong>propagate=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.params.propagate">¶</a> -- Trueの場合、イベントリスナーは、継承しているすべてのマッパーおよび/または継承クラスのマッパー、およびこのリスナーのターゲットであるマッパーに適用する必要があります。</li>
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.params.raw"></span><strong>raw=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.params.raw">¶</a> -- Trueの場合、該当するイベントリスナー関数に渡される&amp;quot;target &amp;quot;引数は、マップされたインスタンス自体ではなく、インスタンスの：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`管理オブジェクトになります。</li>
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.params.retval"></span><strong>retval=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.params.retval">¶</a> -- Trueの場合、ユーザー定義のイベント関数は戻り値を持たなければなりません。その目的は、後続のイベント伝播を制御するか、またはマッパーによって進行中の操作を変更することです。可能な戻り値は次のとおりです。* `` sqlalchemy.orm.interfaces.EXT_CONTINUE``  - イベント処理を正常に継続します。 * `` sqlalchemy.orm.interfaces.EXT_STOP``  - チェーン内の後続のイベントハンドラをすべてキャンセルします。 * other values  - 特定のリスナーによって指定された戻り値。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="sqlalchemy.orm.events.MapperEvents.after_configured">
<code class="descname">after_configured</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.MapperEvents.after_configured" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>一連のマッパーが設定された後に呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;after_configured&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_configured</span><span class="p">():</span>
    <span class="s2">&quot;listen for the &#39;after_configured&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>：meth： <cite>.MapperEvents.after_configured`イベントは、関数が作業を完了した後、：func：</cite> .orm.configure_mappers`関数が呼び出されるたびに呼び出されます。 ：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.orm.configure_mappers`は、通常、マッピングが最初に使用されるときに、新しいマッパーが利用可能になり、新しいマッパー使用が検出されるときに自動的に呼び出されます。</p>
<p>このイベントを：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.MapperEvents.mapper_configured`イベントと比較してください。このイベントは、コンフィグレーション操作の進行中にマッパーごとに呼び出されます。このイベントとは異なり、このイベントが呼び出されると、保留中のすべてのマッパーに対して、すべてのクロス構成（たとえば、バックレフ）も利用可能になります。 ：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.MapperEvents.before_configured`とは対照的に、一連のマッパーが設定される前に呼び出されます。</p>
<p>このイベントは：class： <cite>.Mapper`クラスまたは：func：</cite> .mapper`関数にのみ** <a href="#id1"><span class="problematic" id="id2">**</span></a>適用でき、個々のマッピングやマップされたクラスには適用できません。すべてのマッピングに対してのみ呼び出されます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="k">import</span> <span class="n">mapper</span>

<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="s2">&quot;after_configured&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">go</span><span class="p">():</span>
    <span class="c1"># ...</span></pre></div>
</div>
<p>理論的には、このイベントはアプリケーションごとに1回呼び出されますが、実際には新しいマッパーが：func： <cite>.orm.configure_mappers`呼び出しの影響を受けるたびに呼び出されます。既存のマッピングがすでに使用された後に新しいマッピングが構築された場合、このイベントは再び呼び出される可能性があります。特定のイベントが一度だけ呼び出されるようにするには、 `</cite> once = True``引数（0.9.4の新機能）を適用することができます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="k">import</span> <span class="n">mapper</span>

<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="s2">&quot;after_configured&quot;</span><span class="p">,</span> <span class="n">once</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">go</span><span class="p">():</span>
    <span class="c1"># ...</span></pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：meth： <cite>.MapperEvents.mapper_configured</cite></p>
<p class="last">：meth： <cite>.MapperEvents.before_configured</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.MapperEvents.after_delete">
<code class="descname">after_delete</code><span class="sig-paren">(</span><em>mapper</em>, <em>connection</em>, <em>target</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.MapperEvents.after_delete" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>そのインスタンスに対応するDELETE文が発行された後にオブジェクトインスタンスを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;after_delete&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_delete</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_delete&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、指定された接続で追加のSQL文を発行するとともに、削除イベントに関連するアプリケーション固有の簿記を実行するために使用されます。</p>
<p>イベントは、前のステップで一度にDELETEステートメントが発行された後、同じクラスのオブジェクトのバッチに対して呼び出されることがよくあります。</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">マッパー・レベルのフラッシュ・イベントは、操作されている行のローカル属性のみで**非常に制限された操作**を許可し、与えられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`でSQLを発行できるようにします。 <a href="#id3"><span class="problematic" id="id4">**</span></a>これらのメソッドの使用に関するガイドラインについては、ref： <a href="#id5"><span class="problematic" id="id6">`</span></a>session_persistence_mapper`を参照してください。一般的には、：meth： <a href="#id7"><span class="problematic" id="id8">`</span></a>.SessionEvents.before_flush`メソッドは、一般的なon-flushの変更に対して優先されるべきです。</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first simple">
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.after_delete.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.after_delete.params.mapper">¶</a> -- このイベントのターゲットである：class： <cite>.Mapper</cite>。</li>
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.after_delete.params.connection"></span><strong>connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.after_delete.params.connection">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`はこのインスタンスに対してDELETE文を発行するために使われます。これは、このインスタンスに固有のターゲット・データベース上の現在のトランザクションにハンドルを提供します。</li>
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.after_delete.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.after_delete.params.target">¶</a> -- マップされたインスタンスは削除されます。イベントが `` raw = True``で設定されている場合、これは代わりにインスタンスに関連付けられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`状態管理オブジェクトになります。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">戻り値:</th><td class="field-body"><p class="first last">このイベントでは戻り値はサポートされていません。</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_persistence_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.MapperEvents.after_insert">
<code class="descname">after_insert</code><span class="sig-paren">(</span><em>mapper</em>, <em>connection</em>, <em>target</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.MapperEvents.after_insert" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>そのインスタンスに対応するINSERT文が発行された後にオブジェクトインスタンスを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;after_insert&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_insert</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_insert&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、INSERTが発生した後のインスタンス上のPython専用の状態を変更するために使用され、指定された接続で追加のSQL文を発行するためにも使用されます。</p>
<p>このイベントは、前の手順で一度にINSERTステートメントが発行された後、同じクラスのオブジェクトのバッチに対して呼び出されることがよくあります。非常にまれなケースでは、これが望ましくない場合、：func： <cite>.mapper`を</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>batch = False``で構成することができます。これにより、インスタンスのバッチが個々の（そしてパフォーマンスが悪い）イベントに分割されます - &amp;gt;永続 - &amp;gt;イベントステップ。</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">マッパー・レベルのフラッシュ・イベントは、操作されている行のローカル属性のみで**非常に制限された操作**を許可し、与えられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`でSQLを発行できるようにします。 <a href="#id3"><span class="problematic" id="id4">**</span></a>これらのメソッドの使用に関するガイドラインについては、ref： <a href="#id5"><span class="problematic" id="id6">`</span></a>session_persistence_mapper`を参照してください。一般的には、：meth： <a href="#id7"><span class="problematic" id="id8">`</span></a>.SessionEvents.before_flush`メソッドは、一般的なon-flushの変更に対して優先されるべきです。</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first simple">
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.after_insert.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.after_insert.params.mapper">¶</a> -- このイベントのターゲットである：class： <cite>.Mapper</cite>。</li>
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.after_insert.params.connection"></span><strong>connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.after_insert.params.connection">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`はこのインスタンスのINSERT文を発行するために使われます。これは、このインスタンスに固有のターゲット・データベース上の現在のトランザクションにハンドルを提供します。</li>
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.after_insert.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.after_insert.params.target">¶</a> -- マップされたインスタンスは永続化されます。イベントが `` raw = True``で設定されている場合、これは代わりにインスタンスに関連付けられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`状態管理オブジェクトになります。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">戻り値:</th><td class="field-body"><p class="first last">このイベントでは戻り値はサポートされていません。</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_persistence_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.MapperEvents.after_update">
<code class="descname">after_update</code><span class="sig-paren">(</span><em>mapper</em>, <em>connection</em>, <em>target</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.MapperEvents.after_update" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>そのインスタンスに対応するUPDATE文が発行された後にオブジェクトインスタンスを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;after_update&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_update</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_update&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、UPDATEが発生した後のインスタンス上のPythonのみの状態を変更したり、指定された接続で追加のSQL文を発行したりするために使用されます。</p>
<p>このメソッドは、列ベースの属性*に正味の変更がなく、UPDATE文が処理されていない場合でも、&amp;quot;ダーティ&amp;quot;とマークされたすべてのインスタンスに対して呼び出されます。列ベースの属性のいずれかが呼び出されたときに、またはそのコレクションのいずれかが変更されたときに、オブジェクトはダーティとしてマークされます。更新時に列ベースの属性に正味の変更がない場合、UPDATEステートメントは発行されません。つまり、meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜.MapperEvents.after_update`に送られるインスタンスは、UPDATE文が発行されたことを保証するものではありません。</p>
<p>オブジェクトの列ベースの属性に正味の変更があり、その結果UPDATE文が返されたかどうかを検出するには、 `` object_session（インスタンス）.is_modified（インスタンス、include_collections = False） <a href="#id1"><span class="problematic" id="id2">``</span></a>を使用します。</p>
<p>このイベントは、前のステップでUPDATEステートメントが一度に発行された後、同じクラスのオブジェクトのバッチに対して呼び出されることがよくあります。非常にまれなケースでは、これが望ましくない場合、：func： <cite>.mapper`を</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>batch = False``で構成することができます。これにより、インスタンスのバッチが個々の（そしてパフォーマンスが悪い）イベントに分割されます - &amp;gt;永続 - &amp;gt;イベントステップ。</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">マッパー・レベルのフラッシュ・イベントは、操作されている行のローカル属性のみで**非常に制限された操作**を許可し、与えられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`でSQLを発行できるようにします。 <a href="#id3"><span class="problematic" id="id4">**</span></a>これらのメソッドの使用に関するガイドラインについては、ref： <a href="#id5"><span class="problematic" id="id6">`</span></a>session_persistence_mapper`を参照してください。一般的には、：meth： <a href="#id7"><span class="problematic" id="id8">`</span></a>.SessionEvents.before_flush`メソッドは、一般的なon-flushの変更に対して優先されるべきです。</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first simple">
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.after_update.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.after_update.params.mapper">¶</a> -- このイベントのターゲットである：class： <cite>.Mapper</cite>。</li>
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.after_update.params.connection"></span><strong>connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.after_update.params.connection">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`はこのインスタンスのUPDATE文を発行するために使われます。これは、このインスタンスに固有のターゲット・データベース上の現在のトランザクションにハンドルを提供します。</li>
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.after_update.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.after_update.params.target">¶</a> -- マップされたインスタンスは永続化されます。イベントが `` raw = True``で設定されている場合、これは代わりにインスタンスに関連付けられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`状態管理オブジェクトになります。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">戻り値:</th><td class="field-body"><p class="first last">このイベントでは戻り値はサポートされていません。</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_persistence_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.MapperEvents.before_configured">
<code class="descname">before_configured</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.MapperEvents.before_configured" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>一連のマッパーが設定される前に呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;before_configured&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_before_configured</span><span class="p">():</span>
    <span class="s2">&quot;listen for the &#39;before_configured&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>：meth： <cite>.MapperEvents.before_configured`イベントは：func：</cite> .orm.configure_mappers`関数が呼び出されるたびに呼び出されます。 ：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.orm.configure_mappers`は、通常、マッピングが最初に使用されるときに、新しいマッパーが利用可能になり、新しいマッパー使用が検出されるときに自動的に呼び出されます。</p>
<p>このイベントは：class： <cite>.Mapper`クラスまたは：func：</cite> .mapper`関数にのみ** <a href="#id1"><span class="problematic" id="id2">**</span></a>適用でき、個々のマッピングやマップされたクラスには適用できません。すべてのマッピングに対してのみ呼び出されます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="k">import</span> <span class="n">mapper</span>

<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="s2">&quot;before_configured&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">go</span><span class="p">():</span>
    <span class="c1"># ...</span></pre></div>
</div>
<p>このイベントを：meth： <cite>.MapperEvents.after_configured`と比較してください。これは一連のマッパーが設定された後に呼び出され、：meth：</cite> .MapperEvents.mapper_configured`（各マッパーごとに呼び出されます） 1つは可能な限り構成されています。</p>
<p>理論的には、このイベントはアプリケーションごとに1回呼び出されますが、新しいマッパーが：func： <cite>.orm.configure_mappers`呼び出しの影響を受けるたびに実際に呼び出されます。既存のマッピングがすでに使用された後に新しいマッピングが構築された場合、このイベントは再び呼び出される可能性があります。特定のイベントが一度だけ呼び出されるようにするには、 `</cite> once = True``引数（0.9.4の新機能）を適用することができます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="k">import</span> <span class="n">mapper</span>

<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="s2">&quot;before_configured&quot;</span><span class="p">,</span> <span class="n">once</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">go</span><span class="p">():</span>
    <span class="c1"># ...</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.9.3 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：meth： <cite>.MapperEvents.mapper_configured</cite></p>
<p class="last">：meth： <cite>.MapperEvents.after_configured</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.MapperEvents.before_delete">
<code class="descname">before_delete</code><span class="sig-paren">(</span><em>mapper</em>, <em>connection</em>, <em>target</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.MapperEvents.before_delete" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>そのインスタンスに対応するDELETE文が発行される前にオブジェクト・インスタンスを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;before_delete&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_before_delete</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;before_delete&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、指定された接続で追加のSQL文を発行するとともに、削除イベントに関連するアプリケーション固有の簿記を実行するために使用されます。</p>
<p>このイベントは、後の手順でDELETE文が一度に発行される前に、同じクラスのオブジェクトのバッチに対して呼び出されることがよくあります。</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">マッパー・レベルのフラッシュ・イベントは、操作されている行のローカル属性のみで**非常に制限された操作**を許可し、与えられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`でSQLを発行できるようにします。 <a href="#id3"><span class="problematic" id="id4">**</span></a>これらのメソッドの使用に関するガイドラインについては、ref： <a href="#id5"><span class="problematic" id="id6">`</span></a>session_persistence_mapper`を参照してください。一般的には、：meth： <a href="#id7"><span class="problematic" id="id8">`</span></a>.SessionEvents.before_flush`メソッドは、一般的なon-flushの変更に対して優先されるべきです。</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first simple">
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.before_delete.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.before_delete.params.mapper">¶</a> -- このイベントのターゲットである：class： <cite>.Mapper</cite>。</li>
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.before_delete.params.connection"></span><strong>connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.before_delete.params.connection">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`はこのインスタンスに対してDELETE文を発行するために使われます。これは、このインスタンスに固有のターゲット・データベース上の現在のトランザクションにハンドルを提供します。</li>
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.before_delete.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.before_delete.params.target">¶</a> -- マップされたインスタンスは削除されます。イベントが `` raw = True``で設定されている場合、これは代わりにインスタンスに関連付けられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`状態管理オブジェクトになります。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">戻り値:</th><td class="field-body"><p class="first last">このイベントでは戻り値はサポートされていません。</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_persistence_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.MapperEvents.before_insert">
<code class="descname">before_insert</code><span class="sig-paren">(</span><em>mapper</em>, <em>connection</em>, <em>target</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.MapperEvents.before_insert" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>そのインスタンスに対応するINSERT文が発行される前にオブジェクトインスタンスを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;before_insert&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_before_insert</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;before_insert&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、INSERTが発生する前にインスタンス上のローカルで非オブジェクトに関連する属性を変更したり、特定の接続で追加のSQL文を発行したりするために使用されます。</p>
<p>このイベントは、後の手順でINSERT文が一度に発行される前に、同じクラスのオブジェクトのバッチに対して呼び出されることがよくあります。非常にまれなケースでは、これが望ましくない場合、：func： <cite>.mapper`を</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>batch = False``で構成することができます。これにより、インスタンスのバッチが個々の（そしてパフォーマンスが悪い）イベントに分割されます - &amp;gt;永続 - &amp;gt;イベントステップ。</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">マッパー・レベルのフラッシュ・イベントは、操作されている行のローカル属性のみで**非常に制限された操作**を許可し、与えられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`でSQLを発行できるようにします。 <a href="#id3"><span class="problematic" id="id4">**</span></a>これらのメソッドの使用に関するガイドラインについては、ref： <a href="#id5"><span class="problematic" id="id6">`</span></a>session_persistence_mapper`を参照してください。一般的には、：meth： <a href="#id7"><span class="problematic" id="id8">`</span></a>.SessionEvents.before_flush`メソッドは、一般的なon-flushの変更に対して優先されるべきです。</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first simple">
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.before_insert.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.before_insert.params.mapper">¶</a> -- このイベントのターゲットである：class： <cite>.Mapper</cite>。</li>
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.before_insert.params.connection"></span><strong>connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.before_insert.params.connection">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`はこのインスタンスのINSERT文を発行するために使われます。これは、このインスタンスに固有のターゲット・データベース上の現在のトランザクションにハンドルを提供します。</li>
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.before_insert.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.before_insert.params.target">¶</a> -- マップされたインスタンスは永続化されます。イベントが `` raw = True``で設定されている場合、これは代わりにインスタンスに関連付けられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`状態管理オブジェクトになります。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">戻り値:</th><td class="field-body"><p class="first last">このイベントでは戻り値はサポートされていません。</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_persistence_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.MapperEvents.before_update">
<code class="descname">before_update</code><span class="sig-paren">(</span><em>mapper</em>, <em>connection</em>, <em>target</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.MapperEvents.before_update" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>そのインスタンスに対応するUPDATEステートメントが発行される前にオブジェクトインスタンスを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;before_update&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_before_update</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;before_update&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、UPDATEが発生する前にインスタンス上のローカルで非オブジェクトに関連する属性を変更したり、指定された接続で追加のSQL文を発行したりするために使用されます。</p>
<p>このメソッドは、列ベースの属性*に正味の変更がない場合でも、&amp;quot;ダーティ&amp;quot;とマークされたすべてのインスタンスに対して呼び出されます。列ベースの属性のいずれかが呼び出されたときに、またはそのコレクションのいずれかが変更されたときに、オブジェクトはダーティとしてマークされます。更新時に列ベースの属性に正味の変更がない場合、UPDATEステートメントは発行されません。つまり、meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜.MapperEvents.before_update`に送信されるインスタンスは、UPDATE文が発行される保証ではありませんが、値の正味の変更が行うように属性を変更することで結果に影響を与えることができます。存在する。</p>
<p>オブジェクトの列ベースの属性に正味の変更があるかどうかを検出し、UPDATE文を生成するかどうかを検出するには、 `` object_session（instance）.is_modified（instance、include_collections = False） <a href="#id1"><span class="problematic" id="id2">``</span></a>を使用します。</p>
<p>このイベントは、UPDATEステートメントが後のステップで同時に発行される前に、同じクラスのオブジェクトのバッチに対して呼び出されることがよくあります。非常にまれなケースでは、これが望ましくない場合、：func： <cite>.mapper`を</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>batch = False``で構成することができます。これにより、インスタンスのバッチが個々の（そしてパフォーマンスが悪い）イベントに分割されます - &amp;gt;永続 - &amp;gt;イベントステップ。</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">マッパー・レベルのフラッシュ・イベントは、操作されている行のローカル属性のみで**非常に制限された操作**を許可し、与えられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`でSQLを発行できるようにします。 <a href="#id3"><span class="problematic" id="id4">**</span></a>これらのメソッドの使用に関するガイドラインについては、ref： <a href="#id5"><span class="problematic" id="id6">`</span></a>session_persistence_mapper`を参照してください。一般的には、：meth： <a href="#id7"><span class="problematic" id="id8">`</span></a>.SessionEvents.before_flush`メソッドは、一般的なon-flushの変更に対して優先されるべきです。</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first simple">
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.before_update.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.before_update.params.mapper">¶</a> -- このイベントのターゲットである：class： <cite>.Mapper</cite>。</li>
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.before_update.params.connection"></span><strong>connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.before_update.params.connection">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`はこのインスタンスのUPDATE文を発行するために使われます。これは、このインスタンスに固有のターゲット・データベース上の現在のトランザクションにハンドルを提供します。</li>
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.before_update.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.before_update.params.target">¶</a> -- マップされたインスタンスは永続化されます。イベントが `` raw = True``で設定されている場合、これは代わりにインスタンスに関連付けられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`状態管理オブジェクトになります。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">戻り値:</th><td class="field-body"><p class="first last">このイベントでは戻り値はサポートされていません。</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_persistence_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.MapperEvents.instrument_class">
<code class="descname">instrument_class</code><span class="sig-paren">(</span><em>mapper</em>, <em>class_</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.MapperEvents.instrument_class" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>マップされたクラスに計測が適用される前に、マッパーが最初に構築されたときにクラスを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;instrument_class&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_instrument_class</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">class_</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;instrument_class&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、マッパー構築の初期段階です。マッパーのほとんどの属性はまだ初期化されていません。</p>
<p>このリスナは、：class： <cite>.Mapper`クラス全体に適用することも、マップされるクラスのベースとして機能するマッピングされていないクラスに適用することもできます（</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>propagate = True``フラグを使用します）。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">Base</span><span class="p">,</span> <span class="s2">&quot;instrument_class&quot;</span><span class="p">,</span> <span class="n">propagate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">on_new_class</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">cls_</span><span class="p">):</span>
    <span class="s2">&quot; ... &quot;</span></pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.instrument_class.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.instrument_class.params.mapper">¶</a> -- このイベントのターゲットである：class： <cite>.Mapper</cite>。</li>
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.instrument_class.params.class_"></span><strong>class_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.instrument_class.params.class_">¶</a> -- マップされたクラス</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.MapperEvents.mapper_configured">
<code class="descname">mapper_configured</code><span class="sig-paren">(</span><em>mapper</em>, <em>class_</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.MapperEvents.mapper_configured" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>特定のマッパーが：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.configure_mappers`呼び出しの範囲内で独自の設定を完了したときに呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;mapper_configured&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_mapper_configured</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">class_</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;mapper_configured&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>：meth： <cite>.MapperEvents.mapper_configured`イベントは、：func：</cite> .orm.configure_mappers`関数が未構成のマッパーの現在のリストを処理するときに発生する各マッパーごとに呼び出されます。 ：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.orm.configure_mappers`は、通常、マッピングが最初に使用されるときに、新しいマッパーが利用可能になり、新しいマッパー使用が検出されるときに自動的に呼び出されます。</p>
<p>イベントが呼び出されると、マッパーは最終状態になるはずですが、<a href="#id1"><span class="problematic" id="id2">**</span></a>他のマッパーから呼び出される可能性のあるバックレックス**は含まれません。それらは構成操作内でまだ保留状態になっている可能性があります。 ：paramref： <a href="#id3"><span class="problematic" id="id4">`</span></a>.orm.relationship.back_populates`引数*で設定されている双方向の関係は、他の設定されていない可能性のあるマッパーがそれらが存在することを知ることに依存しないため、完全に利用可能になります。</p>
<p>** all <a href="#id1"><span class="problematic" id="id2">**</span></a>マッパーが他のマッピングでのみ定義されているバックレックスを含む準備ができていることが保証されているイベントの場合は、：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.MapperEvents.after_configured`イベントを使用します。このイベントは、既知のすべてのマッピングが完全に構成された後にのみ呼び出されます。</p>
<p>：meth： <cite>.MapperEvents.mapper_configured`イベントは、：meth：</cite> .MapperEvents.before_configured`または：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.MapperEvents.after_configured`とは異なり、マッパー/クラスごとに個別に呼び出され、マッパーはイベントに渡されます自体。また、特定のマッパーのために1回だけ呼び出されます。このイベントは、特定のマッパーベースで一度だけ呼び出されることから利益を得る構成ステップに役立ちます。これは、「バックリファレンス」構成が必ず準備されている必要はありません。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.mapper_configured.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.mapper_configured.params.mapper">¶</a> -- このイベントのターゲットである：class： <cite>.Mapper</cite>。</li>
<li><span class="target" id="sqlalchemy.orm.events.MapperEvents.mapper_configured.params.class_"></span><strong>class_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.MapperEvents.mapper_configured.params.class_">¶</a> -- マップされたクラス</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：meth： <cite>.MapperEvents.before_configured</cite></p>
<p class="last">：meth： <cite>.MapperEvents.after_configured</cite></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="instance-events">
<h2>インスタンスイベント<a class="headerlink" href="#instance-events" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="class">
<dt id="sqlalchemy.orm.events.InstanceEvents">
<em class="property">class </em><code class="descclassname">sqlalchemy.orm.events.</code><code class="descname">InstanceEvents</code><a class="headerlink" href="#sqlalchemy.orm.events.InstanceEvents" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="../core/events.html#sqlalchemy.event.base.Events" title="sqlalchemy.event.base.Events"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.event.base.Events</span></code></a></p>
<p>オブジェクトのライフサイクルに固有のイベントを定義します。</p>
<p>例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="k">def</span> <span class="nf">my_load_listener</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="nb">print</span> <span class="s2">&quot;on load!&quot;</span>

<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="n">my_load_listener</span><span class="p">)</span></pre></div>
</div>
<p>使用可能なターゲットは次のとおりです。</p>
<ul class="simple">
<li>マップされたクラス</li>
<li>（ `` propagate = True``フラグを使用して）マップされたクラスまたはマッピングされるべきクラスのマップされていないスーパークラス</li>
<li>：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Mapper`オブジェクト</li>
<li>：class： <cite>.Mapper`クラスと：func：</cite> .mapper`関数はすべてのマッパーをリッスンします。</li>
</ul>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 0.8.0 で変更: </span>インスタンスイベントは、マッピングされたクラスのマップされていないスーパークラスに関連付けることができます。</p>
</div>
<p>インスタンスイベントは、マッパーイベントと密接に関連していますが、永続性システムではなく、インスタンスとその計測に固有のものです。</p>
<p>：class： <cite>.InstanceEvents`を使うと、：func：</cite> .event.listen`関数に対していくつかの修飾子が利用できます。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.params.propagate"></span><strong>propagate=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.params.propagate">¶</a> -- Trueの場合、イベントリスナーは、継承するすべてのクラスおよびこのリスナーのターゲットであるクラスに適用する必要があります。</li>
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.params.raw"></span><strong>raw=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.params.raw">¶</a> -- Trueの場合、該当するイベントリスナー関数に渡される&amp;quot;target &amp;quot;引数は、マップされたインスタンス自体ではなく、インスタンスの：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`管理オブジェクトになります。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="sqlalchemy.orm.events.InstanceEvents.expire">
<code class="descname">expire</code><span class="sig-paren">(</span><em>target</em>, <em>attrs</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.InstanceEvents.expire" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>属性または一部のサブセットが期限切れになった後にオブジェクトインスタンスを受信します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;expire&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_expire</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;expire&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>&amp;#39;keys&amp;#39;は属性名のリストです。 Noneの場合、状態全体が期限切れになりました。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.expire.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.expire.params.target">¶</a> -- マップされたインスタンスイベントが `` raw = True``で設定されている場合、これは代わりにインスタンスに関連付けられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`状態管理オブジェクトになります。</li>
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.expire.params.attrs"></span><strong>attrs</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.expire.params.attrs">¶</a> -- 有効期限が切れた属性名のシーケンス、またはすべての属性が期限切れの場合はNone。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.InstanceEvents.first_init">
<code class="descname">first_init</code><span class="sig-paren">(</span><em>manager</em>, <em>cls</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.InstanceEvents.first_init" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>特定のマッピングの最初のインスタンスが呼び出されたときに呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;first_init&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_first_init</span><span class="p">(</span><span class="n">manager</span><span class="p">,</span> <span class="bp">cls</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;first_init&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、クラスの `` __init__``メソッドがその特定のクラスに対して初めて呼び出されたときに呼び出されます。イベントは：meth： <cite>.InstanceEvents.init`イベントが呼び出される前と同様に</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>__init__``が実際に処理される前に呼び出されます。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.InstanceEvents.init">
<code class="descname">init</code><span class="sig-paren">(</span><em>target</em>, <em>args</em>, <em>kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.InstanceEvents.init" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>コンストラクタが呼び出されたときにインスタンスを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;init&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_init</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;init&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このメソッドは、オブジェクトのコンストラクタ（例えば、 `` __init__``メソッド）とともに、オブジェクトのユーザランド構築時にのみ呼び出されます。オブジェクトがデータベースからロードされたときは呼び出されません。 ：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceEvents.load`イベントを参照して、データベースの負荷を傍受してください。</p>
<p>このイベントは、オブジェクトの実際の `` __init__``コンストラクタが呼び出される前に呼び出されます。 `` kwargs``辞書は、 `` __init__``に渡されるものに影響を与えるために、インプレースで修正されるかもしれません。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.init.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.init.params.target">¶</a> -- マップされたインスタンスイベントが `` raw = True``で設定されている場合、これは代わりにインスタンスに関連付けられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`状態管理オブジェクトになります。</li>
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.init.params.args"></span><strong>args</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.init.params.args">¶</a> -- `` __init__``メソッドに渡された位置引数です。これはタプルとして渡され、現在は不変です。</li>
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.init.params.kwargs"></span><strong>kwargs</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.init.params.kwargs">¶</a> -- キーワード引数は `` __init__``メソッドに渡されます。この構造*は変更することができます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：meth： <cite>.InstanceEvents.init_failure</cite></p>
<p class="last">：meth： <cite>.InstanceEvents.load</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.InstanceEvents.init_failure">
<code class="descname">init_failure</code><span class="sig-paren">(</span><em>target</em>, <em>args</em>, <em>kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.InstanceEvents.init_failure" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>コンストラクタが呼び出されたときにインスタンスを受け取り、例外を送出します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;init_failure&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_init_failure</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;init_failure&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このメソッドは、オブジェクトのコンストラクタ（例えば、 `` __init__``メソッド）とともに、オブジェクトのユーザランド構築時にのみ呼び出されます。オブジェクトがデータベースからロードされたときには呼び出されません。</p>
<p>このイベントは、 `` __init__``メソッドによって発生した例外が捕捉された後に呼び出されます。イベントが呼び出された後、元の例外が外側に再生成され、オブジェクトの構築によって引き続き例外が発生します。実際の例外とスタックトレースは `` sys.exc_info（） <a href="#id1"><span class="problematic" id="id2">``</span></a>に存在するはずです。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.init_failure.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.init_failure.params.target">¶</a> -- マップされたインスタンスイベントが `` raw = True``で設定されている場合、これは代わりにインスタンスに関連付けられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`状態管理オブジェクトになります。</li>
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.init_failure.params.args"></span><strong>args</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.init_failure.params.args">¶</a> -- `` __init__``メソッドに渡された位置引数。</li>
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.init_failure.params.kwargs"></span><strong>kwargs</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.init_failure.params.kwargs">¶</a> -- `` __init__``メソッドに渡されたキーワード引数。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：meth： <cite>.InstanceEvents.init</cite></p>
<p class="last">：meth： <cite>.InstanceEvents.load</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.InstanceEvents.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>target</em>, <em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.InstanceEvents.load" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>オブジェクトインスタンスが `` __new__``を介して生成され、初期属性の集合が発生した後にそれを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;load&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_load</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;load&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>これは、通常、受信結果の行に基づいてインスタンスが作成され、そのインスタンスの存続時間に対して一度だけ呼び出される場合に発生します。</p>
<p>結果行のロード中、このメソッドはこのインスタンスに対して最初に受信された行で呼び出されることに注意してください。結果行にあるものに応じて、属性やコレクションの一部がロードされたり、初期化されたりされたりすることがあります。</p>
<p>：meth： <cite>.InstanceEvents.load`イベントは、func：</cite> .orm.reconstructor`というクラスメソッドデコレータフォーマットでも利用できます。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.load.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.load.params.target">¶</a> -- マップされたインスタンスイベントが `` raw = True``で設定されている場合、これは代わりにインスタンスに関連付けられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`状態管理オブジェクトになります。</li>
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.load.params.context"></span><strong>context</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.load.params.context">¶</a> -- 進行中の：class： <cite>.Query`に対応する：class：</cite> .QueryContext`。この引数は、loadが：class： <cite>.Query`に対応しない場合、</cite> <cite>None``とすることができます。例えば、：meth：</cite>。Session.merge`の間です。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：meth： <cite>.InstanceEvents.init</cite></p>
<p>：meth： <cite>.InstanceEvents.refresh</cite></p>
<p>：meth： <cite>.SessionEvents.loaded_as_persistent</cite></p>
<p class="last">：ref： <cite>mapping_constructors</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.InstanceEvents.pickle">
<code class="descname">pickle</code><span class="sig-paren">(</span><em>target</em>, <em>state_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.InstanceEvents.pickle" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>関連付けられた状態がピクルされているときにオブジェクトインスタンスを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;pickle&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_pickle</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">state_dict</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;pickle&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.pickle.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.pickle.params.target">¶</a> -- マップされたインスタンスイベントが `` raw = True``で設定されている場合、これは代わりにインスタンスに関連付けられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`状態管理オブジェクトになります。</li>
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.pickle.params.state_dict"></span><strong>state_dict</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.pickle.params.state_dict">¶</a> -- pickleされる状態を含む：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState .__ getstate__`によって返された辞書。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.InstanceEvents.refresh">
<code class="descname">refresh</code><span class="sig-paren">(</span><em>target</em>, <em>context</em>, <em>attrs</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.InstanceEvents.refresh" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>1つまたは複数の属性がクエリからリフレッシュされた後にオブジェクトインスタンスを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;refresh&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_refresh</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;refresh&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>これを：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceEvents.load`メソッドと比較してください。このメソッドは、オブジェクトがクエリから最初に読み込まれたときに呼び出されます。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.refresh.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.refresh.params.target">¶</a> -- マップされたインスタンスイベントが `` raw = True``で設定されている場合、これは代わりにインスタンスに関連付けられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`状態管理オブジェクトになります。</li>
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.refresh.params.context"></span><strong>context</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.refresh.params.context">¶</a> -- 進行中の：class： <cite>.Query`に対応する：class：</cite> .QueryContext`。</li>
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.refresh.params.attrs"></span><strong>attrs</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.refresh.params.attrs">¶</a> -- 取り込まれた属性名のシーケンス、またはすべての列マップされた非遅延属性が移入された場合はNone。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：meth： <cite>.InstanceEvents.load</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.InstanceEvents.refresh_flush">
<code class="descname">refresh_flush</code><span class="sig-paren">(</span><em>target</em>, <em>flush_context</em>, <em>attrs</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.InstanceEvents.refresh_flush" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>オブジェクトの永続性内で1つ以上の属性がリフレッシュされた後、オブジェクトインスタンスを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;refresh_flush&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_refresh_flush</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">flush_context</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;refresh_flush&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、作業単位処理内で呼び出される以外は：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceEvents.refresh`と同じです。ここでの値は、通常、RETURNING句を使用するなど、INSERTまたはUPDATEを処理するプロセスに由来します。 Python側のデフォルト値から</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.0.5 で追加.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.refresh_flush.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.refresh_flush.params.target">¶</a> -- マップされたインスタンスイベントが `` raw = True``で設定されている場合、これは代わりにインスタンスに関連付けられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`状態管理オブジェクトになります。</li>
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.refresh_flush.params.flush_context"></span><strong>flush_context</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.refresh_flush.params.flush_context">¶</a> -- 内部：クラス：フラッシュの詳細を扱う <a href="#id1"><span class="problematic" id="id2">`</span></a>.UOWTransaction`オブジェクトです。</li>
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.refresh_flush.params.attrs"></span><strong>attrs</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.refresh_flush.params.attrs">¶</a> -- 入力された属性名のシーケンス。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.InstanceEvents.unpickle">
<code class="descname">unpickle</code><span class="sig-paren">(</span><em>target</em>, <em>state_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.InstanceEvents.unpickle" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>関連付けられた状態がアンピクルされた後にオブジェクトインスタンスを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="s1">&#39;unpickle&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_unpickle</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">state_dict</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;unpickle&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.unpickle.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.unpickle.params.target">¶</a> -- マップされたインスタンスイベントが `` raw = True``で設定されている場合、これは代わりにインスタンスに関連付けられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`状態管理オブジェクトになります。</li>
<li><span class="target" id="sqlalchemy.orm.events.InstanceEvents.unpickle.params.state_dict"></span><strong>state_dict</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.InstanceEvents.unpickle.params.state_dict">¶</a> -- その辞書は：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState .__ setstate__`に送られ、ピクルされた状態辞書を含んでいます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="session-events">
<h2>セッションイベント<a class="headerlink" href="#session-events" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="class">
<dt id="sqlalchemy.orm.events.SessionEvents">
<em class="property">class </em><code class="descclassname">sqlalchemy.orm.events.</code><code class="descname">SessionEvents</code><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="../core/events.html#sqlalchemy.event.base.Events" title="sqlalchemy.event.base.Events"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.event.base.Events</span></code></a></p>
<p>class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`ライフサイクルに固有のイベントを定義します。</p>
<p>例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="k">import</span> <span class="n">sessionmaker</span>

<span class="k">def</span> <span class="nf">my_before_commit</span><span class="p">(</span><span class="n">session</span><span class="p">):</span>
    <span class="nb">print</span> <span class="s2">&quot;before commit!&quot;</span>

<span class="n">Session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">()</span>

<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">Session</span><span class="p">,</span> <span class="s2">&quot;before_commit&quot;</span><span class="p">,</span> <span class="n">my_before_commit</span><span class="p">)</span></pre></div>
</div>
<p>：func： <cite>〜.event.listen`関数は：class：</cite> .Session`オブジェクトと、：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜.sessionmaker（）`と：class： <a href="#id3"><span class="problematic" id="id4">`</span></a>〜.scoped_session（）`の戻り値を受け付けます。 。</p>
<p>さらに、：class： <cite>.Session`インスタンスを受け入れます。このクラスは、すべて：class：</cite> .Session`インスタンスにリスナーをグローバルに適用します。</p>
<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.after_attach">
<code class="descname">after_attach</code><span class="sig-paren">(</span><em>session</em>, <em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.after_attach" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>インスタンスがセッションにアタッチされた後に実行します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;after_attach&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_attach</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_attach&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>これは、追加、削除、またはマージの後に呼び出されます。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">0.8以降、このイベントは、項目が以前のリリースとは異なるセッションに完全に関連付けられた後に*切断されます。まだセッション状態の一部ではないオブジェクトを必要とするイベントハンドラ（ターゲットオブジェクトがまだ完成していない間に自動実行するハンドラなど）では、new：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.before_attach`イベントを考慮してください。</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：meth： <cite>〜.SessionEvents.before_attach</cite></p>
<p class="last">：ref： <cite>session_lifecycle_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.after_begin">
<code class="descname">after_begin</code><span class="sig-paren">(</span><em>session</em>, <em>transaction</em>, <em>connection</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.after_begin" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>接続時にトランザクションが開始された後に実行する</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;after_begin&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_begin</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">transaction</span><span class="p">,</span> <span class="n">connection</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_begin&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.after_begin.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.after_begin.params.session">¶</a> -- target：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`です。</li>
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.after_begin.params.transaction"></span><strong>transaction</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.after_begin.params.transaction">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.SessionTransaction`です。</li>
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.after_begin.params.connection"></span><strong>connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.after_begin.params.connection">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜.engine.Connection`オブジェクトは、SQL文に使用されます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：meth： <cite>〜.SessionEvents.before_commit</cite></p>
<p>：meth： <cite>〜.SessionEvents.after_commit</cite></p>
<p>：meth： <cite>〜.SessionEvents.after_transaction_create</cite></p>
<p class="last">：meth： <cite>〜.SessionEvents.after_transaction_end</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.after_bulk_delete">
<code class="descname">after_bulk_delete</code><span class="sig-paren">(</span><em>delete_context</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.after_bulk_delete" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>セッションに対する一括削除操作の後に実行します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style (arguments as of 0.9)</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;after_bulk_delete&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_bulk_delete</span><span class="p">(</span><span class="n">delete_context</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_bulk_delete&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span>

<span class="c1"># legacy calling style (pre-0.9)</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;after_bulk_delete&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_bulk_delete</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">query_context</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_bulk_delete&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 0.9 で変更: </span>`` after_bulk_delete``イベントは、引数 `` delete_context``を受け付けます。上記の前回の引数署名を受け入れるリスナー関数は、自動的に新しい署名に適合します。</p>
</div>
<p>これは：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Query.delete`メソッドの結果として呼び出されます。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><span class="target" id="sqlalchemy.orm.events.SessionEvents.after_bulk_delete.params.delete_context"></span><strong>delete_context</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.after_bulk_delete.params.delete_context">¶</a> -- <p>これらの属性を含む、更新に関する詳細を含む&amp;quot;コンテキストを削除する&amp;quot;オブジェクト：</p>
<blockquote>
<div><ul class="simple">
<li>`` session``  - ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`に関係します</li>
<li>`` query``：この更新操作が呼び出されたクラス： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Query`オブジェクトです。</li>
<li>`` context``：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.QueryContext`オブジェクトで、ORMクエリの呼び出しに対応します。</li>
<li>`` result``：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.ResultProxy`はバルクDELETE操作の結果として返されます。</li>
</ul>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.after_bulk_update">
<code class="descname">after_bulk_update</code><span class="sig-paren">(</span><em>update_context</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.after_bulk_update" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>セッションに対する一括更新操作の後に実行します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style (arguments as of 0.9)</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;after_bulk_update&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_bulk_update</span><span class="p">(</span><span class="n">update_context</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_bulk_update&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span>

<span class="c1"># legacy calling style (pre-0.9)</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;after_bulk_update&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_bulk_update</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">query_context</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_bulk_update&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 0.9 で変更: </span>`` after_bulk_update``イベントは引数 `` update_context``を受け付けます。上記の前回の引数署名を受け入れるリスナー関数は、自動的に新しい署名に適合します。</p>
</div>
<p>これは：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Query.update`メソッドの結果として呼び出されます。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><span class="target" id="sqlalchemy.orm.events.SessionEvents.after_bulk_update.params.update_context"></span><strong>update_context</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.after_bulk_update.params.update_context">¶</a> -- <p>これらの属性を含む更新に関する詳細を含む&amp;quot;更新コンテキスト&amp;quot;オブジェクト：</p>
<blockquote>
<div><ul class="simple">
<li>`` session``  - ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`に関係します</li>
<li>`` query``：この更新操作が呼び出されたクラス： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Query`オブジェクトです。</li>
<li>`` context``：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.QueryContext`オブジェクトで、ORMクエリの呼び出しに対応します。</li>
<li>`` result``：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.ResultProxy`は一括UPDATE操作の結果として返されます。</li>
</ul>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.after_commit">
<code class="descname">after_commit</code><span class="sig-paren">(</span><em>session</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.after_commit" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>コミットが発生した後に実行します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;after_commit&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_commit</span><span class="p">(</span><span class="n">session</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_commit&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">：meth： <cite>〜.SessionEvents.after_commit`フックは、フラッシュではなく、つまり、：class：</cite> .Session`は、トランザクションのスコープ内で何度もデータベースにSQLを出すことができます。これらのイベントをインターセプトするには、：meth： <cite>〜.SessionEvents.before_flush</cite>、：meth：<cite>〜.SessionEvents.after_flush</cite>、または：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜.SessionEvents.after_flush_postexec`イベントを使用します。</p>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">：class： <cite>.Session`は、：meth：</cite>〜.SessionEvents.after_commit`イベントが呼び出されたときにアクティブなトランザクションにないため、SQLを出力できません。すべてのトランザクションに対応するSQLを出力するには、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜.SessionEvents.before_commit`イベントを使用します。</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><span class="target" id="sqlalchemy.orm.events.SessionEvents.after_commit.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.after_commit.params.session">¶</a> -- target：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`です。</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：meth： <cite>〜.SessionEvents.before_commit</cite></p>
<p>：meth： <cite>〜.SessionEvents.after_begin</cite></p>
<p>：meth： <cite>〜.SessionEvents.after_transaction_create</cite></p>
<p class="last">：meth： <cite>〜.SessionEvents.after_transaction_end</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.after_flush">
<code class="descname">after_flush</code><span class="sig-paren">(</span><em>session</em>, <em>flush_context</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.after_flush" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>flushが完了した後、commitが呼び出される前に実行します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;after_flush&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_flush</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">flush_context</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_flush&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>セッションの状態はまだpre-flushであることに注意してください。つまり、 &amp;#39;new&amp;#39;、 &amp;#39;dirty&amp;#39;、 &amp;#39;deleted&amp;#39;リストはプリフラッシュ状態とインスタンス属性の履歴設定を表示します。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.after_flush.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.after_flush.params.session">¶</a> -- target：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`です。</li>
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.after_flush.params.flush_context"></span><strong>flush_context</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.after_flush.params.flush_context">¶</a> -- 内部：クラス：フラッシュの詳細を扱う <a href="#id1"><span class="problematic" id="id2">`</span></a>.UOWTransaction`オブジェクトです。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：meth： <cite>〜.SessionEvents.before_flush</cite></p>
<p>：meth： <cite>〜.SessionEvents.after_flush_postexec</cite></p>
<p class="last">：ref： <cite>session_persistence_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.after_flush_postexec">
<code class="descname">after_flush_postexec</code><span class="sig-paren">(</span><em>session</em>, <em>flush_context</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.after_flush_postexec" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>フラッシュが完了した後、および実行後状態が発生した後に実行します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;after_flush_postexec&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_flush_postexec</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">flush_context</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_flush_postexec&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>これは、「新規」、「ダーティ」、および「削除済み」リストが最終状態にあるときです。フラッシュが自身のトランザクションを開始したかどうか、またはより大きなトランザクションに参加したかどうかによって、実際のcommit（）が発生しているかどうかは不明です。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.after_flush_postexec.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.after_flush_postexec.params.session">¶</a> -- target：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`です。</li>
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.after_flush_postexec.params.flush_context"></span><strong>flush_context</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.after_flush_postexec.params.flush_context">¶</a> -- 内部：クラス：フラッシュの詳細を扱う <a href="#id1"><span class="problematic" id="id2">`</span></a>.UOWTransaction`オブジェクトです。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：meth： <cite>〜.SessionEvents.before_flush</cite></p>
<p>：meth： <cite>〜.SessionEvents.after_flush</cite></p>
<p class="last">：ref： <cite>session_persistence_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.after_rollback">
<code class="descname">after_rollback</code><span class="sig-paren">(</span><em>session</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.after_rollback" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>実際のDBAPIロールバックが発生した後に実行します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;after_rollback&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_rollback</span><span class="p">(</span><span class="n">session</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_rollback&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、データベースに対する*実際の*ロールバックが発生したときにのみ発生します。基礎のDBAPIトランザクションがすでにロールバックされている場合は、：meth： <cite>.Session.rollback`メソッドが呼び出されるたびに起動されません。多くの場合、：class： `.Session`は、現在のトランザクションが有効でないため、このイベント中は&amp;quot;アクティブ&amp;quot;状態になりません。一番外側のロールバックが進行した後にアクティブである：class： `.Session`を取得するには、：meth：</cite> .SessionEvents.after_soft_rollback`イベントを使用して：attr： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.is_active`フラグをチェックします。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><span class="target" id="sqlalchemy.orm.events.SessionEvents.after_rollback.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.after_rollback.params.session">¶</a> -- target：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`です。</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.after_soft_rollback">
<code class="descname">after_soft_rollback</code><span class="sig-paren">(</span><em>session</em>, <em>previous_transaction</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.after_soft_rollback" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>DBAPIレベルで実際には出力されない&amp;quot;ソフト&amp;quot;ロールバックを含む、ロールバックが発生した後に実行します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;after_soft_rollback&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_soft_rollback</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">previous_transaction</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_soft_rollback&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>これはネストされたロールバックと外側のロールバックの両方に対応します。つまり、DBAPIのrollback（）メソッドを呼び出す最も内側のロールバックと、トランザクションスタックからポップするロールバック呼び出しのみに対応します。</p>
<p>指定された：class： <cite>.Session`は、最初に：attr：</cite> .Session.is_active`フラグをチェックすることによって、最も外側のロールバック後にSQLと：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.query`オペレーションを呼び出すために使用できます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">Session</span><span class="p">,</span> <span class="s2">&quot;after_soft_rollback&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">previous_transaction</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">session</span><span class="o">.</span><span class="n">is_active</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;select * from some_table&quot;</span><span class="p">)</span></pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.after_soft_rollback.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.after_soft_rollback.params.session">¶</a> -- target：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`です。</li>
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.after_soft_rollback.params.previous_transaction"></span><strong>previous_transaction</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.after_soft_rollback.params.previous_transaction">¶</a> -- ：class： <cite>.SessionTransaction`トランザクションマーカーオブジェクトです。 ：class： `.Session`のcurrent：class：</cite> .SessionTransaction`は、：attr： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.transaction`属性で利用できます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.7.3 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.after_transaction_create">
<code class="descname">after_transaction_create</code><span class="sig-paren">(</span><em>session</em>, <em>transaction</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.after_transaction_create" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>new：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.SessionTransaction`が作成されたときに実行します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;after_transaction_create&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_transaction_create</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">transaction</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_transaction_create&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、：meth： <cite>〜.SessionEvents.after_begin`と異なり、個々のデータベース接続でトランザクションが開始されるときとは異なり、class：</cite> .SessionTransaction`が全体として発生します。またネストされたトランザクションとサブトランザクションに対しても呼び出され、対応する：meth： <cite>〜.SessionEvents.after_transaction_end`イベント（：class：</cite> .Session`の通常の操作を前提とします）と常に一致します。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.after_transaction_create.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.after_transaction_create.params.session">¶</a> -- ターゲット：クラス： <a href="#id1"><span class="problematic" id="id2">`</span></a>。セッション &amp;#39;。</li>
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.after_transaction_create.params.transaction"></span><strong>transaction</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.after_transaction_create.params.transaction">¶</a> -- ターゲット：クラス： <cite>.SessionTransaction</cite>。 &amp;quot;サブトランザクション&amp;quot;またはSAVEPOINTとは対照的に、これが最も外側のクラス： <cite>.SessionTransaction`であるかどうかを検出するには、：attr：</cite> .SessionTransaction.parent`属性が `` None``であることをテストします:: &#64; ：session.listens_for（session、&amp;quot;after_transaction_create &amp;quot;）def after_transaction_create（session、transaction）：transaction.parentがNoneの場合：＃トップレベルトランザクションで動作する：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.SessionTransaction`がSAVEPOINTであるかどうかを検出するには、 （セッション、トランザクション）：after transaction_create（セッション、トランザクション）：トランザクション.nestedの場合：＃SAVEPOINTトランザクションで動作します。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：class： <cite>.SessionTransaction</cite></p>
<p class="last">：meth： <cite>〜.SessionEvents.after_transaction_end</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.after_transaction_end">
<code class="descname">after_transaction_end</code><span class="sig-paren">(</span><em>session</em>, <em>transaction</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.after_transaction_end" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.SessionTransaction`の期間が終了すると実行します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;after_transaction_end&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_transaction_end</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">transaction</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_transaction_end&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、使用中のall：class： <cite>.SessionTransaction`オブジェクト（ネストされたトランザクションやサブトランザクションのオブジェクトを含む）に対応しています：meth：</cite>〜.SessionEvents.after_commit`とは異なり、常に対応する：meth： ` 〜.SessionEvents.after_transaction_create`イベントです。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.after_transaction_end.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.after_transaction_end.params.session">¶</a> -- ターゲット：クラス： <a href="#id1"><span class="problematic" id="id2">`</span></a>。セッション &amp;#39;。</li>
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.after_transaction_end.params.transaction"></span><strong>transaction</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.after_transaction_end.params.transaction">¶</a> -- ターゲット：クラス： <cite>.SessionTransaction</cite>。 &amp;quot;サブトランザクション&amp;quot;またはSAVEPOINTとは対照的に、これが最も外側のクラス： <cite>.SessionTransaction`であるかどうかを検出するには、：attr：</cite> .SessionTransaction.parent`属性が `` None``であることをテストします:: &#64; （セッション、トランザクション）：もしtransaction.parentがNoneの場合：＃トップレベルのトランザクションで動作する：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.SessionTransaction`がSAVEPOINTであるかどうかを検出するには、次のようにします。 （セッション、トランザクション）：after transaction_nested：＃SAVEPOINTトランザクションで動作します。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：class： <cite>.SessionTransaction</cite></p>
<p class="last">：meth： <cite>〜.SessionEvents.after_transaction_create</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.before_attach">
<code class="descname">before_attach</code><span class="sig-paren">(</span><em>session</em>, <em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.before_attach" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>インスタンスがセッションにアタッチされる前に実行します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;before_attach&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_before_attach</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;before_attach&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>これは、追加、削除、またはマージによってオブジェクトがセッションの一部になる前に呼び出されます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.8. で追加: </span>次のように注意してください：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜.SessionEvents.after_attach`は、アイテムがセッションの一部になった後に起動します。 ：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.before_attach`は、項目がまだセッション状態の一部であるべきでない場合に提供されます。</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：meth： <cite>〜.SessionEvents.after_attach</cite></p>
<p class="last">：ref： <cite>session_lifecycle_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.before_commit">
<code class="descname">before_commit</code><span class="sig-paren">(</span><em>session</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.before_commit" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>コミットが呼び出される前に実行します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;before_commit&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_before_commit</span><span class="p">(</span><span class="n">session</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;before_commit&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">：meth： <cite>〜.SessionEvents.before_commit`フックは、フラッシュではなく、つまり：class：</cite> .Session`はトランザクションのスコープ内で何度もデータベースにSQLを出力できます。これらのイベントをインターセプトするには、：meth： <cite>〜.SessionEvents.before_flush</cite>、：meth：<cite>〜.SessionEvents.after_flush</cite>、または：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜.SessionEvents.after_flush_postexec`イベントを使用します。</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><span class="target" id="sqlalchemy.orm.events.SessionEvents.before_commit.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.before_commit.params.session">¶</a> -- target：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`です。</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：meth： <cite>〜.SessionEvents.after_commit</cite></p>
<p>：meth： <cite>〜.SessionEvents.after_begin</cite></p>
<p>：meth： <cite>〜.SessionEvents.after_transaction_create</cite></p>
<p class="last">：meth： <cite>〜.SessionEvents.after_transaction_end</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.before_flush">
<code class="descname">before_flush</code><span class="sig-paren">(</span><em>session</em>, <em>flush_context</em>, <em>instances</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.before_flush" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>フラッシュ処理が開始される前に実行します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;before_flush&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_before_flush</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">flush_context</span><span class="p">,</span> <span class="n">instances</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;before_flush&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.before_flush.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.before_flush.params.session">¶</a> -- target：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`です。</li>
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.before_flush.params.flush_context"></span><strong>flush_context</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.before_flush.params.flush_context">¶</a> -- 内部：クラス：フラッシュの詳細を扱う <a href="#id1"><span class="problematic" id="id2">`</span></a>.UOWTransaction`オブジェクトです。</li>
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.before_flush.params.instances"></span><strong>instances</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.before_flush.params.instances">¶</a> -- 通常 `` None``は：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.flush`メソッドに渡すことができるオブジェクトの集合です（この使用法は非推奨です）。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：meth： <cite>〜.SessionEvents.after_flush</cite></p>
<p>：meth： <cite>〜.SessionEvents.after_flush_postexec</cite></p>
<p class="last">：ref： <cite>session_persistence_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.deleted_to_detached">
<code class="descname">deleted_to_detached</code><span class="sig-paren">(</span><em>session</em>, <em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.deleted_to_detached" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>特定のオブジェクトの「切り離されたものから切り離されたものへ」遷移を代行する。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;deleted_to_detached&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_deleted_to_detached</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;deleted_to_detached&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、削除されたオブジェクトがセッションから削除されたときに呼び出されます。これが発生する典型的なケースは、オブジェクトが削除された：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`のトランザクションがコミットされたときです。オブジェクトは削除された状態から分離された状態に移動します。</p>
<p>：meth： <cite>.Session.expunge_all`または：meth：</cite> .Session.close`イベントが呼び出されたときにフラッシュされて削除されたオブジェクト、およびオブジェクトが削除された状態から個別に消去される場合にも呼び出されますvia：meth： <cite>。Session.expunge</cite>。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_lifecycle_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.deleted_to_persistent">
<code class="descname">deleted_to_persistent</code><span class="sig-paren">(</span><em>session</em>, <em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.deleted_to_persistent" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>特定のオブジェクトの「削除されたものから永続的なものへ」遷移を代行する。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;deleted_to_persistent&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_deleted_to_persistent</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;deleted_to_persistent&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>この移行は、フラッシュで正常に削除されたオブジェクトが：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.rollback`の呼び出しのために復元された場合にのみ発生します。このイベントは他の状況では呼び出されません。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_lifecycle_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.detached_to_persistent">
<code class="descname">detached_to_persistent</code><span class="sig-paren">(</span><em>session</em>, <em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.detached_to_persistent" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>特定のオブジェクトの &amp;quot;detached to persistent &amp;quot;への移行を傍受する。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;detached_to_persistent&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_detached_to_persistent</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;detached_to_persistent&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、この特定の遷移に対してのみ呼び出される：meth： <cite>.SessionEvents.after_attach`イベントの特殊化です。これは典型的に：meth： `.Session.add`呼び出しの間、また：meth：</cite> .Session.delete`呼び出し中に、オブジェクトが以前に：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`に関連付けられていなかった場合に呼び出されます&amp;quot;deleted &amp;quot;とマークされたオブジェクトはフラッシュが進むまで&amp;quot;persistent &amp;quot;状態のままです）。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">オブジェクトが：meth： <cite>.Session.delete`の呼び出しの一部として永続的になる場合、このイベントが呼び出されると、オブジェクトは** not **であり、削除されたとしてマークされます。削除されたオブジェクトを検出するには、：meth： `.SessionEvents.persistent_to_detached</cite> toイベントに送信された` <a href="#id1"><span class="problematic" id="id2">`</span></a>deleted``フラグをチェックしてください。または：meth：：.Session.deleted``コレクション内の：attr： <a href="#id3"><span class="problematic" id="id4">`</span></a>.SessionEvents.before_flush`イベントは、削除されたオブジェクトをフラッシュする前にインターセプトする必要がある場合に発生します。</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.detached_to_persistent.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.detached_to_persistent.params.session">¶</a> -- target：クラス： <cite>.Session</cite></li>
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.detached_to_persistent.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.detached_to_persistent.params.instance">¶</a> -- ORMでマップされたインスタンスが操作されます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_lifecycle_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.loaded_as_persistent">
<code class="descname">loaded_as_persistent</code><span class="sig-paren">(</span><em>session</em>, <em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.loaded_as_persistent" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>特定のオブジェクトの「永続的にロードされた」遷移を傍受します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;loaded_as_persistent&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_loaded_as_persistent</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;loaded_as_persistent&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、ORMロードプロセス内で呼び出され、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceEvents.load`イベントと非常によく似ています。ただし、ここでのイベントは、マッパーまたはクラス階層ではなく、：class： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Session`クラスまたはインスタンスにリンクでき、他のセッションライフサイクルイベントとスムーズに統合されます。このイベントが呼び出されると、オブジェクトはセッションのアイデンティティマップに存在することが保証されます。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.loaded_as_persistent.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.loaded_as_persistent.params.session">¶</a> -- target：クラス： <cite>.Session</cite></li>
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.loaded_as_persistent.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.loaded_as_persistent.params.instance">¶</a> -- ORMでマップされたインスタンスが操作されます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_lifecycle_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.pending_to_persistent">
<code class="descname">pending_to_persistent</code><span class="sig-paren">(</span><em>session</em>, <em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.pending_to_persistent" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>特定のオブジェクトに対する&amp;quot;pendingからpersistent &amp;quot; &amp;quot;への遷移を代行します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;pending_to_persistent&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_pending_to_persistent</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;pending_to_persistent&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、フラッシュプロセス内で呼び出され、：meth： <cite>.SessionEvents.after_flush`イベント内で：attr：</cite> .Session.new`コレクションをスキャンするのと同様です。ただし、この場合、イベントが呼び出されると、オブジェクトはすでに永続的な状態に移動されています。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.pending_to_persistent.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.pending_to_persistent.params.session">¶</a> -- target：クラス： <cite>.Session</cite></li>
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.pending_to_persistent.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.pending_to_persistent.params.instance">¶</a> -- ORMでマップされたインスタンスが操作されます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_lifecycle_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.pending_to_transient">
<code class="descname">pending_to_transient</code><span class="sig-paren">(</span><em>session</em>, <em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.pending_to_transient" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>特定のオブジェクトの &amp;quot;一時的な一時停止&amp;quot;遷移を代行する。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;pending_to_transient&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_pending_to_transient</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;pending_to_transient&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>この一般的でない移行は、フラッシュされていない保留中のオブジェクトがセッションから退去されたときに発生します。これは、：meth： <cite>.Session.rollback`メソッドがトランザクションをロールバックするとき、または：meth：</cite> .Session.expunge`メソッドが使用されたときに発生します。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.pending_to_transient.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.pending_to_transient.params.session">¶</a> -- target：クラス： <cite>.Session</cite></li>
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.pending_to_transient.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.pending_to_transient.params.instance">¶</a> -- ORMでマップされたインスタンスが操作されます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_lifecycle_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.persistent_to_deleted">
<code class="descname">persistent_to_deleted</code><span class="sig-paren">(</span><em>session</em>, <em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.persistent_to_deleted" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>特定のオブジェクトの &amp;quot;永続的に削除された&amp;quot;遷移を代行します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;persistent_to_deleted&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_persistent_to_deleted</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;persistent_to_deleted&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、フラッシュ内で永続オブジェクトのIDがデータベースから削除されたときに呼び出されますが、トランザクションが完了するまでオブジェクトはまだ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`に関連付けられたままです。</p>
<p>トランザクションがロールバックされると、オブジェクトは永続状態に再び移動し、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.SessionEvents.deleted_to_persistent`イベントが呼び出されます。トランザクションがコミットされると、オブジェクトはデタッチされ、：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.SessionEvents.deleted_to_detached`イベントを発行します。</p>
<p>：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.delete`メソッドはオブジェクトを削除済みとしてマークするためのプライマリパブリックインターフェイスですが、多くのオブジェクトはカスケードルールによって削除されますが、これは必ずフラッシュ時間までは決まっていません。したがって、フラッシュが完了するまで、削除されるすべてのオブジェクトをキャッチする方法はありません。したがって、：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.SessionEvents.persistent_to_deleted`イベントは、フラッシュの終了時に呼び出されます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_lifecycle_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.persistent_to_detached">
<code class="descname">persistent_to_detached</code><span class="sig-paren">(</span><em>session</em>, <em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.persistent_to_detached" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>特定のオブジェクトの「永続化から分離化」への移行を傍受します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;persistent_to_detached&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_persistent_to_detached</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;persistent_to_detached&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、永続オブジェクトがセッションから削除されたときに呼び出されます。これには、以下を含む多くの条件があります。</p>
<ul class="simple">
<li>：meth： <cite>.Session.expunge`や：meth：</cite> .Session.close`などのメソッドを使用します。</li>
<li>オブジェクトがそのセッションのトランザクションのINSERT文の一部であったときに：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.rollback`メソッドを呼び出す</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.persistent_to_detached.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.persistent_to_detached.params.session">¶</a> -- target：クラス： <cite>.Session</cite></li>
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.persistent_to_detached.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.persistent_to_detached.params.instance">¶</a> -- ORMでマップされたインスタンスが操作されます。</li>
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.persistent_to_detached.params.deleted"></span><strong>deleted</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.persistent_to_detached.params.deleted">¶</a> -- ブール値。 Trueの場合、このオブジェクトは削除済みとしてマークされ、フラッシュされたため、このオブジェクトは分離状態に移行したことを示します。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_lifecycle_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.persistent_to_transient">
<code class="descname">persistent_to_transient</code><span class="sig-paren">(</span><em>session</em>, <em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.persistent_to_transient" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>特定のオブジェクトの &amp;quot;一時的な一時的な&amp;quot;遷移を代行する。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;persistent_to_transient&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_persistent_to_transient</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;persistent_to_transient&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>この一般的でない移行は、フラッシュされている保留中のオブジェクトがセッションから退去されたときに発生します。これは、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.rollback`メソッドがトランザクションをロールバックするときに発生します。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.persistent_to_transient.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.persistent_to_transient.params.session">¶</a> -- target：クラス： <cite>.Session</cite></li>
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.persistent_to_transient.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.persistent_to_transient.params.instance">¶</a> -- ORMでマップされたインスタンスが操作されます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_lifecycle_events</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.SessionEvents.transient_to_pending">
<code class="descname">transient_to_pending</code><span class="sig-paren">(</span><em>session</em>, <em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.SessionEvents.transient_to_pending" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>特定のオブジェクトの&amp;quot;トランジェントからペンディング&amp;quot;への移行を傍受する。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSessionOrFactory</span><span class="p">,</span> <span class="s1">&#39;transient_to_pending&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_transient_to_pending</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;transient_to_pending&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、この特定の遷移に対してのみ呼び出される：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.SessionEvents.after_attach`イベントの特殊化です。これは通常、：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Session.add`呼び出し中に呼び出されます。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.transient_to_pending.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.transient_to_pending.params.session">¶</a> -- target：クラス： <cite>.Session</cite></li>
<li><span class="target" id="sqlalchemy.orm.events.SessionEvents.transient_to_pending.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.events.SessionEvents.transient_to_pending.params.instance">¶</a> -- ORMでマップされたインスタンスが操作されます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_lifecycle_events</cite></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="query-events">
<h2>クエリイベント<a class="headerlink" href="#query-events" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="class">
<dt id="sqlalchemy.orm.events.QueryEvents">
<em class="property">class </em><code class="descclassname">sqlalchemy.orm.events.</code><code class="descname">QueryEvents</code><a class="headerlink" href="#sqlalchemy.orm.events.QueryEvents" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="../core/events.html#sqlalchemy.event.base.Events" title="sqlalchemy.event.base.Events"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.event.base.Events</span></code></a></p>
<p>a：：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Query`オブジェクトの構築内のイベントを表します。</p>
<p>ここでのイベントは、クラス： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Query`のための未だリリースされていない検査システムで使われることを意図しています。非常に基本的な操作が可能ですが、検査システムは複雑なクエリ操作を自動化できるようになっています。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.0.0 で追加.</span></p>
</div>
<dl class="method">
<dt id="sqlalchemy.orm.events.QueryEvents.before_compile">
<code class="descname">before_compile</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.QueryEvents.before_compile" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>：class： <cite>.Query`オブジェクトをコア：class：</cite> .Select`オブジェクトに合成する前にそれを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeQuery</span><span class="p">,</span> <span class="s1">&#39;before_compile&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_before_compile</span><span class="p">(</span><span class="n">query</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;before_compile&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、指定されたクエリに変更を許可することを目的としています:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">Query</span><span class="p">,</span> <span class="s2">&quot;before_compile&quot;</span><span class="p">,</span> <span class="n">retval</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">no_deleted</span><span class="p">(</span><span class="n">query</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">query</span><span class="o">.</span><span class="n">column_descriptions</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">desc</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="n">User</span><span class="p">:</span>
            <span class="n">entity</span> <span class="o">=</span> <span class="n">desc</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">]</span>
            <span class="n">query</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">deleted</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">query</span></pre></div>
</div>
<p>このイベントは、通常、 `` retval = True``パラメータセットで聴かれるべきで、変更されたクエリが返されるかもしれません。</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-sqlalchemy.orm.instrumentation">
<span id="instrumentation-events"></span><h2>計装イベント<a class="headerlink" href="#module-sqlalchemy.orm.instrumentation" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>SQLAlchemyのクラス計装システムを定義します。</p>
<p>このモジュールは通常、ユーザーアプリケーションからは直接見ることができませんが、ORMの対話機能の大部分を定義します。</p>
<p>instrumentation.pyは、状態追跡のためのエンドユーザクラスの登録を処理します。 state.pyおよびattributes.pyと密接に相互作用し、それぞれインスタンス単位およびクラス単位の属性計測を確立します。</p>
<p>クラスインストルメンテーションシステムは、：mod： <a href="#id1"><span class="problematic" id="id2">`</span></a>sqlalchemy.ext.instrumentation`モジュールを使用して、クラスごとまたはグローバルベースでカスタマイズすることができます。モジュールは、別のインストルメンテーションフォームを構築および指定する手段を提供します。</p>
<dl class="class">
<dt id="sqlalchemy.orm.events.InstrumentationEvents">
<em class="property">class </em><code class="descclassname">sqlalchemy.orm.events.</code><code class="descname">InstrumentationEvents</code><a class="headerlink" href="#sqlalchemy.orm.events.InstrumentationEvents" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="../core/events.html#sqlalchemy.event.base.Events" title="sqlalchemy.event.base.Events"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.event.base.Events</span></code></a></p>
<p>クラス計測イベントに関連するイベント。</p>
<p>ここでのリスナーは、新しいスタイルクラス、つまり &amp;#39;type&amp;#39;のサブクラスであるオブジェクトに対して確立されることをサポートします。イベントは、そのクラスに対するイベントに対して発動されます。 &amp;quot;propagate = True &amp;quot;フラグがevent.listen（）に渡された場合、そのクラスのサブクラスに対してもイベントが発生します。</p>
<p>Pythonの `` type``組み込み関数もターゲットとして受け入れられ、使用されるとすべてのクラスのために放出されるイベントの効果があります。</p>
<p>デフォルトで `` False``となっている他のクラスレベルのイベントとは異なり、ここでの&amp;quot;propagate &amp;quot;フラグはデフォルトで `` True``になっています。これは、スーパークラスでリスナーが確立されたときに、新しいサブクラスもこれらのイベントの対象となることを意味します。</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 0.8 で変更: </span>- events here will emit based
on comparing the incoming class to the type of class
passed to <a class="reference internal" href="../core/event.html#sqlalchemy.event.listen" title="sqlalchemy.event.listen"><code class="xref py py-func docutils literal notranslate"><span class="pre">event.listen()</span></code></a>.  Previously, the
event would fire for any class unconditionally regardless
of what class was sent for listening, despite
documentation which stated the contrary.</p>
</div>
<dl class="method">
<dt id="sqlalchemy.orm.events.InstrumentationEvents.attribute_instrument">
<code class="descname">attribute_instrument</code><span class="sig-paren">(</span><em>cls</em>, <em>key</em>, <em>inst</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.InstrumentationEvents.attribute_instrument" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeBaseClass</span><span class="p">,</span> <span class="s1">&#39;attribute_instrument&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_attribute_instrument</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">inst</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;attribute_instrument&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>属性がインストルメントされたときに呼び出されます。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.InstrumentationEvents.class_instrument">
<code class="descname">class_instrument</code><span class="sig-paren">(</span><em>cls</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.InstrumentationEvents.class_instrument" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定されたクラスがインストルメントされた後に呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeBaseClass</span><span class="p">,</span> <span class="s1">&#39;class_instrument&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_class_instrument</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;class_instrument&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>：class： <cite>.ClassManager`で取得するには、：func：</cite> .manager_of_class`を使います。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.events.InstrumentationEvents.class_uninstrument">
<code class="descname">class_uninstrument</code><span class="sig-paren">(</span><em>cls</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.events.InstrumentationEvents.class_uninstrument" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定されたクラスがインストゥルメンテーションされる前に呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeBaseClass</span><span class="p">,</span> <span class="s1">&#39;class_uninstrument&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_class_uninstrument</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;class_uninstrument&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>：class： <cite>.ClassManager`で取得するには、：func：</cite> .manager_of_class`を使います。</p>
</dd></dl>

</dd></dl>

</div>
</div>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="extending.html" title="previous chapter">イベントと内部</a>
        Next:
        <a href="internals.html" title="next chapter">ORM内部</a>

    <div id="docs-copyright">
        &copy; <a href="../copyright.html">Copyright</a> 2007-2018, the SQLAlchemy authors and contributors.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.8.1.
    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '1.3.0b1',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../_static/detectmobile.js"></script>
    <script type="text/javascript" src="../_static/init.js"></script>


    </body>
</html>


