<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        
        <title>
            
    
    セッションAPI
 &mdash;
    SQLAlchemy 1.3 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../_static/changelog.css" type="text/css" />
                <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
        <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="SQLAlchemy 1.3 Documentation" href="../index.html" />
        <link rel="up" title="セッションの使用" href="session.html" />
        <link rel="next" title="イベントと内部" href="extending.html" />
        <link rel="prev" title="イベントによるオブジェクトおよびセッションの変更の追跡" href="session_events.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">1.3.0b1</span>


        | Release Date: unreleased

    </div>

    <h1>SQLAlchemy 1.3 Documentation</h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">


        <div id="docs-sidebar-popout">
            <h3><a href="../index.html">SQLAlchemy 1.3 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../contents.html">Contents</a> |
                <a href="../genindex.html">Index</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a>
        </h3>

        <ul>
<li><span class="link-container first"><a class="reference external" href="tutorial.html">オブジェクトリレーショナルチュートリアル</a></span></li>
<li><span class="link-container first"><a class="reference external" href="mapper_config.html">マッパー設定</a></span></li>
<li><span class="link-container first"><a class="reference external" href="relationships.html">関係の設定</a></span></li>
<li><span class="link-container first"><a class="reference external" href="loading_objects.html">オブジェクトの読み込み</a></span></li>
<li><span class="link-container first"><a class="reference external" href="session.html">セッションの使用</a></span><ul>
<li><span class="link-container first"><a class="reference external" href="session_basics.html">セッションの基礎</a></span></li>
<li><span class="link-container first"><a class="reference external" href="session_state_management.html">状態管理</a></span></li>
<li><span class="link-container first"><a class="reference external" href="cascades.html">カスケード</a></span></li>
<li><span class="link-container first"><a class="reference external" href="session_transaction.html">トランザクションと接続管理</a></span></li>
<li><span class="link-container first"><a class="reference external" href="persistence_techniques.html">追加の永続化手法</a></span></li>
<li><span class="link-container first"><a class="reference external" href="contextual.html">コンテキスト/スレッドローカルセッション</a></span></li>
<li><span class="link-container first"><a class="reference external" href="session_events.html">イベントによるオブジェクトおよびセッションの変更の追跡</a></span></li>
<li class="selected"><span class="link-container first"><strong>セッションAPI</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container first"><a class="reference external" href="#session-and-sessionmaker">セッションとsessionmaker（）</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#session-utilities">セッションユーティリティ</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#attribute-and-state-management-utilities">属性および状態管理ユーティリティ</a></span></li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container first"><a class="reference external" href="extending.html">イベントと内部</a></span></li>
<li><span class="link-container first"><a class="reference external" href="extensions/index.html">ORM拡張</a></span></li>
<li><span class="link-container first"><a class="reference external" href="examples.html">ORMの例</a></span></li>
</ul>



        </div>

        </div>

    </div>

    

    <div id="docs-body" class="withsidebar" >
        
<span class="target" id="module-sqlalchemy.orm.session"></span><div class="section" id="session-api">
<h1>セッションAPI<a class="headerlink" href="#session-api" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="section" id="session-and-sessionmaker">
<h2>セッションとsessionmaker（）<a class="headerlink" href="#session-and-sessionmaker" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="class">
<dt id="sqlalchemy.orm.session.sessionmaker">
<em class="property">class </em><code class="descclassname">sqlalchemy.orm.session.</code><code class="descname">sessionmaker</code><span class="sig-paren">(</span><em>bind=None</em>, <em>class_=&lt;class 'sqlalchemy.orm.session.Session'&gt;</em>, <em>autoflush=True</em>, <em>autocommit=False</em>, <em>expire_on_commit=True</em>, <em>info=None</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.sessionmaker" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.session._SessionClassMethods</span></code></p>
<p>設定可能な：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`ファクトリです。</p>
<p>：class： <cite>.sessionmaker`ファクトリはnew：class：</cite> .Session`オブジェクトを生成します。ここで設定された設定引数を使って作成します。</p>
<p>例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># global scope</span>
<span class="n">Session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">(</span><span class="n">autoflush</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># later, in a local scope, create and use a session:</span>
<span class="n">sess</span> <span class="o">=</span> <span class="n">Session</span><span class="p">()</span></pre></div>
</div>
<p>コンストラクタ自体に送られたキーワード引数は、&amp;quot;configured &amp;quot;キーワードを上書きします:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">()</span>

<span class="c1"># bind an individual session to a connection</span>
<span class="n">sess</span> <span class="o">=</span> <span class="n">Session</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">connection</span><span class="p">)</span></pre></div>
</div>
<p>このクラスにはメソッド：meth： <cite>.configure`も含まれています。これはファクトリへの追加のキーワード引数を指定するために使用でき、それは生成された後の：class：</cite> .Session`オブジェクトに対して有効になります。これは、通常、クラス： <cite>.Engine`オブジェクトを既存の：class：</cite> .sessionmaker`ファクトリと最初に使用する前に関連付けるために使用されます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># application starts</span>
<span class="n">Session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">()</span>

<span class="c1"># ... later</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///foo.db&#39;</span><span class="p">)</span>
<span class="n">Session</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>

<span class="n">sess</span> <span class="o">=</span> <span class="n">Session</span><span class="p">()</span></pre></div>
</div>
<dl class="method">
<dt id="sqlalchemy.orm.session.sessionmaker.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>**local_kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.sessionmaker.__call__" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Produce a new <a class="reference internal" href="#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object using the configuration
established in this <a class="reference internal" href="#sqlalchemy.orm.session.sessionmaker" title="sqlalchemy.orm.session.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a>.</p>
<p>In Python, the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method is invoked on an object when
it is &quot;called&quot; in the same way as a function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">()</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="p">()</span>  <span class="c1"># invokes sessionmaker.__call__()</span></pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy.orm.session.sessionmaker.__eq__">
<code class="descname">__eq__</code><a class="headerlink" href="#sqlalchemy.orm.session.sessionmaker.__eq__" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="inherited-member docutils container">
<em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">__eq__</span></code> <em>attribute of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></div>
<p>Return self==value.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.sessionmaker.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>bind=None</em>, <em>class_=&lt;class 'sqlalchemy.orm.session.Session'&gt;</em>, <em>autoflush=True</em>, <em>autocommit=False</em>, <em>expire_on_commit=True</em>, <em>info=None</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.sessionmaker.__init__" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Construct a new <a class="reference internal" href="#sqlalchemy.orm.session.sessionmaker" title="sqlalchemy.orm.session.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a>.</p>
<p>All arguments here except for <code class="docutils literal notranslate"><span class="pre">class_</span></code> correspond to arguments
accepted by <a class="reference internal" href="#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> directly.  See the
<a class="reference internal" href="#sqlalchemy.orm.session.Session.__init__" title="sqlalchemy.orm.session.Session.__init__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.__init__()</span></code></a> docstring for more details on parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.session.sessionmaker.params.bind"></span><strong>bind</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.sessionmaker.params.bind">¶</a> -- a <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> or other <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connectable" title="sqlalchemy.engine.Connectable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connectable</span></code></a> with
which newly created <a class="reference internal" href="#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objects will be associated.</li>
<li><span class="target" id="sqlalchemy.orm.session.sessionmaker.params.class_"></span><strong>class_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.sessionmaker.params.class_">¶</a> -- class to use in order to create new <a class="reference internal" href="#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>
objects.  Defaults to <a class="reference internal" href="#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</li>
<li><span class="target" id="sqlalchemy.orm.session.sessionmaker.params.autoflush"></span><strong>autoflush</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.sessionmaker.params.autoflush">¶</a> -- The autoflush setting to use with newly created
<a class="reference internal" href="#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objects.</li>
<li><span class="target" id="sqlalchemy.orm.session.sessionmaker.params.autocommit"></span><strong>autocommit</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.sessionmaker.params.autocommit">¶</a> -- The autocommit setting to use with newly created
<a class="reference internal" href="#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objects.</li>
<li><span class="target" id="sqlalchemy.orm.session.sessionmaker.params.expire_on_commit"></span><strong>expire_on_commit=True</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.sessionmaker.params.expire_on_commit">¶</a> -- the expire_on_commit setting to use
with newly created <a class="reference internal" href="#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objects.</li>
<li><span class="target" id="sqlalchemy.orm.session.sessionmaker.params.info"></span><strong>info</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.sessionmaker.params.info">¶</a> -- <p>optional dictionary of information that will be available
via <a class="reference internal" href="#sqlalchemy.orm.session.Session.info" title="sqlalchemy.orm.session.Session.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.info</span></code></a>.  Note this dictionary is <em>updated</em>, not
replaced, when the <code class="docutils literal notranslate"><span class="pre">info</span></code> parameter is specified to the specific
<a class="reference internal" href="#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> construction operation.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.9.0 で追加.</span></p>
</div>
</li>
<li><span class="target" id="sqlalchemy.orm.session.sessionmaker.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.sessionmaker.params.**kw">¶</a> -- all other keyword arguments are passed to the
constructor of newly created <a class="reference internal" href="#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objects.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy.orm.session.sessionmaker.__le__">
<code class="descname">__le__</code><a class="headerlink" href="#sqlalchemy.orm.session.sessionmaker.__le__" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="inherited-member docutils container">
<em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">__le__</span></code> <em>attribute of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></div>
<p>Return self&lt;=value.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy.orm.session.sessionmaker.__lt__">
<code class="descname">__lt__</code><a class="headerlink" href="#sqlalchemy.orm.session.sessionmaker.__lt__" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="inherited-member docutils container">
<em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">__lt__</span></code> <em>attribute of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></div>
<p>Return self&lt;value.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy.orm.session.sessionmaker.__ne__">
<code class="descname">__ne__</code><a class="headerlink" href="#sqlalchemy.orm.session.sessionmaker.__ne__" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="inherited-member docutils container">
<em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">__ne__</span></code> <em>attribute of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></div>
<p>Return self!=value.</p>
</dd></dl>

<dl class="classmethod">
<dt id="sqlalchemy.orm.session.sessionmaker.close_all">
<em class="property">classmethod </em><code class="descname">close_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.sessionmaker.close_all" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="inherited-member docutils container">
<em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">close_all()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">_SessionClassMethods</span></code></div>
<p>メモリ内の*すべての*セッションを閉じます。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.sessionmaker.configure">
<code class="descname">configure</code><span class="sig-paren">(</span><em>**new_kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.sessionmaker.configure" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>（Re）このセッションメーカーの引数を設定します。</p>
<p>例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">()</span>

<span class="n">Session</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite://&#39;</span><span class="p">))</span></pre></div>
</div>
</dd></dl>

<dl class="classmethod">
<dt id="sqlalchemy.orm.session.sessionmaker.identity_key">
<em class="property">classmethod </em><code class="descname">identity_key</code><span class="sig-paren">(</span><em>orm_util</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.sessionmaker.identity_key" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="inherited-member docutils container">
<em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">identity_key()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">_SessionClassMethods</span></code></div>
<p>IDキーを返します。</p>
<p>これは：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.util.identity_key`のエイリアスです。</p>
</dd></dl>

<dl class="classmethod">
<dt id="sqlalchemy.orm.session.sessionmaker.object_session">
<em class="property">classmethod </em><code class="descname">object_session</code><span class="sig-paren">(</span><em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.sessionmaker.object_session" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="inherited-member docutils container">
<em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">object_session()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">_SessionClassMethods</span></code></div>
<p>オブジェクトが属する：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`を返します。</p>
<p>これは：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.object_session`のエイリアスです。</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sqlalchemy.orm.session.Session">
<em class="property">class </em><code class="descclassname">sqlalchemy.orm.session.</code><code class="descname">Session</code><span class="sig-paren">(</span><em>bind=None</em>, <em>autoflush=True</em>, <em>expire_on_commit=True</em>, <em>_enable_transaction_accounting=True</em>, <em>autocommit=False</em>, <em>twophase=False</em>, <em>weak_identity_map=True</em>, <em>binds=None</em>, <em>extension=None</em>, <em>enable_baked_queries=True</em>, <em>info=None</em>, <em>query_cls=&lt;class 'sqlalchemy.orm.query.Query'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.session._SessionClassMethods</span></code></p>
<p>ORMでマップされたオブジェクトの永続操作を管理します。</p>
<p>セッションの使用パラダイムは、doc： <a href="#id1"><span class="problematic" id="id2">`</span></a>/ orm / session`に記述されています。</p>
<dl class="attribute">
<dt id="sqlalchemy.orm.session.Session.__eq__">
<code class="descname">__eq__</code><a class="headerlink" href="#sqlalchemy.orm.session.Session.__eq__" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="inherited-member docutils container">
<em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">__eq__</span></code> <em>attribute of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></div>
<p>Return self==value.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>bind=None</em>, <em>autoflush=True</em>, <em>expire_on_commit=True</em>, <em>_enable_transaction_accounting=True</em>, <em>autocommit=False</em>, <em>twophase=False</em>, <em>weak_identity_map=True</em>, <em>binds=None</em>, <em>extension=None</em>, <em>enable_baked_queries=True</em>, <em>info=None</em>, <em>query_cls=&lt;class 'sqlalchemy.orm.query.Query'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.__init__" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Construct a new Session.</p>
<p>See also the <a class="reference internal" href="#sqlalchemy.orm.session.sessionmaker" title="sqlalchemy.orm.session.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a> function which is used to
generate a <a class="reference internal" href="#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>-producing callable with a given
set of arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.session.Session.params.autocommit"></span><strong>autocommit</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.params.autocommit">¶</a> -- <div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">The autocommit flag is <strong>not for general use</strong>, and if it is
used, queries should only be invoked within the span of a
<a class="reference internal" href="#sqlalchemy.orm.session.Session.begin" title="sqlalchemy.orm.session.Session.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin()</span></code></a> / <a class="reference internal" href="#sqlalchemy.orm.session.Session.commit" title="sqlalchemy.orm.session.Session.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code></a> pair.  Executing
queries outside of a demarcated transaction is a legacy mode
of usage, and can in some cases lead to concurrent connection
checkouts.</p>
</div>
<p>Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>. When <code class="docutils literal notranslate"><span class="pre">True</span></code>, the
<a class="reference internal" href="#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> does not keep a persistent transaction running,
and will acquire connections from the engine on an as-needed basis,
returning them immediately after their use. Flushes will begin and
commit (or possibly rollback) their own transaction if no
transaction is present. When using this mode, the
<a class="reference internal" href="#sqlalchemy.orm.session.Session.begin" title="sqlalchemy.orm.session.Session.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin()</span></code></a> method is used to explicitly start
transactions.</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_autocommit</cite></p>
</div>
</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.params.autoflush"></span><strong>autoflush</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.params.autoflush">¶</a> -- When <code class="docutils literal notranslate"><span class="pre">True</span></code>, all query operations will issue a
<a class="reference internal" href="#sqlalchemy.orm.session.Session.flush" title="sqlalchemy.orm.session.Session.flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">flush()</span></code></a> call to this <code class="docutils literal notranslate"><span class="pre">Session</span></code> before proceeding.
This is a convenience feature so that <a class="reference internal" href="#sqlalchemy.orm.session.Session.flush" title="sqlalchemy.orm.session.Session.flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">flush()</span></code></a> need
not be called repeatedly in order for database queries to retrieve
results. It's typical that <code class="docutils literal notranslate"><span class="pre">autoflush</span></code> is used in conjunction
with <code class="docutils literal notranslate"><span class="pre">autocommit=False</span></code>. In this scenario, explicit calls to
<a class="reference internal" href="#sqlalchemy.orm.session.Session.flush" title="sqlalchemy.orm.session.Session.flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">flush()</span></code></a> are rarely needed; you usually only need to
call <a class="reference internal" href="#sqlalchemy.orm.session.Session.commit" title="sqlalchemy.orm.session.Session.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">commit()</span></code></a> (which flushes) to finalize changes.</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.params.bind"></span><strong>bind</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.params.bind">¶</a> -- An optional <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> or <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> to
which this <code class="docutils literal notranslate"><span class="pre">Session</span></code> should be bound. When specified, all SQL
operations performed by this session will execute via this
connectable.</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.params.binds"></span><strong>binds</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.params.binds">¶</a> -- <dl class="docutils">
<dt>An optional dictionary which contains more granular</dt>
<dd>&quot;bind&quot; information than the <code class="docutils literal notranslate"><span class="pre">bind</span></code> parameter provides. This
dictionary can map individual :class`.Table`
instances as well as <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.mapper.Mapper" title="sqlalchemy.orm.mapper.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> instances to individual
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> or <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> objects. Operations which
proceed relative to a particular <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.mapper.Mapper" title="sqlalchemy.orm.mapper.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> will consult this
dictionary for the direct <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.mapper.Mapper" title="sqlalchemy.orm.mapper.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> instance as
well as the mapper's <code class="docutils literal notranslate"><span class="pre">mapped_table</span></code> attribute in order to locate
a connectable to use. The full resolution is described in the
<a class="reference internal" href="#sqlalchemy.orm.session.Session.get_bind" title="sqlalchemy.orm.session.Session.get_bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code></a>.
Usage looks like:<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">(</span><span class="n">binds</span><span class="o">=</span><span class="p">{</span>
    <span class="n">SomeMappedClass</span><span class="p">:</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;postgresql://engine1&#39;</span><span class="p">),</span>
    <span class="n">somemapper</span><span class="p">:</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;postgresql://engine2&#39;</span><span class="p">),</span>
    <span class="n">some_table</span><span class="p">:</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;postgresql://engine3&#39;</span><span class="p">),</span>
    <span class="p">})</span></pre></div>
</div>
</dd>
</dl>
<p>Also see the <a class="reference internal" href="#sqlalchemy.orm.session.Session.bind_mapper" title="sqlalchemy.orm.session.Session.bind_mapper"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bind_mapper()</span></code></a>
and <a class="reference internal" href="#sqlalchemy.orm.session.Session.bind_table" title="sqlalchemy.orm.session.Session.bind_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bind_table()</span></code></a> methods.</p>
</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.params.class_"></span><strong>class_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.params.class_">¶</a> -- Specify an alternate class other than
<code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.session.Session</span></code> which should be used by the
returned class. This is the only argument that is local to the
<a class="reference internal" href="#sqlalchemy.orm.session.sessionmaker" title="sqlalchemy.orm.session.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a> function, and is not sent directly to the
constructor for <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.params.enable_baked_queries"></span><strong>enable_baked_queries</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.params.enable_baked_queries">¶</a> -- <p>defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.  A flag consumed
by the <a class="reference internal" href="extensions/baked.html#module-sqlalchemy.ext.baked" title="sqlalchemy.ext.baked"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlalchemy.ext.baked</span></code></a> extension to determine if
&quot;baked queries&quot; should be cached, as is the normal operation
of this extension.  When set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, all caching is disabled,
including baked queries defined by the calling application as
well as those used internally.  Setting this flag to <code class="docutils literal notranslate"><span class="pre">False</span></code>
can significantly reduce memory use, however will also degrade
performance for those areas that make use of baked queries
(such as relationship loaders).   Additionally, baked query
logic in the calling application or potentially within the ORM
that may be malfunctioning due to cache key collisions or similar
can be flagged by observing if this flag resolves the issue.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.2 で追加.</span></p>
</div>
</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.params._enable_transaction_accounting"></span><strong>_enable_transaction_accounting</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.params._enable_transaction_accounting">¶</a> -- Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.  A
legacy-only flag which when <code class="docutils literal notranslate"><span class="pre">False</span></code> disables <em>all</em> 0.5-style
object accounting on transaction boundaries, including auto-expiry
of instances on rollback and commit, maintenance of the &quot;new&quot; and
&quot;deleted&quot; lists upon rollback, and autoflush of pending changes
upon <a class="reference internal" href="#sqlalchemy.orm.session.Session.begin" title="sqlalchemy.orm.session.Session.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">begin()</span></code></a>, all of which are interdependent.</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.params.expire_on_commit"></span><strong>expire_on_commit</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.params.expire_on_commit">¶</a> -- Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>. When <code class="docutils literal notranslate"><span class="pre">True</span></code>, all
instances will be fully expired after each <a class="reference internal" href="#sqlalchemy.orm.session.Session.commit" title="sqlalchemy.orm.session.Session.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">commit()</span></code></a>,
so that all attribute/object access subsequent to a completed
transaction will load from the most recent database state.</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.params.extension"></span><strong>extension</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.params.extension">¶</a> -- An optional
<a class="reference internal" href="deprecated.html#sqlalchemy.orm.interfaces.SessionExtension" title="sqlalchemy.orm.interfaces.SessionExtension"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionExtension</span></code></a> instance, or a list
of such instances, which will receive pre- and post- commit and
flush events, as well as a post-rollback event. <strong>Deprecated.</strong>
Please see <a class="reference internal" href="events.html#sqlalchemy.orm.events.SessionEvents" title="sqlalchemy.orm.events.SessionEvents"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionEvents</span></code></a>.</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.params.info"></span><strong>info</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.params.info">¶</a> -- <p>optional dictionary of arbitrary data to be associated
with this <a class="reference internal" href="#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.  Is available via the
<a class="reference internal" href="#sqlalchemy.orm.session.Session.info" title="sqlalchemy.orm.session.Session.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.info</span></code></a> attribute.  Note the dictionary is copied at
construction time so that modifications to the per-
<a class="reference internal" href="#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> dictionary will be local to that
<a class="reference internal" href="#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.9.0 で追加.</span></p>
</div>
</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.params.query_cls"></span><strong>query_cls</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.params.query_cls">¶</a> -- Class which should be used to create new Query
objects, as returned by the <a class="reference internal" href="#sqlalchemy.orm.session.Session.query" title="sqlalchemy.orm.session.Session.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code></a> method.
Defaults to <a class="reference internal" href="query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a>.</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.params.twophase"></span><strong>twophase</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.params.twophase">¶</a> -- When <code class="docutils literal notranslate"><span class="pre">True</span></code>, all transactions will be started as
a &quot;two phase&quot; transaction, i.e. using the &quot;two phase&quot; semantics
of the database in use along with an XID.  During a
<a class="reference internal" href="#sqlalchemy.orm.session.Session.commit" title="sqlalchemy.orm.session.Session.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">commit()</span></code></a>, after <a class="reference internal" href="#sqlalchemy.orm.session.Session.flush" title="sqlalchemy.orm.session.Session.flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">flush()</span></code></a> has been issued for all
attached databases, the <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.TwoPhaseTransaction.prepare" title="sqlalchemy.engine.TwoPhaseTransaction.prepare"><code class="xref py py-meth docutils literal notranslate"><span class="pre">prepare()</span></code></a>
method on each database's <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a> will be
called. This allows each database to roll back the entire
transaction, before each transaction is committed.</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.params.weak_identity_map"></span><strong>weak_identity_map</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.params.weak_identity_map">¶</a> -- Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code> - when set to
<code class="docutils literal notranslate"><span class="pre">False</span></code>, objects placed in the <a class="reference internal" href="#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> will be
strongly referenced until explicitly removed or the
<a class="reference internal" href="#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is closed.  <strong>Deprecated</strong> - The strong
reference identity map is legacy.  See the
recipe at <a class="reference internal" href="session_state_management.html#session-referencing-behavior"><span class="std std-ref">セッション参照動作</span></a> for
an event-based approach to maintaining strong identity
references.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy.orm.session.Session.__le__">
<code class="descname">__le__</code><a class="headerlink" href="#sqlalchemy.orm.session.Session.__le__" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="inherited-member docutils container">
<em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">__le__</span></code> <em>attribute of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></div>
<p>Return self&lt;=value.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy.orm.session.Session.__lt__">
<code class="descname">__lt__</code><a class="headerlink" href="#sqlalchemy.orm.session.Session.__lt__" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="inherited-member docutils container">
<em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">__lt__</span></code> <em>attribute of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></div>
<p>Return self&lt;value.</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy.orm.session.Session.__ne__">
<code class="descname">__ne__</code><a class="headerlink" href="#sqlalchemy.orm.session.Session.__ne__" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="inherited-member docutils container">
<em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">__ne__</span></code> <em>attribute of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></div>
<p>Return self!=value.</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.add">
<code class="descname">add</code><span class="sig-paren">(</span><em>instance</em>, <em>_warn=True</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.add" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>オブジェクトを `` Session``に配置します。</p>
<p>その状態は、次のフラッシュ操作でデータベースに保持されます。</p>
<p>`` add（） <a href="#id1"><span class="problematic" id="id2">``</span></a>への繰り返し呼び出しは無視されます。 `` add（） <a href="#id3"><span class="problematic" id="id4">``</span></a>の反対は `` expunge（） <a href="#id5"><span class="problematic" id="id6">``</span></a>です。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.add_all">
<code class="descname">add_all</code><span class="sig-paren">(</span><em>instances</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.add_all" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定されたインスタンスのコレクションをこの `` Session``に追加します。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.begin">
<code class="descname">begin</code><span class="sig-paren">(</span><em>subtransactions=False</em>, <em>nested=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.begin" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>this：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`でトランザクションを開始します。</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">：meth： <cite>.Session.begin`メソッドは** autocommitモード**と呼ばれる：class：</cite> .Session`でのより大きなパターンの一部です。基本的に**従来の使用モード**であり、新しいアプリケーションには必要ありません。 ：class： <cite>.Session`は通常、&amp;quot; begin &amp;quot;の作業を透過的に処理します。これはPython DBAPIに依存してトランザクションを透過的に&amp;quot;開始&amp;quot;します。現代的な：class： `.Session`プログラミングパターンを使用しているときにトランザクションを明示的に開始する必要はありません**。 `</cite> autocommit = False``のデフォルトモードでは、：class： <cite>.Session`はトランザクションのコンテキスト内ですべての作業を行います。つまり：meth：</cite> .Session.commit`を呼び出すとすぐに次のデータベース操作が呼び出されると、次のトランザクションが暗黙的に開始されます。さらなる背景については：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>session_autocommit`を参照してください。</p>
</div>
<p>paramref： <cite>〜.Session.begin.subtransactions`または：paramref：</cite>〜.Session.begin.nested`が指定されていない限り、class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`が既にトランザクションの内部にある場合、このメソッドはエラーを発生させます。 。 &amp;quot;サブトランザクション&amp;quot;は基本的に、ロールバックが発行されない限りデータベース接続のトランザクション状態に影響を与えないコード埋め込みパターンです。この場合、トランザクション全体がロールバックされます。サブトランザクションのドキュメントについては、ref： <a href="#id3"><span class="problematic" id="id4">`</span></a>session_subtransactions`を参照してください。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first simple">
<li><span class="target" id="sqlalchemy.orm.session.Session.begin.params.subtransactions"></span><strong>subtransactions</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.begin.params.subtransactions">¶</a> -- Trueの場合、this：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜.Session.begin`が&amp;quot;サブトランザクション&amp;quot;を作成できることを示します。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.begin.params.nested"></span><strong>nested</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.begin.params.nested">¶</a> -- Trueの場合はSAVEPOINTトランザクションを開始し、これは：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜.Session.begin_nested`を呼び出すのと同じです。 SAVEPOINTトランザクションのドキュメントについては、ref： <a href="#id3"><span class="problematic" id="id4">`</span></a>session_begin_nested`を参照してください。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">戻り値:</th><td class="field-body"><p class="first last">：class： <cite>.SessionTransaction`オブジェクトです。 class： `.SessionTransaction`はPythonコンテキストマネージャーとして働き、meth：</cite> .Session.begin`を&amp;quot;with &amp;quot;ブロックで使用できるようにします。例を参照してください：ref： <cite>session_autocommit</cite></p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：ref： <cite>session_autocommit</cite></p>
<p class="last">：meth： <cite>.Session.begin_nested</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.begin_nested">
<code class="descname">begin_nested</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.begin_nested" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>SAVEPOINTのように、このセッションで&amp;quot;ネスト&amp;quot;トランザクションを開始してください。</p>
<p>このメソッドが正しく機能するには、ターゲット・データベースおよび関連ドライバーがSQL SAVEPOINTをサポートしていなければなりません。</p>
<p>SAVEPOINTトランザクションのドキュメントについては、ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>session_begin_nested`を参照してください。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">戻り値:</th><td class="field-body">：class： <cite>.SessionTransaction`オブジェクトです。 class： `.SessionTransaction`はコンテキストマネージャとして機能し、meth：</cite> .Session.begin_nested`を&amp;quot;with &amp;quot;ブロックで使用できるようにします。使用例については：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>session_begin_nested`を参照してください。</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：ref： <cite>session_begin_nested</cite></p>
<p class="last">：ref： <cite>pysqlite_serializable</cite>  -  SAVEPOINTが正しく動作するためには、SQLiteドライバで特別な回避策が必要です。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.bind_mapper">
<code class="descname">bind_mapper</code><span class="sig-paren">(</span><em>mapper</em>, <em>bind</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.bind_mapper" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>class： <cite>.Mapper`を&amp;quot; bind &amp;quot;に関連付けます。たとえば、：class：</cite> .Engine`または：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`です。</p>
<p>指定されたマッパーは、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.get_bind`メソッドによって使用されるルックアップに追加されます。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.bind_table">
<code class="descname">bind_table</code><span class="sig-paren">(</span><em>table</em>, <em>bind</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.bind_table" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>class： <cite>.Table`を&amp;quot; bind &amp;quot;に関連付けます。たとえば、：class：</cite> .Engine`や：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`です。</p>
<p>指定されたマッパーは、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.get_bind`メソッドによって使用されるルックアップに追加されます。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.bulk_insert_mappings">
<code class="descname">bulk_insert_mappings</code><span class="sig-paren">(</span><em>mapper</em>, <em>mappings</em>, <em>return_defaults=False</em>, <em>render_nulls=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.bulk_insert_mappings" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定されたマッピング辞書のリストの一括挿入を実行します。</p>
<p>一括挿入機能は、単純なINSERT操作のソースとしてプレーンなPython辞書を使用することを可能にします。これらの辞書は、より高性能な「executemany」操作にグループ化されやすくなります。辞書を使用すると、&amp;quot;履歴&amp;quot;またはセッション状態管理機能が使用されず、多数の単純な行を挿入するときの待ち時間が短縮されます。</p>
<p>指定された辞書内の値は、通常、指定されたマッパーがマップされているテーブル全体の値を整理した後、変更なしでCore：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Insert`構造体に渡されます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.0.0 で追加.</span></p>
</div>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p>バルク挿入機能を使用すると、他のほとんどの作業単位機能を犠牲にして、ローのINSERTを行えるようになります。オブジェクト管理、リレーションシップ・ハンドリング、SQL文サポートなどの機能は、レコードの生のINSERTに賛成**しています。</p>
<p class="last"><strong>このメソッドを使用する前に、</strong>：ref： <cite>bulk_operations</cite> <a href="#id1"><span class="problematic" id="id2">**</span></a>の警告リストを読み、これらのシステムを使用して開発されたすべてのコードの機能を完全にテストして確認してください。</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.session.Session.bulk_insert_mappings.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.bulk_insert_mappings.params.mapper">¶</a> -- マッピングされたクラス、または実際の：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Mapper`オブジェクトであり、マッピングリスト内で表される単一の種類のオブジェクトを表します。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.bulk_insert_mappings.params.mappings"></span><strong>mappings</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.bulk_insert_mappings.params.mappings">¶</a> -- マッピングされたクラスの属性名の観点から、挿入されるべきマップされた行の状態を含む辞書のリスト。マッピングが継承継承マッピングなどの複数の表を参照する場合、各ディクショナリにはすべての表に移入するすべてのキーが含まれている必要があります。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.bulk_insert_mappings.params.return_defaults"></span><strong>return_defaults</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.bulk_insert_mappings.params.return_defaults">¶</a> -- Trueの場合、デフォルトを生成する値が欠落している行、つまり整数の主キーのデフォルトと順序が一度に** <a href="#id1"><span class="problematic" id="id2">**</span></a>挿入され、主キー値が使用可能になります。特にこれにより、結合継承および他のマルチテーブルマッピングが、主キー値を事前に提供する必要なく正しく挿入できるようになります。しかし、：paramref： <cite>.Session.bulk_insert_mappings.return_defaults</cite> <a href="#id3"><span class="problematic" id="id4">**</span></a>メソッド全体のパフォーマンスの向上**を大幅に削減します。挿入される行が1つのテーブルのみを参照する場合、返されるデフォルト情報が使用されないため、このフラグを設定する必要はありません。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.bulk_insert_mappings.params.render_nulls"></span><strong>render_nulls</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.bulk_insert_mappings.params.render_nulls">¶</a> -- Trueの場合、 `` None``の値は、INSERT文で省略されている列ではなく、INSERT文にNULL値が含まれるようになります。これにより、INSERTされるすべての行に、列の完全なセットがDBAPIにバッチ処理されることを許可する同一の列のセットを持つことができます。通常、前の行とは異なるNULL値の組み合わせを含む各列セットは、レンダリングされたINSERT文とは異なる一連の列を省略する必要があります。つまり、別の文として発行する必要があります。このフラグを渡すことによって、行の完全なセットが1つのバッチにバッチ可能であることが保証されます。ただし、省略された列によって呼び出されるサーバー側の既定値はスキップされるため、これらが必要でないことを確認する必要があります。 .. warning ::このフラグが設定されていると、<strong>サーバ側のデフォルトのSQL値は呼び出されません</strong>。 NULL値が明示的に送信されます。サーバー側のデフォルト関数を操作全体に対して呼び出す必要がないように注意する必要があります。 .. versionadded :: 1.1</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：ref： <cite>bulk_operations</cite></p>
<p>：meth： <cite>.Session.bulk_save_objects</cite></p>
<p class="last">：meth： <cite>。Session.bulk_update_mappings</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.bulk_save_objects">
<code class="descname">bulk_save_objects</code><span class="sig-paren">(</span><em>objects</em>, <em>return_defaults=False</em>, <em>update_changed_only=True</em>, <em>preserve_order=True</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.bulk_save_objects" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定されたオブジェクトのリストの一括保存を実行します。</p>
<p>バルク保存機能を使用すると、マップされたオブジェクトを簡単なINSERTおよびUPDATE操作のソースとして使用できます。これらの操作は、より簡単にグループ化してより高いパフォーマンスのexecutemany操作にすることができます。オブジェクトからのデータの抽出は、UPDATEの場合に属性が実際に変更されたかどうかを無視する低レイテンシ・プロセスを使用して実行され、SQL式も無視されます。</p>
<p>指定されたオブジェクトはセッションに追加されず、 `` return_defaults``フラグも設定されていない限り、追加の状態は確立されません。この場合、主キーの属性とサーバー側のデフォルト値が設定されます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.0.0 で追加.</span></p>
</div>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p>バルク・セーブ機能は、ほとんどの他の作業単位機能を犠牲にして、ローのINSERT / UPDATEローを可能にします。オブジェクト管理、リレーションシップ・ハンドリング、SQL文サポートなどの機能は、レコードの生のINSERT / UPDATESを優先して**自動的に省略されます**。</p>
<p class="last"><strong>このメソッドを使用する前に、</strong>：ref： <cite>bulk_operations</cite> <a href="#id1"><span class="problematic" id="id2">**</span></a>の警告リストを読み、これらのシステムを使用して開発されたすべてのコードの機能を完全にテストして確認してください。</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.session.Session.bulk_save_objects.params.objects"></span><strong>objects</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.bulk_save_objects.params.objects">¶</a> -- マップされたオブジェクトインスタンスのリストマップされたオブジェクトはそのまま維持され、後で：class： <cite>.Session`に関連付けられません**。オブジェクトごとに、オブジェクトがINSERTまたはUPDATEとして送信されるかどうかは、従来の操作では：class： `.Session`で使用されているものと同じです。オブジェクトに：attr： `.InstanceState.key`属性が設定されている場合、オブジェクトは&amp;quot; detached &amp;quot;とみなされ、UPDATEになります。それ以外の場合は、INSERTが使用されます。 UPDATEの場合、ステートメントはどの属性が変更されたかに基づいてグループ化され、各SET句の対象となります。 `</cite> update_changed_only``がFalseの場合、各オブジェクト内に存在するすべての属性がUPDATE文に適用され、より大きなexecutemany（）にグループ化されるのを助け、履歴のチェックオーバーヘッドを削減します属性に関する。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.bulk_save_objects.params.return_defaults"></span><strong>return_defaults</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.bulk_save_objects.params.return_defaults">¶</a> -- Trueの場合、デフォルトを生成する値が欠落している行、つまり整数の主キーのデフォルトと順序が一度に** <a href="#id1"><span class="problematic" id="id2">**</span></a>挿入され、主キー値が使用可能になります。特にこれにより、結合継承および他のマルチテーブルマッピングが、主キー値を事前に提供する必要なく正しく挿入できるようになります。しかし、：paramref： <cite>.Session.bulk_save_objects.return_defaults</cite> <a href="#id3"><span class="problematic" id="id4">**</span></a>メソッド全体のパフォーマンスの向上**を大幅に削減します。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.bulk_save_objects.params.update_changed_only"></span><strong>update_changed_only</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.bulk_save_objects.params.update_changed_only">¶</a> -- Trueの場合、変更を記録した各状態の属性に基づいてUPDATEステートメントがレンダリングされます。 Falseの場合、存在するすべての属性は主キー属性を除いてSET句に表示されます。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.bulk_save_objects.params.preserve_order"></span><strong>preserve_order</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.bulk_save_objects.params.preserve_order">¶</a> -- Trueの場合、挿入と更新の順序は、オブジェクトが指定された順序と正確に一致します。 Falseの場合、一般的なタイプのオブジェクトは、バッチ処理の機会を増やすために、挿入と更新にグループ化されます。 .. versionadded :: 1.3</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：ref： <cite>bulk_operations</cite></p>
<p>：meth： <cite>。Session.bulk_insert_mappings</cite></p>
<p class="last">：meth： <cite>。Session.bulk_update_mappings</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.bulk_update_mappings">
<code class="descname">bulk_update_mappings</code><span class="sig-paren">(</span><em>mapper</em>, <em>mappings</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.bulk_update_mappings" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定されたマッピング辞書のリストの一括更新を実行します。</p>
<p>一括更新機能により、単純なUPDATE操作のソースとしてプレーンなPython辞書を使用することが可能になります。これらの辞書は、より簡単にグループ化してより高いパフォーマンスのexecutemany操作にすることができます。辞書を使用すると、&amp;quot;履歴&amp;quot;またはセッション状態管理機能が使用されず、多数の単純な行を更新するときの待ち時間が短縮されます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.0.0 で追加.</span></p>
</div>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p>一括更新機能を使用すると、ほとんどの他の作業単位機能を犠牲にして、ロー待機時間の更新が可能になります。オブジェクト管理、リレーションシップ・ハンドリング、SQL文サポートなどの機能は、レコードの未処理の更新を優先して**自動的に省略されます**。</p>
<p class="last"><strong>このメソッドを使用する前に、</strong>：ref： <cite>bulk_operations</cite> <a href="#id1"><span class="problematic" id="id2">**</span></a>の警告リストを読み、これらのシステムを使用して開発されたすべてのコードの機能を完全にテストして確認してください。</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.session.Session.bulk_update_mappings.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.bulk_update_mappings.params.mapper">¶</a> -- マッピングされたクラス、または実際の：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Mapper`オブジェクトであり、マッピングリスト内で表される単一の種類のオブジェクトを表します。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.bulk_update_mappings.params.mappings"></span><strong>mappings</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.bulk_update_mappings.params.mappings">¶</a> -- マッピングされたクラスの属性名に関して、更新されるべきマップされた行の状態をそれぞれ含む辞書のリスト。マッピングが継承継承マッピングなどの複数の表を参照する場合、各ディクショナリにはすべての表に対応するキーが含まれる場合があります。存在し、主キーの一部ではないこれらのキーはすべて、UPDATEステートメントのSET節に適用されます。必須の主キー値はWHERE句に適用されます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：ref： <cite>bulk_operations</cite></p>
<p>：meth： <cite>。Session.bulk_insert_mappings</cite></p>
<p class="last">：meth： <cite>.Session.bulk_save_objects</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.close" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このセッションを閉じます。</p>
<p>これにより、すべての明細がクリアされ、進行中のトランザクションは終了します。</p>
<p>このセッションが `` autocommit = False``で作成された場合、新しいトランザクションが直ちに開始されます。この新しいトランザクションは、最初に必要とされるまで接続リソースを使用しないことに注意してください。</p>
</dd></dl>

<dl class="classmethod">
<dt id="sqlalchemy.orm.session.Session.close_all">
<em class="property">classmethod </em><code class="descname">close_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.close_all" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="inherited-member docutils container">
<em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">close_all()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">_SessionClassMethods</span></code></div>
<p>メモリ内の*すべての*セッションを閉じます。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.commit">
<code class="descname">commit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.commit" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>保留中の変更をフラッシュし、現在のトランザクションをコミットします。</p>
<p>進行中のトランザクションがない場合、このメソッドは：exc： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜sqlalchemy.exc.InvalidRequestError`を送出します。</p>
<p>デフォルトでは、：class： <cite>.Session`はトランザクションコミット後にすべてのORM管理属性のすべてのデータベースロード状態を満了します。これにより、後続の操作でデータベースから最新のデータがロードされます。この動作は、class： `.sessionmaker`または：class：</cite> .Session`コンストラクタに対する `` expire_on_commit = False``オプションを使用して無効にすることができます。</p>
<p>（begin（）が複数回呼び出されたときに起こる）サブトランザクションが有効な場合、サブトランザクションは閉じられ、次の `` commit（） <a href="#id1"><span class="problematic" id="id2">``</span></a>の呼び出しは、囲みトランザクションで動作します。</p>
<p>：class： <cite>.Session`をデフォルトモードの</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>autocommit = False``で使用すると、新しいトランザクションがコミットの直後に開始されますが、新たに開始されたトランザクションは接続リソースを使用しません最初のSQLが実際に出力されます。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_committing</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.connection">
<code class="descname">connection</code><span class="sig-paren">(</span><em>mapper=None</em>, <em>clause=None</em>, <em>bind=None</em>, <em>close_with_result=False</em>, <em>execution_options=None</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.connection" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>この：class： <cite>.Session`オブジェクトのトランザクション状態に対応するa：class：</cite> .Connection`オブジェクトを返します。</p>
<p>this：class： <cite>.Session`が</cite> <cite>autocommit = False``で設定されている場合、現在のトランザクションに対応する：class：</cite> .Connection`が返されるか、またはトランザクションが進行中でなければ、新しいトランザクションが開始されます：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`が返されました（最初のSQL文が発行されるまでDBAPIとのトランザクション状態は確立されません）。</p>
<p>代わりに、もし：class： <cite>.Session`が</cite> <cite>autocommit = True``で設定されていれば、基底クラス：meth：</cite> .Engine.contextual_connect`を使ってad-hoc：class： <cite>.Connection`を返します。 ： `.Engine</cite>。</p>
<p>マルチバインドまたはアンバインドのあいまいさ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`オブジェクトは任意のキーワード引数のいずれかによって解決できます。最終的には解決のために：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.get_bind`メソッドを使用します。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.session.Session.connection.params.bind"></span><strong>bind</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.connection.params.bind">¶</a> -- オプション：クラス： <cite>.Engine`をバインドとして使用します。このエンジンがすでに進行中のトランザクションに関与している場合、その接続が使用されます。この引数は `</cite> mapper``、 `` clause``よりも優先されます。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.connection.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.connection.params.mapper">¶</a> -- オプション：func： <cite>.mapper`マップクラス。適切なバインドを識別するために使用されます。この引数は `</cite> clause``よりも優先されます。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.connection.params.clause"></span><strong>clause</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.connection.params.clause">¶</a> -- A：class： <cite>.ClauseElement`（つまり：func：</cite>〜.sql.expression.select`、：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜.sql.expression.text`など）は、バインドの位置を特定するために使用されます。バインドは他の方法では特定できません。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.connection.params.close_with_result"></span><strong>close_with_result</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.connection.params.close_with_result">¶</a> -- ：meth： <cite>.Engine.connect`に渡され、：class：</cite> .Connection`は&amp;quot;一回使用&amp;quot;とみなされ、最初の結果セットが閉じられると自動的に閉じます。このフラグは、class： <cite>.Session`が</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>autocommit = True``で設定されており、まだ処理中のトランザクションがない場合にのみ有効です。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.connection.params.execution_options"></span><strong>execution_options</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.connection.params.execution_options">¶</a> -- 実行オプションの辞書：meth： <cite>.Connection.execution_options</cite>、<strong>接続が最初に唯一調達されたとき</strong>。 ：class： <cite>.Session`内にすでに接続が存在する場合、警告が発行され、引数は無視されます。 .. versionadded :: 0.9.9 .. seealso ::：ref： `session_transaction_isolation</cite></li>
<li><span class="target" id="sqlalchemy.orm.session.Session.connection.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.connection.params.**kw">¶</a> -- 追加のキーワード引数は：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>get_bind（）`に送られ、追加の引数を：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>get_bind`のカスタム実装に渡すことができます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.delete" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>インスタンスを削除済みとしてマークします。</p>
<p>データベースの削除操作は、 `` flush（） <a href="#id1"><span class="problematic" id="id2">``</span></a>で発生します。</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy.orm.session.Session.deleted">
<code class="descname">deleted</code><a class="headerlink" href="#sqlalchemy.orm.session.Session.deleted" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>この「セッション」内で「削除済み」とマークされたすべてのインスタンスのセット</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy.orm.session.Session.dirty">
<code class="descname">dirty</code><a class="headerlink" href="#sqlalchemy.orm.session.Session.dirty" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>dirtyとみなされるすべての永続インスタンスのセット。</p>
<p>例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">some_mapped_object</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">dirty</span></pre></div>
</div>
<p>インスタンスは変更されたものの、削除されていない場合はダーティと見なされます。</p>
<p>この「汚い」計算は「楽観的」であることに注意してください。ほとんどの属性設定やコレクションの変更操作では、属性の値が正味に変更されていなくても、インスタンスは「ダーティ」としてマークされ、このセットに配置されます。フラッシュ時には、各属性の値が以前に保存された値と比較され、正味の変更がない場合、SQL操作は行われません（これはより高価な操作なので、フラッシュ時のみに行われます）。</p>
<p>インスタンスがその属性に対する実効的な正味の変更を有するかどうかをチェックするには、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.is_modified`メソッドを使用します。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.enable_relationship_loading">
<code class="descname">enable_relationship_loading</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.enable_relationship_loading" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>関連オブジェクトロードのためにオブジェクトをthis：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`に関連付けます。</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.enable_relationship_loading`は特殊なユースケースに対応するために存在し、一般的な使用には推奨されません。</p>
</div>
<p>：func： <cite>.relationship`でマップされた属性のアクセスは、接続：class：</cite> .Session`を使用してデータベースから値をロードしようとします。値は、このオブジェクトに存在する外部キーと主キーの値に基づいてロードされます。存在しない場合、それらの関係は使用できなくなります。</p>
<p>オブジェクトはこのセッションにアタッチされますが、<strong>永続性操作には参加しません</strong>。ほぼすべての目的のための状態は、関係ロードの場合を除いて、 &amp;quot;一時的&amp;quot;または &amp;quot;分離された&amp;quot;のままになります。</p>
<p>また、バックファイルはしばしば期待どおりに動作しないことに注意してください。実効値が既に外部キー保持値からロードされているものである場合、ターゲット・オブジェクトのリレーションシップ・バインド属性を変更してもbackrefイベントが発生することはありません。</p>
<p>：meth： <cite>.Session.enable_relationship_loading`メソッドは：func：</cite> .relationship`の `` load_on_pending``フラグに似ています。このフラグとは異なり、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.enable_relationship_loading`は、オブジェクトが一時的なままで、関連するアイテムを読み込めるようにします。</p>
<p>一時オブジェクトを：class： <cite>.Session`に関連付けるには：meth：</cite> .Session.enable_relationship_loading`を保留にして、：class： <cite>.Session`に：meth：</cite> .Session.add`を通常追加してください。オブジェクトが代わりにデータベースの既存のidenityを表す場合は、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.merge`を使用してマージする必要があります。</p>
<p>：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.enable_relationship_loading`は、ORMが通常使用されているときの動作を改善しません。オブジェクト参照は、外部キーレベルではなくオブジェクトレベルで構築する必要があります。進む。この方法は一般的な使用を意図したものではありません。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.8 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>`` load_on_pending`` at：func： <cite>.relationship</cite>  - このフラグは、保留中のアイテムに対する多対1の関係ごとの読み込みを許可します。</p>
<p class="last">：func： <cite>.make_transient_to_detached</cite>  - オブジェクトは、SQLの発行なしで：class：` .Session`に追加することができます。これにより、アクセス時に属性が失効します。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>clause</em>, <em>params=None</em>, <em>mapper=None</em>, <em>bind=None</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.execute" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>現在のトランザクション内でSQL式構文または文字列ステートメントを実行します。</p>
<p>：class： <cite>.Engine`や：class：</cite> .Connection`と同じように、文の実行結果を表す：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.ResultProxy`を返します。</p>
<p>例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="n">user_table</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span>
        <span class="p">)</span></pre></div>
</div>
<p>：meth： <cite>〜.Session.execute`は：func：</cite>〜.sql.expression.select`、：func： <cite>〜.sql.expression.insert</cite>、：func：<cite>〜のような実行可能な節の構文を受け入れます。 sql.expression.update</cite>、：func： <cite>〜.sql.expression.delete</cite>、および：func：<cite>〜.sql.expression.text</cite>。プレーンなSQL文字列も渡すことができます。：meth： <cite>.Session.execute`の場合は：func：</cite>〜.expression.text`構造体を渡された場合と同じように解釈されます。つまり、以下の使用法です:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT * FROM user WHERE id=:param&quot;</span><span class="p">,</span>
            <span class="p">{</span><span class="s2">&quot;param&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">}</span>
        <span class="p">)</span></pre></div>
</div>
<p>::と同等です</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">text</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="n">text</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM user WHERE id=:param&quot;</span><span class="p">),</span>
            <span class="p">{</span><span class="s2">&quot;param&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">}</span>
        <span class="p">)</span></pre></div>
</div>
<p>：meth： <cite>.Session.execute`の2番目の位置引数はオプションのパラメータセットです。 ：meth： `.Connection.execute`の場合と同様に、これが単一の辞書または辞書のリストとして渡されるかどうかは、DBAPIカーソルの</cite> <cite>execute（）</cite> <cite>または</cite> <cite>executemany（）</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>が文の実行に使用されます。 INSERTコンストラクトは、単一の行に対して呼び出すことができます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="n">users</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;somename&quot;</span><span class="p">})</span></pre></div>
</div>
<p>または複数行の場合:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">users</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">[</span>
                        <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;somename7&quot;</span><span class="p">},</span>
                        <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;somename8&quot;</span><span class="p">},</span>
                        <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;somename9&quot;</span><span class="p">}</span>
                    <span class="p">])</span></pre></div>
</div>
<p>この文は、class： <cite>.Session`の現在のトランザクションコンテキスト内で実行されます。ステートメントの実行に使用される：class： `.Connection`は、：meth：</cite> .Session.connection`メソッドを呼び出すことによって直接取得することもできます。どちらのメソッドも、：class： <cite>.Connection`を決定するためにルールベースの解決スキームを使用します。これは、平均では：class：</cite> .Session`自身の&amp;quot;bind &amp;quot;から直接得られます。メソッドに渡される：func： <cite>.mapper`と：class：</cite> .Table`オブジェクトに基づいている場合もあります。このスキームの詳細については、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.get_bind`のドキュメントを参照してください。</p>
<p>：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.execute`メソッドはautoflushを呼び出しません*。</p>
<p>：meth： <cite>.Session.execute`メソッドによって返される：class：</cite> .ResultProxy`は、&amp;quot;close_with_result &amp;quot;フラグがtrueに設定された状態で返されます。このフラグの意味は：class： <cite>.Session`が自動コミットで、transaction-dedicated：class：</cite> .Connection`を使用できない場合、一時的な：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`が文の実行のために確立されていますこれは：class： <a href="#id3"><span class="problematic" id="id4">`</span></a>.ResultProxy`が利用可能なすべてのデータを消費したときに閉じられます（つまり、接続プールに返されます）。これは：class： <a href="#id5"><span class="problematic" id="id6">`</span></a>.Session`がautocommit = Trueで設定されていて、トランザクションが開始されていない場合にのみ*適用されます。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.session.Session.execute.params.clause"></span><strong>clause</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.execute.params.clause">¶</a> -- 実行可能な文（すなわち、：class： <cite>.Executable`のような：func：</cite> .expression.select`）または実行される文字列SQL文。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.execute.params.params"></span><strong>params</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.execute.params.params">¶</a> -- オプションの辞書、または辞書のリスト。バインドされたパラメータ値を含む。単一の辞書の場合は、単一行の実行が発生します。辞書のリストであれば、&amp;quot;executemany &amp;quot;が呼び出されます。各ディクショナリのキーは、文にあるパラメータ名に対応していなければなりません。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.execute.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.execute.params.mapper">¶</a> -- オプション：func： <cite>.mapper`またはマップされたクラス。適切なバインドを識別するために使用されます。この引数は、バインドを見つけるときに `</cite> clause``よりも優先されます。詳細は、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.get_bind`を参照してください。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.execute.params.bind"></span><strong>bind</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.execute.params.bind">¶</a> -- オプション：クラス： <cite>.Engine`をバインドとして使用します。このエンジンがすでに進行中のトランザクションに関与している場合、その接続が使用されます。この引数は、バインドを見つけるときに `</cite> mapper``と `` clause``よりも優先されます。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.execute.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.execute.params.**kw">¶</a> -- 追加のキーワード引数は：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.get_bind（）`に送られ、&amp;quot;バインド&amp;quot;体系の拡張性を可能にします。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：ref： <cite>sqlexpression_toplevel</cite>  - コアSQL構文の使用に関するチュートリアル。</p>
<p>：ref： <cite>connections_toplevel</cite>  - 直接ステートメント実行の詳細。</p>
<p class="last">：meth： <cite>.Connection.execute</cite>  - コアレベルの文の実行メソッド。これは：meth：` .Session.execute`は最終的に文を実行するために使用します。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.expire">
<code class="descname">expire</code><span class="sig-paren">(</span><em>instance</em>, <em>attribute_names=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.expire" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>インスタンスの属性を期限切れにします。</p>
<p>インスタンスの属性を古いものとしてマークします。期限切れの属性が次にアクセスされると、：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`オブジェクトの現在のトランザクションコンテキストに対してクエリが発行され、指定されたインスタンスのすべての期限切れ属性をロードします。高度に分離されたトランザクションは、そのトランザクション外のデータベース状態の変化にかかわらず、同じトランザクションで以前に読み取られたものと同じ値を返します。</p>
<p>：class： <cite>.Session`内のすべてのオブジェクトを同時に期限切れにするには、：meth：</cite> Session.expire_all`を使います。</p>
<p>：class： <cite>.Session`オブジェクトのデフォルトの振る舞いは、：meth：</cite> Session.rollback`メソッドまたは：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>Session.commit`メソッドが呼び出されるたびにすべてのステートを期限切れにすることで、新しいトランザクションに新しいステートをロードすることができます。この理由から、：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>Session.expire`を呼び出すことは、ORM以外のSQL文が現在のトランザクションで発行されたという特定の場合にのみ意味があります。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.session.Session.expire.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.expire.params.instance">¶</a> -- リフレッシュするインスタンス。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.expire.params.attribute_names"></span><strong>attribute_names</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.expire.params.attribute_names">¶</a> -- 有効期限が切れる属性のサブセットを示す文字列属性名のオプションのリスト。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：ref： <cite>session_expire</cite>  - 入門資料</p>
<p>：meth： <cite>。Session.expire</cite></p>
<p class="last">：meth： <cite>.Session.refresh</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.expire_all">
<code class="descname">expire_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.expire_all" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このセッション内の永続インスタンスをすべて期限切れにします。</p>
<p>永続インスタンス上の属性が次にアクセスされると、与えられたインスタンスのすべての期限切れ属性をロードするために、：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`オブジェクトの現在のトランザクションコンテキストを使用してクエリが発行されます。高度に分離されたトランザクションは、そのトランザクション外のデータベース状態の変化にかかわらず、同じトランザクションで以前に読み取られたものと同じ値を返します。</p>
<p>それらのオブジェクトの個々のオブジェクトと個々の属性を期限切れにするには、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>Session.expire`を使います。</p>
<p>：class： <cite>.Session`オブジェクトのデフォルトの振る舞いは、：meth：</cite> Session.rollback`メソッドまたは：meth： <cite>Session.commit`メソッドが呼び出されるたびにすべてのステートを期限切れにすることで、新しいトランザクションに新しいステートをロードすることができます。このため、トランザクションが分離されていると仮定して、自動コミットが `</cite> False``のときは：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>Session.expire_all`を呼び出す必要はありません。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：ref： <cite>session_expire</cite>  - 入門資料</p>
<p>：meth： <cite>。Session.expire</cite></p>
<p class="last">：meth： <cite>.Session.refresh</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.expunge">
<code class="descname">expunge</code><span class="sig-paren">(</span><em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.expunge" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>この `` Session``から <a href="#id1"><span class="problematic" id="id2">`</span></a>instance`を削除してください。</p>
<p>これにより、インスタンスへの内部参照がすべて解放されます。カスケーディングは* expunge <a href="#id1"><span class="problematic" id="id2">*</span></a>カスケード規則に従って適用されます。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.expunge_all">
<code class="descname">expunge_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.expunge_all" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>この `` Session``からすべてのオブジェクトインスタンスを削除してください。</p>
<p>これは、この `` Session``内のすべてのオブジェクトに対して `` expunge（obj） <a href="#id1"><span class="problematic" id="id2">``</span></a>を呼び出すのと同じです。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.flush">
<code class="descname">flush</code><span class="sig-paren">(</span><em>objects=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.flush" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>すべてのオブジェクトの変更をデータベースにフラッシュします。</p>
<p>保留中のオブジェクトの作成、削除、および変更をINSERT、DELETE、UPDATEなどとしてデータベースに書き込みます。操作は、セッションの作業単位依存ソルバーによって自動的に行われます。</p>
<p>データベース操作は現在のトランザクションコンテキストで発行され、エラーが発生しない限りトランザクションの状態には影響しません。この場合、トランザクション全体がロールバックされます。変更をPythonからデータベースのトランザクションバッファに移すために、トランザクション内で好きなだけ頻繁にflush（）することができます。</p>
<p>アクティブな手動トランザクションを持たない `` autocommit``セッションの場合、flush（）は、一連の操作の集合をフラッシュに囲むオンザフライでトランザクションを作成します。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><span class="target" id="sqlalchemy.orm.session.Session.flush.params.objects"></span><strong>objects</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.flush.params.objects">¶</a> -- オプション。指定されたコレクション内にある要素に対してのみ動作するようにフラッシュ操作を制限します。この機能は、フルフラッシュ（）が発生する前に特定のオブジェクトを操作する必要がある非常に狭い一連のユースケース用です。一般的な使用を意図したものではありません。</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.get_bind">
<code class="descname">get_bind</code><span class="sig-paren">(</span><em>mapper=None</em>, <em>clause=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.get_bind" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>this：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`がバインドされた&amp;quot; bind &amp;quot;を返します。</p>
<p>&amp;quot;bind &amp;quot;は通常：class： <cite>.Engine`のインスタンスです。：class：</cite> .Session`が：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`に明示的に直接バインドされている場合を除きます。</p>
<p>multiply-boundまたはunbound：class： <cite>.Session`の場合、返される適切なバインドを決定するために</cite> <cite>mapper``または</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>clause``引数が使用されます。</p>
<p>meth： <cite>.Session.get_bind`が：meth：</cite> .Session.query`のようなORM操作を介して呼び出されたときに、&amp;quot;mapper &amp;quot;引数が通常存在することに注意してください。その中で、個々のINSERT / UPDATE / DELETE操作a：meth： <cite>.Session.flush</cite>、呼び出しなど</p>
<p>解決の順序は次のとおりです。</p>
<ol class="arabic simple">
<li>mapperとsession.bindsが存在する場合、マッパーに基づいてバインドを探します。</li>
<li>指定されたif節とsession.bindsが存在する場合、session.bindsにある指定された句で見つかった：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Table`オブジェクトに基づいてバインドを探します。</li>
<li>session.bindが存在する場合は、それを返します。</li>
<li>指定されたif節は、最終的に節に関連付けられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.MetaData`にリンクされたバインドを返そうとします。</li>
<li>マッパーが指定されている場合は、：class： <cite>.Table`またはマッパーがマップされる他の選択肢に最終的に関連付けられた：class：</cite> .MetaData`にリンクされたバインドを返します。</li>
<li>バインドは見つかりません：exc： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜sqlalchemy.exc.UnboundExecutionError`が送出されます。</li>
</ol>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.session.Session.get_bind.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.get_bind.params.mapper">¶</a> -- オプション：func： <cite>.mapper`マップされたクラスまたはインスタンス：class：</cite> .Mapper`。このバインドは、class： <cite>.Session`に関連付けられた&amp;quot; binds &amp;quot;マップを参照することによって、class：</cite> .Mapper`から最初に導かれます。次に、そのクラスに関連付けられた：class： <cite>.MetaData`を参照します。 ：class： `.Table`には、：class：</cite> .Mapper`がバインドのためにマップされます。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.get_bind.params.clause"></span><strong>clause</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.get_bind.params.clause">¶</a> -- A：class： <cite>.ClauseElement`（つまり：func：</cite>〜.sql.expression.select`、：func： <cite>〜.sql.expression.text`など）。 `</cite> mapper``引数が存在しない場合、またはバインドを生成できなかった場合、指定された式構造体は、バインドされた要素、通常は：class： <cite>.Table`をbound：class：</cite> .MetaData`に関連付けて検索されます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="sqlalchemy.orm.session.Session.identity_key">
<em class="property">classmethod </em><code class="descname">identity_key</code><span class="sig-paren">(</span><em>orm_util</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.identity_key" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="inherited-member docutils container">
<em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">identity_key()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">_SessionClassMethods</span></code></div>
<p>IDキーを返します。</p>
<p>これは：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.util.identity_key`のエイリアスです。</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy.orm.session.Session.identity_map">
<code class="descname">identity_map</code><em class="property"> = None</em><a class="headerlink" href="#sqlalchemy.orm.session.Session.identity_map" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>オブジェクトアイデンティティのオブジェクト自体へのマッピング。</p>
<p>`` Session.identity_map.values（） <a href="#id1"><span class="problematic" id="id2">``</span></a>を反復すると、セッション中に現在存在する永続オブジェクト（つまり行IDを持つオブジェクト）の完全なセットへのアクセスが提供されます。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：func： <cite>.identity_key</cite>  - この辞書で使われているキーを生成するヘルパー関数。</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy.orm.session.Session.info">
<code class="descname">info</code><a class="headerlink" href="#sqlalchemy.orm.session.Session.info" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ユーザが変更可能な辞書。</p>
<p>この辞書の初期値は：class： <cite>.Session`コンストラクタまたは：class：</cite> .sessionmaker`コンストラクタまたはファクトリメソッドに対する `` info``引数を使って設定できます。ここの辞書は常にclass： <cite>.Session`のローカルであり、他の：class：</cite> .Session`オブジェクトとは独立して変更することができます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.9.0 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.invalidate">
<code class="descname">invalidate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.invalidate" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>接続の無効化を使用して、このセッションを閉じます。</p>
<p>これは：meth： <cite>.Session.close`の変種であり、：meth：</cite> .Connection.invalidate`メソッドがall：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクトに対して呼び出されることを保証します。これは、データベースが接続が安全に使用できなくなった状態にあることがわかっている場合に呼び出すことができます。</p>
<p>例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">sess</span> <span class="o">=</span> <span class="n">Session</span><span class="p">()</span>
    <span class="n">sess</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">User</span><span class="p">())</span>
    <span class="n">sess</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="k">except</span> <span class="n">gevent</span><span class="o">.</span><span class="n">Timeout</span><span class="p">:</span>
    <span class="n">sess</span><span class="o">.</span><span class="n">invalidate</span><span class="p">()</span>
    <span class="k">raise</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">sess</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
    <span class="k">raise</span></pre></div>
</div>
<p>これにより、すべての明細がクリアされ、進行中のトランザクションは終了します。</p>
<p>このセッションが `` autocommit = False``で作成された場合、新しいトランザクションが直ちに開始されます。この新しいトランザクションは、最初に必要とされるまで接続リソースを使用しないことに注意してください。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.9.9 で追加.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy.orm.session.Session.is_active">
<code class="descname">is_active</code><a class="headerlink" href="#sqlalchemy.orm.session.Session.is_active" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>これは：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`が&amp;quot;トランザクションモード&amp;quot;で、&amp;quot;部分的なロールバック&amp;quot;状態ではない場合に真です。</p>
<p>：class： <cite>.Session`はデフォルトモードの</cite> <cite>autocommit = False``にあり、基本的には常に&amp;quot;トランザクションモード&amp;quot;になっています：class：</cite> .SessionTransaction`はすぐにそれに関連付けられますインスタンス化されます。これは：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.SessionTransaction`は、ロールバック、コミット、またはクローズ操作のために、直ちに新しいものに置き換えられます。</p>
<p>&amp;quot;トランザクションモード&amp;quot;は、実際のデータベース接続リソースが使用されているかどうかを示しません。 ：class： <cite>.SessionTransaction`オブジェクトは、ゼロまたはそれ以上の実際のデータベーストランザクションの間で調整され、noneで始まり、異なるデータソースがそのスコープ内で使用されるときに個々のDBAPI接続を蓄積します。特定の：class： `.Session`が実際にDBAPIリソースを使用し始めた時を追跡する最良の方法は、：meth：</cite> .SessionEvents.after_begin`メソッドを使用してリスナーを実装することです。これは：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>の両方を提供します。 Session`とターゲット：class： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Connection`をユーザ定義のイベントリスナに渡します。</p>
<p>&amp;quot;部分ロールバック&amp;quot;状態は、フラッシュ中に通常使用される&amp;quot;内部&amp;quot;トランザクションがエラーに遭遇し、DBAPI接続のロールバックを発行するときに参照されます。この時点で、：class： <cite>.Session`は&amp;quot; partial rollback &amp;quot;にあり、トランザクションスタックを閉じるために：meth：</cite> .Session.rollback`を呼び出すのを待っています。この &amp;quot;部分的なロールバック&amp;quot;期間には、：attr： <cite>.is_active`フラグがFalseを返します。 ：meth： `.Session.rollback`の呼び出しの後、：class：</cite> .SessionTransaction`は新しいものに置き換えられ、：attr： <cite>.is_active`は再び</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>True``を返します。</p>
<p>class： <cite>.Session`が</cite> <cite>autocommit = True``モードで使われるとき、：class：</cite> .SessionTransaction`は、フラッシュ呼び出しのスコープ内でインスタンス化されるか、または：meth： <cite>。Session.begin `が呼び出されます。だから：attr： `.is_active`は、このモードでフラッシュまたは：meth：</cite> .Session.begin`ブロックの外側では常に `` False``であり、：meth： <cite>では</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>True``になります。 Session.begin`は&amp;quot;部分的ロールバック&amp;quot;状態に入らない限りブロックします。</p>
<p>上記のすべてから、このフラグの唯一の目的は、一般的なエラー処理ルーチン内で、&amp;quot;ロールバック&amp;quot;を検出するアプリケーションフレームワークが、class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`オブジェクトに対して必要であることです。 &amp;quot;部分的ロールバック&amp;quot;モードにしてください。典型的な統合のケースでは、最も外側の例外キャッチ内で：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Session.rollback`を無条件に発行するのが標準的な方法であるため、これも必要ではありません。</p>
<p>：class： <cite>.Session`のトランザクション状態を完全に追跡するには、主に：meth：</cite> .SessionEvents.after_begin`、：meth： <cite>.SessionEvents.after_commit</cite>、：meth：` .SessionEvents.after_rollback <a href="#id1"><span class="problematic" id="id2">`</span></a>と関連するイベント。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.is_modified">
<code class="descname">is_modified</code><span class="sig-paren">(</span><em>instance</em>, <em>include_collections=True</em>, <em>passive=True</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.is_modified" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定されたインスタンスにローカルに変更された属性がある場合は、 `` True``を返します。</p>
<p>このメソッドは、インスタンス上の計測された各属性の履歴を取得し、現在の値と以前にコミットされた値（存在する場合）との比較を実行します。</p>
<p>実際には：attr： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.dirty`コレクションの中で指定されたインスタンスをチェックするのにより高価で正確なバージョンです。各属性のネット &amp;quot;ダーティー&amp;quot;ステータスの完全なテストが実行されます。</p>
<p>例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="n">is_modified</span><span class="p">(</span><span class="n">someobject</span><span class="p">)</span></pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 0.8 で変更: </span>SQLAlchemy 0.7以前のバージョンを使用している場合、 `` passive``フラグは**常に**明示的に `` True``に設定する必要があります。そうしないと、SQLロード/オートフロスが進行し、変更された状態自体に影響します： `` session.is_modified （someobject、パッシブ= True） `` 。 0.8以上では、動作は修正され、このフラグは無視されます。</p>
</div>
<p>この方法のいくつかの注意点が適用されます。</p>
<ul>
<li><p class="first">：attr： <cite>.Session.dirty`コレクションに存在するインスタンスは、このメソッドでテストすると</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>False``を返します。これは、オブジェクトが属性の突然変異によって変更イベントを受け取ったため、attr： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Session.dirty`に配置される可能性がありますが、最終的に状態はデータベースからロードされたものと同じであり、ここでは実質的な変更はありません。</p>
</li>
<li><p class="first">新しい値が適用されたとき、属性がロードされなかったとき、または新しい値が受信されたときに期限切れになった場合、スカラ属性は以前に設定された値を記録していない可能性があります。たとえ最終的にデータベース値に対して正味の変化がないとしても、ほとんどの場合、SQLAlchemyは、setイベントが発生したときに&amp;quot;old &amp;quot;値を必要としないので、スカラー値のUPDATEが前提であるという前提に基づいて、古い値が存在しなければSQLコールの費用をスキップします通常必要とされ、そうでない場合は防御的なSELECTを発行するよりも平均的に安価です。</p>
<p>属性コンテナの `` active_history``フラグが `` True``にセットされている場合のみ、&amp;quot;old &amp;quot;値はセット時に無条件にフェッチされます。このフラグは、通常、単純な多対1ではない主キー属性およびスカラー・オブジェクト参照に対して設定されます。任意のマップされた列に対してこのフラグを設定するには、：func： <cite>.column_property`で</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>active_history``引数を使用します。</p>
</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.session.Session.is_modified.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.is_modified.params.instance">¶</a> -- 保留中の変更をテストするためにマップされたインスタンス。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.is_modified.params.include_collections"></span><strong>include_collections</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.is_modified.params.include_collections">¶</a> -- 操作に複数値のコレクションを含めるかどうかを示します。これを `` False``にセットするのは、フラッシュ時にこのインスタンスのUPDATEをもたらすローカル列ベースのプロパティ（スカラーカラムまたは多対1の外部キー）だけを検出する方法です。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.is_modified.params.passive"></span><strong>passive</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.is_modified.params.passive">¶</a> -- <div class="versionchanged">
<p><span class="versionmodified">バージョン 0.8 で変更: </span>下位互換性のために無視されます。 SQLAlchemy 0.7以前を使用する場合、このフラグは常に &amp;quot;True&amp;quot;に設定する必要があります。</p>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.merge">
<code class="descname">merge</code><span class="sig-paren">(</span><em>instance</em>, <em>load=True</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.merge" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定されたインスタンスの状態をthis：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`内の対応するインスタンスにコピーします。</p>
<p>：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.merge`は、ソースインスタンスの主キー属性を調べ、それをセッション内の同じ主キーのインスタンスと照合しようとします。ローカルに見つからない場合は、主キーに基づいてデータベースからオブジェクトをロードしようとします。存在しない場合は、新しいインスタンスを作成します。次に、ソースインスタンスの各属性の状態がターゲットインスタンスにコピーされます。結果のターゲットインスタンスは、メソッドによって返されます。元のソースインスタンスは変更されず、：class： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Session`と関連付けられていません。</p>
<p>アソシエーションが `` cascade = &amp;quot;merge &amp;quot; <a href="#id1"><span class="problematic" id="id2">``</span></a>でマップされている場合、この操作は関連するインスタンスにカスケードします。</p>
<p>マージの詳細については、ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>unitofwork_merging`を参照してください。</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.1 で変更: </span>- <a class="reference internal" href="#sqlalchemy.orm.session.Session.merge" title="sqlalchemy.orm.session.Session.merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.merge()</span></code></a> will now reconcile
pending objects with overlapping primary keys in the same way
as persistent.  See <a class="reference internal" href="../changelog/migration_11.html#change-3601"><span class="std std-ref">Session.merge resolves pending conflicts the same as persistent</span></a> for discussion.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.session.Session.merge.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.merge.params.instance">¶</a> -- マージするインスタンス。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.merge.params.load"></span><strong>load</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.merge.params.load">¶</a> -- ブール、Falseの場合、：meth： <cite>.merge`は&amp;quot;高性能&amp;quot;モードに切り替わり、すべてのデータベースアクセスだけでなく、履歴イベントも排出しません。このフラグは、オブジェクトのグラフを第2レベルのキャッシュから：class： `.Session`に転送する場合や、ワーカースレッドまたはプロセスが所有する：class：</cite> .Session`にジャストロードされたオブジェクトを転送する場合などに使用されますデータベースに再クエリする必要はありません。 `` load = False``ユースケースは、指定されたオブジェクトが&amp;quot;クリーン&amp;quot;状態でなければならない警告を追加します。つまり、着信オブジェクトがanyから切り離されていても、クラス： <cite>.Session</cite>。これは、マージ操作でローカル属性とカスケードが関連するオブジェクトやコレクションに移入されたときに、ヒストリやアトリビュートイベントを生成せずに、その値をそのまま「スタンプする」ことができます。既存の関連オブジェクトまたはロードされていないコレクションを含む受信データ`` load = False``から得られるオブジェクトは常に&amp;quot;clean &amp;quot;として生成されるので、指定されたオブジェクトも&amp;quot;clean &amp;quot;でなければならないのは妥当です。そうしないと、メソッドの誤った使い方が示唆されます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：func： <cite>.make_transient_to_detached</cite>  - 一つのオブジェクトを：class：` .Session`に &amp;quot;マージする&amp;quot;手段を提供します。</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy.orm.session.Session.new">
<code class="descname">new</code><a class="headerlink" href="#sqlalchemy.orm.session.Session.new" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>この `` Session``内で &amp;#39;new&amp;#39;とマークされた全てのインスタンスの集合。</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy.orm.session.Session.no_autoflush">
<code class="descname">no_autoflush</code><a class="headerlink" href="#sqlalchemy.orm.session.Session.no_autoflush" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>autoflushを無効にするコンテキストマネージャを返します。</p>
<p>例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">no_autoflush</span><span class="p">:</span>

    <span class="n">some_object</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_object</span><span class="p">)</span>
    <span class="c1"># won&#39;t autoflush</span>
    <span class="n">some_object</span><span class="o">.</span><span class="n">related_thing</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">SomeRelated</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span></pre></div>
</div>
<p>`` with： <a href="#id1"><span class="problematic" id="id2">``</span></a>ブロック内で実行される操作は、クエリアクセス時にフラッシュが発生することはありません。これは、未完了のオブジェクトをまだフラッシュしてはいけない既存のデータベースクエリを含む一連のオブジェクトを初期化する場合に便利です。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.7.6 で追加.</span></p>
</div>
</dd></dl>

<dl class="classmethod">
<dt id="sqlalchemy.orm.session.Session.object_session">
<em class="property">classmethod </em><code class="descname">object_session</code><span class="sig-paren">(</span><em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.object_session" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="inherited-member docutils container">
<em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">object_session()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">_SessionClassMethods</span></code></div>
<p>オブジェクトが属する：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`を返します。</p>
<p>これは：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.object_session`のエイリアスです。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.prepare">
<code class="descname">prepare</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.prepare" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>2フェーズコミットの進行中の現在のトランザクションを準備します。</p>
<p>進行中のトランザクションがない場合、このメソッドは：exc： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜sqlalchemy.exc.InvalidRequestError`を送出します。</p>
<p>2つのフェーズセッションのルートトランザクションのみが準備できます。現在のトランザクションがそうでない場合、：exc： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜sqlalchemy.exc.InvalidRequestError`が発生します。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.prune">
<code class="descname">prune</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.prune" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>アイデンティティマップにキャッシュされている参照されていないインスタンスを削除します。</p>
<div class="deprecated">
<p><span class="versionmodified">バージョン 0.7 で撤廃: </span>非弱参照アイデンティティマップ機能はもはや必要ではありません。</p>
</div>
<p>このメソッドは、&amp;quot;weak_identity_map &amp;quot;がFalseに設定されている場合にのみ意味があることに注意してください。デフォルトの弱いアイデンティティマップは自己刈り込みです。</p>
<p>このセッションのアイデンティティマップ内で、ユーザーコードで参照されていないオブジェクト、変更されたオブジェクト、新しいオブジェクト、またはスケジュールされたオブジェクトを削除します。整理されたオブジェクトの数を返します。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.query">
<code class="descname">query</code><span class="sig-paren">(</span><em>*entities</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.query" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>this：class： <cite>.Session`に対応する新しい：class：</cite> .Query`オブジェクトを返します。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.refresh">
<code class="descname">refresh</code><span class="sig-paren">(</span><em>instance</em>, <em>attribute_names=None</em>, <em>with_for_update=None</em>, <em>lockmode=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.refresh" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定されたインスタンスの属性を期限切れにして更新します。</p>
<p>クエリがデータベースに発行され、すべての属性が現在のデータベース値でリフレッシュされます。</p>
<p>遅延ロードされたリレーショナル属性は遅延ロードされたままになるため、インスタンス全体のリフレッシュ操作の直後にその属性の遅延ロードが続きます。</p>
<p>積極的にロードされたリレーショナル属性は、単一のリフレッシュ操作内に熱心に読み込まれます。</p>
<p>高度に分離されたトランザクションは、トランザクション外のデータベース状態の変化に関係なく、同じトランザクションで以前に読み込まれたものと同じ値を返すことに注意してください。 -  meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜Session.refresh`の使用法は通常、ORM以外のSQLステートメントは、進行中のトランザクションで、または自動コミット・モードがオンになっている場合に出されました。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.session.Session.refresh.params.attribute_names"></span><strong>attribute_names</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.refresh.params.attribute_names">¶</a> -- オプション。リフレッシュされる属性のサブセットを示す文字列属性名の反復可能なコレクション。</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.refresh.params.with_for_update"></span><strong>with_for_update</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.refresh.params.with_for_update">¶</a> -- FOR UPDATEを使用する必要があるオプションのブール値「True」が使用されるか、SELECTのより特定のFOR UPDATEフラグのセットを示すフラグを含むディクショナリです。フラグは：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Query.with_for_update`のパラメータと一致する必要があります。 paramref： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Session.refresh.lockmode`パラメータを置き換えます。 .. versionadded :: 1.2</li>
<li><span class="target" id="sqlalchemy.orm.session.Session.refresh.params.lockmode"></span><strong>lockmode</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.session.Session.refresh.params.lockmode">¶</a> -- ：meth： <cite>〜sqlalchemy.orm.query.Query.with_lockmode`で使われている：class：</cite>〜sqlalchemy.orm.query.Query`に渡されました。パラメタ： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.refresh.with_for_update`によって置き換えられました。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：ref： <cite>session_expire</cite>  - 入門資料</p>
<p>：meth： <cite>。Session.expire</cite></p>
<p class="last">：meth： <cite>.Session.expire_all</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.rollback">
<code class="descname">rollback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.rollback" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>進行中の現在のトランザクションをロールバックします。</p>
<p>進行中のトランザクションがない場合、このメソッドはパススルーです。</p>
<p>このメソッドは、サブトランザクションが有効であるかどうかに関係なく、現在のトランザクションまたはネストされたトランザクションをロールバックします。最初の実トランザクションまでのすべてのサブトランザクションはクローズされます。サブトランザクションは：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.begin`が複数回呼び出されたときに発生します。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>session_rollback</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.session.Session.scalar">
<code class="descname">scalar</code><span class="sig-paren">(</span><em>clause</em>, <em>params=None</em>, <em>mapper=None</em>, <em>bind=None</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.Session.scalar" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>like：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜。Session.execute`しかし、スカラー結果を返します。</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy.orm.session.Session.transaction">
<code class="descname">transaction</code><em class="property"> = None</em><a class="headerlink" href="#sqlalchemy.orm.session.Session.transaction" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>現在のアクティブまたは非アクティブ：class： <cite>.SessionTransaction</cite>。</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sqlalchemy.orm.session.SessionTransaction">
<em class="property">class </em><code class="descclassname">sqlalchemy.orm.session.</code><code class="descname">SessionTransaction</code><span class="sig-paren">(</span><em>session</em>, <em>parent=None</em>, <em>nested=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.SessionTransaction" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`レベルのトランザクションです。</p>
<p>：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.SessionTransaction`は、通常はアプリケーションコードによって直接参照されない背後のオブジェクトです。これはmultiple：class： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Connection`オブジェクト間で調整し、それぞれ個別にデータベーストランザクションを維持し、一度にコミットまたはロールバックします。また、この調整操作を補うことができるオプションの2フェーズコミット動作も提供します。</p>
<p>：class： <cite>.Session`の：attr：</cite> .Session.transaction`属性は、現在使用中のclass： <cite>.SessionTransaction`オブジェクトを参照しています。 ：attr： `.SessionTransaction.parent`属性は：class：</cite> .SessionTransaction`オブジェクトのスタック内の親：class： <cite>.SessionTransaction`を参照します。この属性が `</cite> None``の場合、これはスタックの先頭です。 `` None``でなければ、これは：class： <cite>.SessionTransaction`は、いわゆる&amp;quot;サブトランザクション &amp;quot;または&amp;quot;ネストされた &amp;quot;トランザクションを指します。 &amp;quot;サブトランザクション&amp;quot;は、一番外側の&amp;quot;実&amp;quot;トランザクションの内側部分を区切るスコープの概念です。ネストされたトランザクションは、：attr： `.SessionTransaction.nested`属性がTrueの場合に表示され、これは：class：</cite> .SessionTransaction`がSAVEPOINTに対応することを示します。</p>
<p><strong>ライフサイクル</strong></p>
<p>A：class： <cite>.SessionTransaction`は、デフォルトで</cite> <cite>autocommit = False``のデフォルトモードでclass：</cite> .Session`に直ちに関連付けられます。 ：class： <cite>.Session`は、さまざまな：class：</cite> .Engine`または：class： <cite>.Connection`オブジェクトに代わってSQLを発行するために呼び出されます：対応する：class：</cite> .Connection`およびassociated：class： <cite>.Transaction`は：class：</cite> .SessionTransaction`オブジェクト内のコレクションに追加され、：class： <cite>.SessionTransaction`によって維持される接続/トランザクションのペアの1つになります。 a：class： `.SessionTransaction`の開始点は：meth：</cite> .SessionEvents.after_transaction_create`イベントを使って追跡できます。</p>
<p>：class： <cite>.SessionTransaction`の有効期間は、：meth：</cite> .Session.commit`、：meth： <cite>.Session.rollback`または：meth：</cite> .Session.close`メソッドが呼び出されたときに終了します。この時点で、：class： <cite>.SessionTransaction`は親：class：</cite> .Session`との関連付けを解除します。 A：class： `` autocommit = False``モードの `` Session .``は <cite>：</cite> .SessionTransaction`という新しいクラスを作成して直ちに置き換えますが、 <cite>：autosommit = True： `モードは、：meth：</cite> .Session.begin`メソッドが呼び出されるまで、：class： <cite>.SessionTransaction`なしで残ります。 a：class： `.SessionTransaction`の終わりは：meth：</cite> .SessionEvents.after_transaction_end`イベントを使って追跡できます。</p>
<p><strong>ネストとサブトランザクション</strong></p>
<p>class： <cite>.SessionTransaction`のもう一つの詳細は、&amp;quot;ネスティング&amp;quot;ができることです。つまり、：meth： `.Session.begin`メソッドは、既存の：class：</cite> .SessionTransaction`が既に存在している間に呼び出すことができ、一時的に親を置き換える新しい：class： <cite>.SessionTransaction`を生成します：class：</cite> .SessionTransaction`。 a：class： <cite>.SessionTransaction`がネストされて生成されると、自身を：attr：</cite> .Session.transaction`属性に割り当て、それに前の：class： <cite>.SessionTransaction`をそれに割り当てます：attr：</cite> .Session.parent`属性です。この振る舞いは事実上スタックになります。attr： <cite>.Session.transaction`はスタックの現在のヘッドを参照し、：attr：</cite> .SessionTransaction.parent`属性はスタックまでトラバーサルを許可します：attr： <cite>.SessionTransaction .parent`はスタックの一番上を示す `</cite> None``です。</p>
<p>クラス： <cite>.SessionTransaction`のスコープが：meth：</cite> .Session.commit`または：meth： <cite>.Session.rollback`で終了すると、親：class：</cite> .SessionTransaction`を：attrに戻します。 ： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session.transaction`属性です。</p>
<p>このスタックの目的は、：meth： <cite>.Session.rollback`や：meth：</cite> .Session.commit`のネストを、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>。Session.begin`のさまざまなフレーバーで呼び出すことです。このネスト動作は、：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Session.begin_nested`がSAVEPOINTトランザクションを発行するために使用され、コードブロックがbegin / rollbackを使用できるようにする、いわゆる&amp;quot;サブトランザクション &amp;quot;を生成するためにも使用されます/コミットシーケンスを含むことができる。 ：meth： <a href="#id5"><span class="problematic" id="id6">`</span></a>.flush`メソッドは、明示的に呼び出されても、autoflush経由で呼び出されても、トランザクションブロック内で動作するかどうかにかかわらず、トランザクションブロック内で動作することを保証したいという点で、&amp;quot;サブトランザクション：class： <a href="#id7"><span class="problematic" id="id8">`</span></a>.Session`は、メソッドが呼び出されるとトランザクションモードになります。</p>
<p>&amp;quot;autoflush &amp;quot;機能内で発生するフラッシュ処理と、：meth： <cite>.Session.flush`メソッドが使用されている場合** **常に**：class：</cite> .SessionTransaction`オブジェクトを作成します。このオブジェクトは：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`が自動コミットモードで、トランザクションが全く存在しない限り、通常はサブトランザクションです。この場合、トランザクションは最も外側のトランザクションです。イベント処理ロジックやその他の検査ロジックは、class： <a href="#id3"><span class="problematic" id="id4">`</span></a>.SessionTransaction`が最も外側のトランザクション、サブトランザクション、または&amp;quot;入れ子&amp;quot;/ SAVEPOINTトランザクションのいずれかを考慮する必要があります。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：meth： <cite>.Session.rollback</cite></p>
<p>：meth： <cite>.Session.commit</cite></p>
<p>：meth： <cite>.Session.begin</cite></p>
<p>：meth： <cite>.Session.begin_nested</cite></p>
<p>：attr： <cite>.Session.is_active</cite></p>
<p>：meth： <cite>.SessionEvents.after_transaction_create</cite></p>
<p>：meth： <cite>.SessionEvents.after_transaction_end</cite></p>
<p>：meth： <cite>.SessionEvents.after_commit</cite></p>
<p>：meth： <cite>.SessionEvents.after_rollback</cite></p>
<p class="last">：meth： <cite>.SessionEvents.after_soft_rollback</cite></p>
</div>
<dl class="attribute">
<dt id="sqlalchemy.orm.session.SessionTransaction.nested">
<code class="descname">nested</code><em class="property"> = False</em><a class="headerlink" href="#sqlalchemy.orm.session.SessionTransaction.nested" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>これがネストされたトランザクションかSAVEPOINTトランザクションかを示します。</p>
<p>：attr： <cite>.SessionTransaction.nested`がTrueの場合、attr：</cite> .SessionTransaction.parent`もTrueになります。</p>
</dd></dl>

<dl class="attribute">
<dt id="sqlalchemy.orm.session.SessionTransaction.parent">
<code class="descname">parent</code><a class="headerlink" href="#sqlalchemy.orm.session.SessionTransaction.parent" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このクラスの親クラス：class： <cite>.SessionTransaction</cite>：class：` .SessionTransaction`。</p>
<p>この属性が `` None``の場合、class： <cite>.SessionTransaction`はスタックの先頭にあり、実際の&amp;quot; COMMIT &amp;quot;/ &amp;quot; ROLLBACK &amp;quot;ブロックに対応します。 `</cite> None``以外の場合、これは&amp;quot;サブトランザクション&amp;quot;または&amp;quot;ネスト&amp;quot; / SAVEPOINTトランザクションです。 ：attr： <cite>.SessionTransaction.nested`属性が</cite> <cite>True``であればSAVEPOINTであり、</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>False``ならばこれがサブトランザクションであることを示します。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.0.16 で追加: </span>- use ._parent for previous versions</p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="session-utilities">
<h2>セッションユーティリティ<a class="headerlink" href="#session-utilities" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="function">
<dt id="sqlalchemy.orm.session.make_transient">
<code class="descclassname">sqlalchemy.orm.session.</code><code class="descname">make_transient</code><span class="sig-paren">(</span><em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.make_transient" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定されたインスタンスの状態を、term： <a href="#id1"><span class="problematic" id="id2">`</span></a>transient`に変更します。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.make_transient`は高度なユースケースのための特別なケースの関数です。</p>
</div>
<p>与えられたマップされたインスタンスは、：term： <cite>persistent`または：term：</cite> detached`状態にあるとみなされます。この関数は：class： <cite>.Session`とその：attr：</cite> .InstanceState.identity`との関連付けを削除します。その効果は、コール時にロードされた属性/コレクション値を保持する以外は、オブジェクトが新しく構築されたかのように動作することです。 ：attr： <cite>.InstanceState.deleted`フラグは：meth：</cite> .Session.delete`を使った結果、このオブジェクトが削除された場合にもリセットされます。</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p>：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.make_transient`は、** &amp;#39;expire &amp;#39;をしません。そうでなければ、関数呼び出し時に現在ロードされていないORMマップされた属性を熱心に読み込みます。これには、次の属性が含まれます。</p>
<ul class="simple">
<li>via：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>。Session.expire`で期限切れになりました</li>
<li>セッショントランザクションをコミットするという自然な効果として期限切れになりました。例えば：meth： <cite>.Session.commit</cite></li>
<li>通常は：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>lazy loaded`ですが、現在ロードされていません</li>
<li>：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>deferred`を介して&amp;quot;遅延 &amp;quot;されており、まだ読み込まれていません</li>
<li>結合された表の継承および他のシナリオで一般的なものなど、このオブジェクトをロードした問合せには存在しませんでした。</li>
</ul>
<p class="last">後：func： <cite>.make_transient`が呼び出されると、上記のようなアンロードされた属性は通常、アクセス時には</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>None``値に、またはコレクション指向属性の空のコレクションに解決されます。オブジェクトは一時的なものでデータベースIDとの関連付けが解除されているため、これらの値は取得されません。</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：func： <cite>.make_transient_to_detached</cite></p>
</div>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.orm.session.make_transient_to_detached">
<code class="descclassname">sqlalchemy.orm.session.</code><code class="descname">make_transient_to_detached</code><span class="sig-paren">(</span><em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.make_transient_to_detached" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定された一時インスタンスを作成する：term： <cite>detached</cite>。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.make_transient_to_detached`は高度なユースケースのための特別なケースの関数です。</p>
</div>
<p>指定されたインスタンスのすべての属性履歴は、インスタンスがクエリから新しく読み込まれたかのようにリセットされます。不足している属性は期限切れとマークされます。必要なオブジェクトの主キー属性は、インスタンスの&amp;quot;キー&amp;quot;に作成されます。</p>
<p>オブジェクトをセッションに追加するか、またはload = Falseフラグを使用してマージすることができます。この時点で、SQLを出力せずにロードされたように見えます。</p>
<p>これは特別なユースケース関数で、通常の：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>。Session.merge`の呼び出しとは異なり、SQL呼び出しを行わずに永続状態を作成することができます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.9.5 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：func： <cite>.make_transient</cite></p>
<p class="last">：meth： <cite>.Session.enable_relationship_loading</cite></p>
</div>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.orm.session.object_session">
<code class="descclassname">sqlalchemy.orm.session.</code><code class="descname">object_session</code><span class="sig-paren">(</span><em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.session.object_session" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定されたインスタンスが属する：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Session`を返します。</p>
<p>これは基本的に：attr： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState.session`アクセサと同じです。詳細については、その属性を参照してください。</p>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.orm.util.was_deleted">
<code class="descclassname">sqlalchemy.orm.util.</code><code class="descname">was_deleted</code><span class="sig-paren">(</span><em>object</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.util.was_deleted" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定されたオブジェクトがセッションフラッシュ内で削除された場合はTrueを返します。</p>
<p>これは、オブジェクトが永続的であるかデタッチされているかにかかわらずです。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.8.0 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：attr： <cite>.InstanceState.was_deleted</cite></p>
</div>
</dd></dl>

</div>
<div class="section" id="attribute-and-state-management-utilities">
<h2>属性および状態管理ユーティリティ<a class="headerlink" href="#attribute-and-state-management-utilities" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>これらの関数はSQLAlchemy属性計装APIによって提供され、インスタンス、属性値、および履歴を処理するための詳細なインターフェイスを提供します。それらのうちのいくつかは、：doc： <a href="#id1"><span class="problematic" id="id2">`</span></a>/ orm / events`に記述されているようなイベントリスナー関数を構築するときに便利です。</p>
<dl class="function">
<dt id="sqlalchemy.orm.util.object_state">
<code class="descclassname">sqlalchemy.orm.util.</code><code class="descname">object_state</code><span class="sig-paren">(</span><em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.util.object_state" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>オブジェクトがあれば、オブジェクトに関連付けられた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`を返します。</p>
<p>マッピングが設定されていない場合は、class： <a href="#id1"><span class="problematic" id="id2">`</span></a>sqlalchemy.orm.exc.UnmappedInstanceError`を送出します。</p>
<p>同等の機能は、：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.inspect`関数として利用できます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inspect</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span></pre></div>
</div>
<p>インスペクションシステムを使用すると、インスタンスがマッピングの一部でない場合、class： <a href="#id1"><span class="problematic" id="id2">`</span></a>sqlalchemy.exc.NoInspectionAvailable`が生成されます。</p>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.orm.attributes.del_attribute">
<code class="descclassname">sqlalchemy.orm.attributes.</code><code class="descname">del_attribute</code><span class="sig-paren">(</span><em>instance</em>, <em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.del_attribute" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>属性の値を削除し、履歴イベントを発生させます。</p>
<p>この関数は、クラスに直接適用された計装にかかわらず使用することができます。つまり、記述子は必要ありません。カスタム属性管理スキームは、SQLAlchemyが理解するように属性状態を確立するためにこのメソッドを使用する必要があります。</p>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.orm.attributes.get_attribute">
<code class="descclassname">sqlalchemy.orm.attributes.</code><code class="descname">get_attribute</code><span class="sig-paren">(</span><em>instance</em>, <em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.get_attribute" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>アトリビュートの値を取得し、必要なコールバックをすべて発生させます。</p>
<p>この関数は、クラスに直接適用された計装にかかわらず使用することができます。つまり、記述子は必要ありません。カスタム属性管理スキームは、SQLAlchemyが理解するように属性状態を使用するためにこのメソッドを使用する必要があります。</p>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.orm.attributes.get_history">
<code class="descclassname">sqlalchemy.orm.attributes.</code><code class="descname">get_history</code><span class="sig-paren">(</span><em>obj</em>, <em>key</em>, <em>passive=symbol('PASSIVE_OFF')</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.get_history" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>与えられたオブジェクトと属性キーのa：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.History`レコードを返します。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.attributes.get_history.params.obj"></span><strong>obj</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.get_history.params.obj">¶</a> -- 属性パッケージによってクラスが実装されているオブジェクト</li>
<li><span class="target" id="sqlalchemy.orm.attributes.get_history.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.get_history.params.key">¶</a> -- 文字列属性名。</li>
<li><span class="target" id="sqlalchemy.orm.attributes.get_history.params.passive"></span><strong>passive</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.get_history.params.passive">¶</a> -- 値がまだ存在しない場合、属性の読み込み動作を示します。これはビットフラグ属性です。デフォルトでは：attr： <a href="#id1"><span class="problematic" id="id2">`</span></a>.PASSIVE_OFF`というシンボルがあり、必要なすべてのSQLを発行する必要があることを示します。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.orm.attributes.init_collection">
<code class="descclassname">sqlalchemy.orm.attributes.</code><code class="descname">init_collection</code><span class="sig-paren">(</span><em>obj</em>, <em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.init_collection" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>コレクション属性を初期化し、コレクションアダプターを返します。</p>
<p>この関数は、以前にアンロードされた属性のコレクション内部への直接アクセスを提供するために使用されます。例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">collection_adapter</span> <span class="o">=</span> <span class="n">init_collection</span><span class="p">(</span><span class="n">someobject</span><span class="p">,</span> <span class="s1">&#39;elements&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
    <span class="n">collection_adapter</span><span class="o">.</span><span class="n">append_without_event</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span></pre></div>
</div>
<p>上記を簡単に行う方法は、func： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜sqlalchemy.orm.attributes.set_committed_value`を参照してください。</p>
<p>objはインストゥルメントされたオブジェクトインスタンスです。 InstanceStateは下位互換性のために直接受け入れられますが、この使用法は推奨されていません。</p>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.orm.attributes.flag_modified">
<code class="descclassname">sqlalchemy.orm.attributes.</code><code class="descname">flag_modified</code><span class="sig-paren">(</span><em>instance</em>, <em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.flag_modified" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>インスタンスの属性を「変更済み」としてマークします。</p>
<p>これは、インスタンスに対して &amp;#39;modified&amp;#39;フラグを設定し、指定された属性に対して無条件変更イベントを確立します。属性には値がなければなりません。それ以外の場合は：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InvalidRequestError`が送出されます。</p>
<p>特定の属性を参照せずにオブジェクトを &amp;quot;ダーティ&amp;quot;にマークして、フラッシュ内にあるとみなすには、：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.attributes.flag_dirty`呼び出しを使用します。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：func： <cite>.attributes.flag_dirty</cite></p>
</div>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.orm.attributes.flag_dirty">
<code class="descclassname">sqlalchemy.orm.attributes.</code><code class="descname">flag_dirty</code><span class="sig-paren">(</span><em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.flag_dirty" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>特定の属性を記述することなく、インスタンスを「ダーティ」としてマークします。</p>
<p>これはオブジェクトが：meth： <cite>.SessionEvents.before_flush`のようなイベントによって傍受のためにフラッシュプロセスを通過することを可能にする特別な操作です。このメソッドでダーティとマークされていても、変更のないオブジェクトのフラッシュ処理では、SQLは送出されません。しかし、a：meth： `.SessionEvents.before_flush`ハンドラーは、：attr：</cite> .Session.dirty`コレクション内のオブジェクトを見ることができ、その上に変更を加えることができます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.2 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：func： <cite>.attributes.flag_modified</cite></p>
</div>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.orm.attributes.instance_state">
<code class="descclassname">sqlalchemy.orm.attributes.</code><code class="descname">instance_state</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.instance_state" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>与えられたマップされたオブジェクトに対して：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.InstanceState`を返します。</p>
<p>この関数は：func： <cite>.object_state`の内部バージョンです。 ：func： `.object_state`および/または：func：</cite> .inspect`関数は、指定されたオブジェクトがマップされていない場合にそれぞれ有益な例外を送出するので、ここでは優先されます。</p>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.orm.instrumentation.is_instrumented">
<code class="descclassname">sqlalchemy.orm.instrumentation.</code><code class="descname">is_instrumented</code><span class="sig-paren">(</span><em>instance</em>, <em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.instrumentation.is_instrumented" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定されたインスタンスの指定された属性が属性パッケージによってインスツルメントされている場合はTrueを返します。</p>
<p>この関数は、クラスに直接適用された計装にかかわらず使用することができます。つまり、記述子は必要ありません。</p>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.orm.attributes.set_attribute">
<code class="descclassname">sqlalchemy.orm.attributes.</code><code class="descname">set_attribute</code><span class="sig-paren">(</span><em>instance</em>, <em>key</em>, <em>value</em>, <em>initiator=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.set_attribute" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>属性の値を設定し、履歴イベントを発生させます。</p>
<p>この関数は、クラスに直接適用された計装にかかわらず使用することができます。つまり、記述子は必要ありません。カスタム属性管理スキームは、SQLAlchemyが理解するように属性状態を確立するためにこのメソッドを使用する必要があります。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.attributes.set_attribute.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.set_attribute.params.instance">¶</a> -- 変更されるオブジェクト</li>
<li><span class="target" id="sqlalchemy.orm.attributes.set_attribute.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.set_attribute.params.key">¶</a> -- 属性の文字列名</li>
<li><span class="target" id="sqlalchemy.orm.attributes.set_attribute.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.set_attribute.params.value">¶</a> -- 割り当てる値</li>
<li><span class="target" id="sqlalchemy.orm.attributes.set_attribute.params.initiator"></span><strong>initiator</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.set_attribute.params.initiator">¶</a> -- 以前のイベントリスナーから伝播されたclass： <cite>.Event`のインスタンスです。この引数は、：func： `.set_attribute`関数が既存のイベントリスニング関数内で使用されている場合に使用されます。ここで：class：</cite> .Event`オブジェクトが供給されています。オブジェクトを使用して一連のイベントの起点を追跡することができます。 .. versionadded :: 1.2.3</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.orm.attributes.set_committed_value">
<code class="descclassname">sqlalchemy.orm.attributes.</code><code class="descname">set_committed_value</code><span class="sig-paren">(</span><em>instance</em>, <em>key</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.set_committed_value" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>履歴イベントのない属性の値を設定します。</p>
<p>以前の履歴があれば取​​り消します。値は、スカラー保持属性のスカラー値、またはコレクション保持属性の反復可能値でなければなりません。</p>
<p>これは、レイジーローダが起動してデータベースから追​​加のデータをロードするときに使用される同じ基本的な方法です。特に、このメソッドは、追加の属性またはコレクションを別のクエリによってロードしたアプリケーションコードで使用できます。アプリケーションコードは、元のロード済み状態の一部であるかのようにインスタンスにアタッチできます。</p>
</dd></dl>

<dl class="class">
<dt id="sqlalchemy.orm.attributes.History">
<em class="property">class </em><code class="descclassname">sqlalchemy.orm.attributes.</code><code class="descname">History</code><a class="headerlink" href="#sqlalchemy.orm.attributes.History" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy.orm.attributes.History" title="sqlalchemy.orm.attributes.History"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.attributes.History</span></code></a></p>
<p>追加された、変更されていない、削除された値の3タプルで、計測された属性で発生した変更を表します。</p>
<p>オブジェクト上の特定の属性に対して：class： <cite>.History`オブジェクトを取得する最も簡単な方法は、：func：</cite> .inspect`関数を使用することです:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">inspect</span>

<span class="n">hist</span> <span class="o">=</span> <span class="n">inspect</span><span class="p">(</span><span class="n">myobject</span><span class="p">)</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">myattribute</span><span class="o">.</span><span class="n">history</span></pre></div>
</div>
<p>各タプルメンバは反復可能なシーケンスです。</p>
<ul class="simple">
<li>`` added``  - 属性に追加された項目のコレクション（最初のタプル要素）。</li>
<li>`` unchanged``  - 属性（2番目のタプル要素）上で変更されていない項目の集合。</li>
<li>`` deleted``  - 属性から削除されたアイテムのコレクション（3番目のタプル要素）。</li>
</ul>
<dl class="method">
<dt id="sqlalchemy.orm.attributes.History.empty">
<code class="descname">empty</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.History.empty" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Trueを返します。class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.History`には変更がなく、変更されていない状態はありません。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.attributes.History.has_changes">
<code class="descname">has_changes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.History.has_changes" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>次のような場合にTrueを返します：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.History`に変更があります。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.attributes.History.non_added">
<code class="descname">non_added</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.History.non_added" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>変更されていない+コレクションのコレクションを返します。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.attributes.History.non_deleted">
<code class="descname">non_deleted</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.History.non_deleted" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>追加+変更なしのコレクションを返します。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.orm.attributes.History.sum">
<code class="descname">sum</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.History.sum" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>追加された+変更されていない+削除されたコレクションを返します。</p>
</dd></dl>

</dd></dl>

</div>
</div>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="session_events.html" title="previous chapter">イベントによるオブジェクトおよびセッションの変更の追跡</a>
        Next:
        <a href="extending.html" title="next chapter">イベントと内部</a>

    <div id="docs-copyright">
        &copy; <a href="../copyright.html">Copyright</a> 2007-2018, the SQLAlchemy authors and contributors.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.8.1.
    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '1.3.0b1',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../_static/detectmobile.js"></script>
    <script type="text/javascript" src="../_static/init.js"></script>


    </body>
</html>


