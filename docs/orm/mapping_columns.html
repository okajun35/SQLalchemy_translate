<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        
        <title>
            
    
    マッピング表の列
 &mdash;
    SQLAlchemy 1.3 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../_static/changelog.css" type="text/css" />
                <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
        <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="SQLAlchemy 1.3 Documentation" href="../index.html" />
        <link rel="up" title="列と式のマッピング" href="scalar_mapping.html" />
        <link rel="next" title="マップされた属性としてのSQL式" href="mapped_sql_expr.html" />
        <link rel="prev" title="列と式のマッピング" href="scalar_mapping.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">1.3.0b1</span>


        | Release Date: unreleased

    </div>

    <h1>SQLAlchemy 1.3 Documentation</h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">


        <div id="docs-sidebar-popout">
            <h3><a href="../index.html">SQLAlchemy 1.3 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../contents.html">Contents</a> |
                <a href="../genindex.html">Index</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a>
        </h3>

        <ul>
<li><span class="link-container first"><a class="reference external" href="tutorial.html">オブジェクトリレーショナルチュートリアル</a></span></li>
<li><span class="link-container first"><a class="reference external" href="mapper_config.html">マッパー設定</a></span><ul>
<li><span class="link-container first"><a class="reference external" href="mapping_styles.html">マッピングのタイプ</a></span></li>
<li><span class="link-container first"><a class="reference external" href="scalar_mapping.html">列と式のマッピング</a></span><ul>
<li class="selected"><span class="link-container first"><strong>マッピング表の列</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container first"><a class="reference external" href="#naming-columns-distinctly-from-attribute-names">属性名とは異なる名前の列の名前付け</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#automating-column-naming-schemes-from-reflected-tables">リフレクションされたテーブルから列命名スキームを自動化する</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#naming-all-columns-with-a-prefix">接頭辞付きのすべての列に名前を付ける</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#using-column-property-for-column-level-options">カラムレベルオプションにcolumn_propertyを使用する</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#mapping-a-subset-of-table-columns">表の列のサブセットのマッピング</a></span></li>
</ul>
</li>
<li><span class="link-container first"><a class="reference external" href="mapped_sql_expr.html">マップされた属性としてのSQL式</a></span></li>
<li><span class="link-container first"><a class="reference external" href="mapped_attributes.html">属性の動作の変更</a></span></li>
<li><span class="link-container first"><a class="reference external" href="composites.html">コンポジット列の種類</a></span></li>
</ul>
</li>
<li><span class="link-container first"><a class="reference external" href="inheritance.html">クラス継承階層のマッピング</a></span></li>
<li><span class="link-container first"><a class="reference external" href="nonstandard_mappings.html">非伝統的なマッピング</a></span></li>
<li><span class="link-container first"><a class="reference external" href="versioning.html">バージョンカウンタの設定</a></span></li>
<li><span class="link-container first"><a class="reference external" href="mapping_api.html">クラスマッピングAPI</a></span></li>
</ul>
</li>
<li><span class="link-container first"><a class="reference external" href="relationships.html">関係の設定</a></span></li>
<li><span class="link-container first"><a class="reference external" href="loading_objects.html">オブジェクトの読み込み</a></span></li>
<li><span class="link-container first"><a class="reference external" href="session.html">セッションの使用</a></span></li>
<li><span class="link-container first"><a class="reference external" href="extending.html">イベントと内部</a></span></li>
<li><span class="link-container first"><a class="reference external" href="extensions/index.html">ORM拡張</a></span></li>
<li><span class="link-container first"><a class="reference external" href="examples.html">ORMの例</a></span></li>
</ul>



        </div>

        </div>

    </div>

    

    <div id="docs-body" class="withsidebar" >
        
<span class="target" id="module-sqlalchemy.orm"></span><div class="section" id="mapping-table-columns">
<h1>マッピング表の列<a class="headerlink" href="#mapping-table-columns" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>：func： <cite>〜.orm.mapper`のデフォルトの振る舞いは、マップされた：class：</cite> .Table`のすべての列をマップされたオブジェクト属性にアセンブルすることです。それぞれは、列自体の名前に従って指定されます、class： <cite>.Column`の</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>key``属性）を指定します。この動作はいくつかの方法で変更できます。</p>
<div class="section" id="naming-columns-distinctly-from-attribute-names">
<span id="mapper-column-distinct-names"></span><h2>属性名とは異なる名前の列の名前付け<a class="headerlink" href="#naming-columns-distinctly-from-attribute-names" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>デフォルトでは、マップされた属性の名前と同じ名前の：class： <cite>.Column`を共有します：特に：class：</cite> .Column`の：attr： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Column.key`属性に一致します。 ：attr： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Column.name`と同じです。</p>
<p>：class： <cite>.Column`にマップされるPython属性に割り当てられた名前は、attr：</cite> .Column.name`または：attr： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Column.key`と異なる場合があります。宣言的なマッピングをここに示します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;user&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;user_id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;user_name&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span></pre></div>
</div>
<p>上の `` User.id``が `` user_id``という名前のカラムに解決され、 `` User.name``が `` user_name``という名前のカラムに解決されます。</p>
<p>既存のテーブルにマッピングすると、：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Column`オブジェクトを直接参照することができます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__table__</span> <span class="o">=</span> <span class="n">user_table</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_id</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_name</span></pre></div>
</div>
<p>または、古典的なマッピングで、 <a href="#id1"><span class="problematic" id="id2">``</span></a>プロパティ <a href="#id3"><span class="problematic" id="id4">``</span></a>の辞書に目的のキーを置きます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mapper</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">user_table</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
   <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span>
   <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_name</span><span class="p">,</span>
<span class="p">})</span></pre></div>
</div>
<p>次のセクションでは、 `` .key``の使い方をより詳しく調べます。</p>
</div>
<div class="section" id="automating-column-naming-schemes-from-reflected-tables">
<span id="mapper-automated-reflection-schemes"></span><h2>リフレクションされたテーブルから列命名スキームを自動化する<a class="headerlink" href="#automating-column-naming-schemes-from-reflected-tables" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>前のセクション：ref： <cite>mapper_column_distinct_names`では、クラスに明示的にマップされたclass：</cite> .Column`がどのようにしてカラムと異なる属性名を持つことができるかを示しました。しかし、class： <cite>.Column`オブジェクトを明示的にリストアップしておかないと、代わりにリフレクションを使用して：class：</cite> .Table`オブジェクトの生成を自動化しています（例：ref： <cite>metadata_reflection_toplevel</cite>）。この場合、：meth： <cite>.DDLEvents.column_reflect`イベントを使用して：class：</cite> .Column`オブジェクトの生成をインターセプトし、それらに：attr： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Column.key`を指定することができます。 ：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">Table</span><span class="p">,</span> <span class="s2">&quot;column_reflect&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">column_reflect</span><span class="p">(</span><span class="n">inspector</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">column_info</span><span class="p">):</span>
    <span class="c1"># set column.key = &quot;attr_&lt;lower_case_name&gt;&quot;</span>
    <span class="n">column_info</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;attr_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">column_info</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span></pre></div>
</div>
<p>上記のイベントで、：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Column`オブジェクトのリフレクションは、以下のような新しい&amp;quot;。key &amp;quot;要素を追加するイベントでインターセプトされます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__table__</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;some_table&quot;</span><span class="p">,</span> <span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
                <span class="n">autoload</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">autoload_with</span><span class="o">=</span><span class="n">some_engine</span><span class="p">)</span></pre></div>
</div>
<p>上記の特定の：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.MetaData`オブジェクトに対してのみ反応するようにイベントを修飾する場合は、イベントで確認できます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">Table</span><span class="p">,</span> <span class="s2">&quot;column_reflect&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">column_reflect</span><span class="p">(</span><span class="n">inspector</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">column_info</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">table</span><span class="o">.</span><span class="n">metadata</span> <span class="ow">is</span> <span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="p">:</span>
        <span class="c1"># set column.key = &quot;attr_&lt;lower_case_name&gt;&quot;</span>
        <span class="n">column_info</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;attr_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">column_info</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span></pre></div>
</div>
</div>
<div class="section" id="naming-all-columns-with-a-prefix">
<span id="column-prefix"></span><h2>接頭辞付きのすべての列に名前を付ける<a class="headerlink" href="#naming-all-columns-with-a-prefix" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>接頭辞のカラム名への簡単なアプローチは、通常、既存の：class： <cite>.Table`オブジェクトにマッピングするときに、</cite> <cite>column_prefix`</cite></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__table__</span> <span class="o">=</span> <span class="n">user_table</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;column_prefix&#39;</span><span class="p">:</span><span class="s1">&#39;_&#39;</span><span class="p">}</span></pre></div>
</div>
<p>上記では、マッピングされた `` User``クラスに `` _user_id``、 `` _user_name``、 `` _password``などの属性名を置きます。</p>
<p>このアプローチは、現代的な使用法では珍しいことです。反映されたテーブルを扱うには、より柔軟なアプローチは：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>mapper_automated_reflection_schemes`で説明されているものを使用することです。</p>
</div>
<div class="section" id="using-column-property-for-column-level-options">
<h2>カラムレベルオプションにcolumn_propertyを使用する<a class="headerlink" href="#using-column-property-for-column-level-options" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>：func： <cite>.column_property`関数を使って：class：</cite> .Column`をマッピングするときに、オプションを指定することができます。この関数は、：class： <cite>.Column`を追跡するために：func：</cite> .mapper`によって使用される：class： <cite>.ColumnProperty`を明示的に作成します。通常、：func： `.mapper`はこれを自動的に作成します。 ：func： `.column_property`を使用すると、：class：</cite> .Column`をどのようにマッピングするかについての追加の引数を渡すことができます。以下では、 `` active_history``オプションを渡します。このオプションは、このカラムの値を変更すると、前の値が最初に読み込まれるように指定します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="k">import</span> <span class="n">column_property</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;user&#39;</span>

    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">column_property</span><span class="p">(</span><span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">)),</span> <span class="n">active_history</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></pre></div>
</div>
<p>：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.column_property`は、単一の属性を複数の列にマップするためにも使用されます。このユースケースは、互いに等しい属性を持つ：func： <a href="#id3"><span class="problematic" id="id4">`</span></a>〜.expression.join`へのマッピング時に発生します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__table__</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>

    <span class="c1"># assign &quot;user.id&quot;, &quot;address.user_id&quot; to the</span>
    <span class="c1"># &quot;id&quot; attribute</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">column_property</span><span class="p">(</span><span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">address_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_id</span><span class="p">)</span></pre></div>
</div>
<p>この使い方の例をもっと見るには、ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>maptojoin`を参照してください。</p>
<p>func： <cite>.column_property`が必要な別の場所は、SQL式をマップされた属性として指定することです。たとえば、</cite> <cite>firstname``の文字列連結である属性</cite> <cite>fullname``を作成し、 `</cite> columns</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;user&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">firstname</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">lastname</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">fullname</span> <span class="o">=</span> <span class="n">column_property</span><span class="p">(</span><span class="n">firstname</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">lastname</span><span class="p">)</span></pre></div>
</div>
<p>この使用法の例を参照：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>mapper_sql_expressions`を参照してください。</p>
<dl class="function">
<dt id="sqlalchemy.orm.column_property">
<code class="descclassname">sqlalchemy.orm.</code><code class="descname">column_property</code><span class="sig-paren">(</span><em>*columns</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.column_property" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Mapperで使用する列レベルのプロパティを提供します。</p>
<p>カラムベースのプロパティは通常、：class： <cite>.Column`要素を直接使用してマッパーの</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>properties``ディクショナリに適用することができます。指定された列がマッパーの選択可能範囲内に直接存在しない場合は、この関数を使用します。例には、SQL式、関数、およびスカラーSELECTクエリが含まれます。</p>
<p>マッパーの選択肢に存在しない列は、マッパーによって永続化されず、効果的には「読み取り専用」の属性です。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.orm.column_property.params.*cols"></span><strong>*cols</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.*cols">¶</a> -- マップされるColumnオブジェクトのリスト</li>
<li><span class="target" id="sqlalchemy.orm.column_property.params.active_history"></span><strong>active_history=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.active_history">¶</a> -- `` True``のときは、スカラ属性の&amp;quot;previous &amp;quot;値が置換されていなければ読み込まれなければならないことを示します。通常、単純な非主キースカラー値の履歴追跡ロジックは、フラッシュを実行するために&amp;quot;新しい&amp;quot;値を認識する必要があります。このフラグは：func： <cite>.attributes.get_history`または：meth：</cite> .Session.is_modified`を利用するアプリケーションで利用できます。これは属性の&amp;quot;前&amp;quot;値も知る必要があります。 .. versionadded :: 0.6.6</li>
<li><span class="target" id="sqlalchemy.orm.column_property.params.comparator_factory"></span><strong>comparator_factory</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.comparator_factory">¶</a> -- extends：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.ColumnProperty.Comparator`これは比較演算のためのカスタムSQL節生成を提供するクラスです。</li>
<li><span class="target" id="sqlalchemy.orm.column_property.params.group"></span><strong>group</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.group">¶</a> -- このプロパティのグループ名は、遅延としてマークされます。</li>
<li><span class="target" id="sqlalchemy.orm.column_property.params.deferred"></span><strong>deferred</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.deferred">¶</a> -- Trueの場合、列プロパティは&amp;quot;延期&amp;quot;であり、即時にロードされず、インスタンスでその属性が最初にアクセスされたときにロードされることを意味します。 func： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜sqlalchemy.orm.deferred`も参照してください。</li>
<li><span class="target" id="sqlalchemy.orm.column_property.params.doc"></span><strong>doc</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.doc">¶</a> -- クラスバインド記述子のdocとして適用されるオプションの文字列。</li>
<li><span class="target" id="sqlalchemy.orm.column_property.params.expire_on_flush"></span><strong>expire_on_flush=True</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.expire_on_flush">¶</a> -- フラッシュ時に有効期限を無効にする。 SQL式を参照するcolumn_property（）は、単一の表バインド列ではなく、「読み取り専用」プロパティと見なされます。それを移入することはデータの状態には影響を及ぼさず、データベース状態のみを返すことができます。このため、親オブジェクトがフラッシュに関係している（つまり、フラッシュ内に任意の種類の &amp;quot;ダーティー&amp;quot;状態を持つ）たびに、column_property（）の値が期限切れになります。このパラメータを `` False``に設定すると、フラッシュが実行された後に存在する既存の値を残す効果があります。ただし、：class： <cite>.Session`のデフォルトの有効期限設定では、：meth：</cite> .Session.commit`コールの後にすべての属性が失効します。 .. versionadded :: 0.7.3</li>
<li><span class="target" id="sqlalchemy.orm.column_property.params.info"></span><strong>info</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.info">¶</a> -- このオブジェクトの：attr： <a href="#id1"><span class="problematic" id="id2">`</span></a>.MapperProperty.info`属性に読み込まれるオプションのデータ辞書です。 .. versionadded :: 0.8</li>
<li><span class="target" id="sqlalchemy.orm.column_property.params.extension"></span><strong>extension</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.extension">¶</a> -- ：class： <cite>.AttributeExtension`インスタンス、またはクラスに配置された結果の記述子の属性リスナーのリストの前に追加される拡張のリストです。 **推奨されていません。**参照：class： `.AttributeEvents</cite>。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="mapping-a-subset-of-table-columns">
<span id="include-exclude-cols"></span><h2>表の列のサブセットのマッピング<a class="headerlink" href="#mapping-a-subset-of-table-columns" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>ときには、a：class： <cite>.Table`オブジェクトは：ref：</cite> metadata_reflection`に記述されているリフレクションプロセスを使用して利用可能になり、データベースからテーブルの構造をロードします。アプリケーションで参照する必要のないカラムがたくさんあるこのようなテーブルの場合、 `` include_properties``または `` exclude_properties``引数は、カラムのサブセットのみをマッピングするように指定することができます。例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__table__</span> <span class="o">=</span> <span class="n">user_table</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;include_properties&#39;</span> <span class="p">:[</span><span class="s1">&#39;user_id&#39;</span><span class="p">,</span> <span class="s1">&#39;user_name&#39;</span><span class="p">]</span>
    <span class="p">}</span></pre></div>
</div>
<p>... `` User``クラスと `` user_name``カラムのみを含む `` user_table``テーブルに `` User``クラスをマップします - 残りは参照されません。同様に:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Address</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__table__</span> <span class="o">=</span> <span class="n">address_table</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;exclude_properties&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;street&#39;</span><span class="p">,</span> <span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="s1">&#39;state&#39;</span><span class="p">,</span> <span class="s1">&#39;zip&#39;</span><span class="p">]</span>
    <span class="p">}</span></pre></div>
</div>
<p>... `` street``、 `` city``、 `` state``、 `` zip``を除くすべてのカラムを含む `` Address``クラスを `` address_table``テーブルにマップします。</p>
<p>このマッピングを使用すると、含まれていない列は：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Query`によって生成されたSELECT文では参照されず、列を表すマップされたクラスにもマップされた属性はありません。その名前の属性を割り当てることは、通常のPython属性の割り当てよりも効果がありません。</p>
<p>場合によっては、複数の列が同じ名前を持つ場合があります。たとえば、いくつかの列名を共有する複数の表の結合にマッピングする場合などです。 `` include_properties``と `` exclude_properties``は：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Column`オブジェクトを受け入れることもできます。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">UserAddress</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__table__</span> <span class="o">=</span> <span class="n">user_table</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">addresses_table</span><span class="p">)</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;exclude_properties&#39;</span> <span class="p">:[</span><span class="n">address_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">],</span>
        <span class="s1">&#39;primary_key&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
    <span class="p">}</span></pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">class： <cite>.Column`オブジェクト、すなわち：ref：</cite> metadata_defaults`に記述されている、 `` default``、 `` update``、 `` server_default``、 `` <cite>server_onupdate``引数はclass：</cite> .Column`オブジェクトがマッピングされていなくても正常に機能し続けます。これは、 `` default``と `` update``の場合、：class： <cite>.Column`オブジェクトが依然としてclass：</cite> .Table`の下に存在するため、デフォルトの関数が実行されるためですORMがINSERTまたはUPDATEを発行し、 `` server_default``および `` server_onupdate``の場合、リレーショナルデータベース自体がこれらの機能を維持します。</p>
</div>
</div>
</div>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="scalar_mapping.html" title="previous chapter">列と式のマッピング</a>
        Next:
        <a href="mapped_sql_expr.html" title="next chapter">マップされた属性としてのSQL式</a>

    <div id="docs-copyright">
        &copy; <a href="../copyright.html">Copyright</a> 2007-2018, the SQLAlchemy authors and contributors.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.8.1.
    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '1.3.0b1',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../_static/detectmobile.js"></script>
    <script type="text/javascript" src="../_static/init.js"></script>


    </body>
</html>


