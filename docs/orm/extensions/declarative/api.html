<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        
        <title>
            
    
    宣言的API
 &mdash;
    SQLAlchemy 1.3 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../../../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../../../_static/changelog.css" type="text/css" />
                <link rel="stylesheet" href="../../../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
        <link rel="copyright" title="Copyright" href="../../../copyright.html" />
    <link rel="top" title="SQLAlchemy 1.3 Documentation" href="../../../index.html" />
        <link rel="up" title="宣言的" href="index.html" />
        <link rel="next" title="突然変異の追跡" href="../mutable.html" />
        <link rel="prev" title="ミックスインとカスタムベースクラス" href="mixins.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">1.3.0b1</span>


        | Release Date: unreleased

    </div>

    <h1>SQLAlchemy 1.3 Documentation</h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">


        <div id="docs-sidebar-popout">
            <h3><a href="../../../index.html">SQLAlchemy 1.3 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../../../contents.html">Contents</a> |
                <a href="../../../genindex.html">Index</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../../../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="../../index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a>
        </h3>

        <ul>
<li><span class="link-container first"><a class="reference external" href="../../tutorial.html">オブジェクトリレーショナルチュートリアル</a></span></li>
<li><span class="link-container first"><a class="reference external" href="../../mapper_config.html">マッパー設定</a></span></li>
<li><span class="link-container first"><a class="reference external" href="../../relationships.html">関係の設定</a></span></li>
<li><span class="link-container first"><a class="reference external" href="../../loading_objects.html">オブジェクトの読み込み</a></span></li>
<li><span class="link-container first"><a class="reference external" href="../../session.html">セッションの使用</a></span></li>
<li><span class="link-container first"><a class="reference external" href="../../extending.html">イベントと内部</a></span></li>
<li><span class="link-container first"><a class="reference external" href="../index.html">ORM拡張</a></span><ul>
<li><span class="link-container first"><a class="reference external" href="../associationproxy.html">アソシエーションプロキシ</a></span></li>
<li><span class="link-container first"><a class="reference external" href="../automap.html">オートマップ</a></span></li>
<li><span class="link-container first"><a class="reference external" href="../baked.html">焼いたクエリ</a></span></li>
<li><span class="link-container first"><a class="reference external" href="index.html">宣言的</a></span><ul>
<li><span class="link-container first"><a class="reference external" href="basic_use.html">基本的な使用</a></span></li>
<li><span class="link-container first"><a class="reference external" href="relationships.html">関係の設定</a></span></li>
<li><span class="link-container first"><a class="reference external" href="table_config.html">テーブル構成</a></span></li>
<li><span class="link-container first"><a class="reference external" href="inheritance.html">継承の設定</a></span></li>
<li><span class="link-container first"><a class="reference external" href="mixins.html">ミックスインとカスタムベースクラス</a></span></li>
<li class="selected"><span class="link-container first"><strong>宣言的API</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container first"><a class="reference external" href="#api-reference">APIリファレンス</a></span><ul>
<li><span class="link-container first"><a class="reference external" href="#special-directives">特別指示</a></span><ul>
<li><span class="link-container first"><a class="reference external" href="#declare-last">`` __declare_last __（） ``</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#declare-first">`` __declare_first __（） ``</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#abstract">`` __abstract__``</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#table-cls">`` __Table_cls__``</a></span></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container first"><a class="reference external" href="../mutable.html">突然変異の追跡</a></span></li>
<li><span class="link-container first"><a class="reference external" href="../orderinglist.html">オーダーリスト</a></span></li>
<li><span class="link-container first"><a class="reference external" href="../horizontal_shard.html">水平シャーディング</a></span></li>
<li><span class="link-container first"><a class="reference external" href="../hybrid.html">ハイブリッド属性</a></span></li>
<li><span class="link-container first"><a class="reference external" href="../indexable.html">インデックス作成可能</a></span></li>
<li><span class="link-container first"><a class="reference external" href="../instrumentation.html">代替クラスの計装</a></span></li>
</ul>
</li>
<li><span class="link-container first"><a class="reference external" href="../../examples.html">ORMの例</a></span></li>
</ul>



        </div>

        </div>

    </div>

    

    <div id="docs-body" class="withsidebar" >
        
<span class="target" id="module-sqlalchemy.ext.declarative"></span><div class="section" id="declarative-api">
<h1>宣言的API<a class="headerlink" href="#declarative-api" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="section" id="api-reference">
<h2>APIリファレンス<a class="headerlink" href="#api-reference" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="function">
<dt id="sqlalchemy.ext.declarative.declarative_base">
<code class="descclassname">sqlalchemy.ext.declarative.</code><code class="descname">declarative_base</code><span class="sig-paren">(</span><em>bind=None</em>, <em>metadata=None</em>, <em>mapper=None</em>, <em>cls=&lt;class 'object'&gt;</em>, <em>name='Base'</em>, <em>constructor=&lt;function _declarative_constructor&gt;</em>, <em>class_registry=None</em>, <em>metaclass=&lt;class 'sqlalchemy.ext.declarative.api.DeclarativeMeta'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.declarative.declarative_base" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>宣言的なクラス定義のための基本クラスを構築します。</p>
<p>新しい基本クラスには適切な：class： <cite>〜sqlalchemy.schema.Table`オブジェクトを生成するメタクラスが与えられ、クラス内で宣言的に提供される情報に基づいて適切な：func：</cite>〜sqlalchemy.orm.mapper`呼び出しが行われます。クラスのサブクラス。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.ext.declarative.declarative_base.params.bind"></span><strong>bind</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.declarative.declarative_base.params.bind">¶</a> -- オプション：class： <cite>〜sqlalchemy.engine.Connectable`は：class：</cite>〜sqlalchemy.schema.MetaData`インスタンスの `` bind``属性に割り当てられます。</li>
<li><span class="target" id="sqlalchemy.ext.declarative.declarative_base.params.metadata"></span><strong>metadata</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.declarative.declarative_base.params.metadata">¶</a> -- オプション：class： <cite>〜sqlalchemy.schema.MetaData`インスタンスです。 All：class： `〜sqlalchemy.schema.Table`オブジェクトは、ベースのサブクラスによって暗黙に宣言され、このMetaDataを共有します。何も提供されない場合、MetaDataインスタンスが作成されます。 ：class： `〜sqlalchemy.schema.MetaData`インスタンスは、生成された宣言基本クラスの</cite> metadata`属性を介して利用可能になります。</li>
<li><span class="target" id="sqlalchemy.ext.declarative.declarative_base.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.declarative.declarative_base.params.mapper">¶</a> -- オプションの呼び出し可能なデフォルトは：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜sqlalchemy.orm.mapper`です。サブクラスをテーブルにマップするために使用されます。</li>
<li><span class="target" id="sqlalchemy.ext.declarative.declarative_base.params.cls"></span><strong>cls</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.declarative.declarative_base.params.cls">¶</a> -- デフォルトは：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>object`です。生成された宣言基本クラスのベースとして使用する型。クラスまたはクラスのタプルである可能性があります。</li>
<li><span class="target" id="sqlalchemy.ext.declarative.declarative_base.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.declarative.declarative_base.params.name">¶</a> -- デフォルトは `` Base``です。生成されたクラスの表示名。これをカスタマイズする必要はありませんが、トレースバックとデバッグの明快さを向上させることができます。</li>
<li><span class="target" id="sqlalchemy.ext.declarative.declarative_base.params.constructor"></span><strong>constructor</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.declarative.declarative_base.params.constructor">¶</a> -- 既定値は：func： <cite>〜sqlalchemy.ext.declarative.base._declarative_constructor`で、宣言されたフィールドとインスタンスに対する関係に** kwargsを割り当てる__init__実装です。 `</cite> None``が与えられていれば、__init__は提供されず、通常のPythonのセマンティクスによって構築がcls .__ init__に戻ります。</li>
<li><span class="target" id="sqlalchemy.ext.declarative.declarative_base.params.class_registry"></span><strong>class_registry</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.declarative.declarative_base.params.class_registry">¶</a> -- func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.relationship`などのクラス内でクラスを識別するために文字列名が使用されたときに、クラス名のレジストリとして機能するオプションの辞書です。 2つ以上の宣言ベースクラスが、簡単なベース間の関係のためにクラス名の同じレジストリを共有できるようにします。</li>
<li><span class="target" id="sqlalchemy.ext.declarative.declarative_base.params.metaclass"></span><strong>metaclass</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.declarative.declarative_base.params.metaclass">¶</a> -- デフォルトは：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.DeclarativeMeta`です。生成された宣言基本クラスのメタタイプとして使用するメタクラスまたは__metaclass__互換の呼び出し可能クラス。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.1 で変更: </span>：paramref： <a href="#id1"><span class="problematic" id="id2">`</span></a>.declarative_base.cls`が（タプルではなく）単一のクラスである場合、構築された基本クラスはそのdocstringを継承します。</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：func： <cite>.as_declarative</cite></p>
</div>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.ext.declarative.as_declarative">
<code class="descclassname">sqlalchemy.ext.declarative.</code><code class="descname">as_declarative</code><span class="sig-paren">(</span><em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.declarative.as_declarative" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>クラスデコレータfor：func： <cite>.declarative_base</cite>。</p>
<p>：func： <cite>.declarative_base`に送られる</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>cls``引数への構文上のショートカットを提供し、ベースクラスをインプレースで&amp;quot;宣言的な &amp;quot;ベースに変換できるようにします:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="k">import</span> <span class="n">as_declarative</span>

<span class="nd">@as_declarative</span><span class="p">()</span>
<span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">__tablename__</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MyMappedClass</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="c1"># ...</span></pre></div>
</div>
<p>：func： <cite>.as_declarative`に渡されるすべてのキーワード引数は：func：</cite> .declarative_base`に渡されます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.8.3 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：func： <cite>.declarative_base</cite></p>
</div>
</dd></dl>

<dl class="class">
<dt id="sqlalchemy.ext.declarative.declared_attr">
<em class="property">class </em><code class="descclassname">sqlalchemy.ext.declarative.</code><code class="descname">declared_attr</code><span class="sig-paren">(</span><em>fget</em>, <em>cascading=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.declarative.declared_attr" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.base._MappedAttribute</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">builtins.property</span></code></p>
<p>クラスレベルのメソッドを、マップされたプロパティまたは特別な宣言的メンバー名の定義を表すものとしてマークします。</p>
<p>&#64;declared_attrは、属性をインスタンス化されていないクラスから呼び出せるスカラー型のプロパティに変換します。 Declarativeは&#64;declared_attrで特にマークされた属性を、マッピングまたは宣言的な表の構成に固有の構造体を返すものとして扱います。属性の名前は、属性の非動的バージョンの名前です。</p>
<p>&#64;declared_attrは、ミックスインには適用できない場合が多く、クラスの異なる実装者に適用されるリレーションシップを定義します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ProvidesUser</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="s2">&quot;A mixin that adds a &#39;user&#39; relationship to classes.&quot;</span>

    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;User&quot;</span><span class="p">)</span></pre></div>
</div>
<p>また、継承のための&amp;quot;polymorphic &amp;quot;スキームを提供するなど、マップされたクラスにも適用できます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Employee</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">__tablename__</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">__mapper_args__</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;Employee&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                    <span class="s2">&quot;polymorphic_on&quot;</span><span class="p">:</span><span class="bp">cls</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
                    <span class="s2">&quot;polymorphic_identity&quot;</span><span class="p">:</span><span class="s2">&quot;Employee&quot;</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;polymorphic_identity&quot;</span><span class="p">:</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">}</span></pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 0.8 で変更: </span>：class： <cite>.declared_attr`は、ユーザ定義の属性や：func：</cite> .association_proxy`オブジェクトのような非ORM属性や拡張属性で使用できます。これらのオブジェクトは、クラス構築時にクラスに割り当てられます。</p>
</div>
<dl class="attribute">
<dt id="sqlalchemy.ext.declarative.declared_attr.cascading">
<code class="descname">cascading</code><a class="headerlink" href="#sqlalchemy.ext.declarative.declared_attr.cascading" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>a：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.declared_attr`をカスケードとしてマークしてください。</p>
<p>これは、マップされた継承シナリオ内で、マッピングされたサブクラスごとに列またはMapperPropertyベースの宣言された属性を明示的に構成する必要があることを示す特別な使用の修飾子です。</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p>：attr： <a href="#id1"><span class="problematic" id="id2">`</span></a>.declared_attr.cascading`修飾子にはいくつかの制限があります：</p>
<ul class="last simple">
<li>フラグ** only <a href="#id1"><span class="problematic" id="id2">**</span></a>は、宣言的なmixinクラスと `` __abstract__``クラスのclass： <a href="#id3"><span class="problematic" id="id4">`</span></a>.declared_attr`の使用に適用されます。マップされたクラスで直接使用されても効果はありません。</li>
<li>フラグ**のみ**は通常の名前の属性に適用されます。たとえば、 `` __tablename__`のような特殊なアンダースコア属性はありません。これらの属性には、** no <a href="#id1"><span class="problematic" id="id2">**</span></a>効果があります。</li>
<li>現在のところ、このフラグは、クラス階層をさらに上書きすることはできません**。サブクラスが属性をオーバーライドしようとすると、警告が発行され、オーバーライドされた属性はスキップされます。これは、ある時点で解決されることが期待される制限です。</li>
</ul>
</div>
<p>以下、MyClassとMySubClassの両方に別個の `` id`` Columnオブジェクトが設定されます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">HasIdMixin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="nd">@declared_attr</span><span class="o">.</span><span class="n">cascading</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">has_inherited_table</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;myclass.id&#39;</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">HasIdMixin</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;myclass&#39;</span>
    <span class="c1"># ...</span>

<span class="k">class</span> <span class="nc">MySubClass</span><span class="p">(</span><span class="n">MyClass</span><span class="p">):</span>
    <span class="s2">&quot;&quot;</span>
    <span class="c1"># ...</span></pre></div>
</div>
<p>上記の設定の動作は、 `` MySubClass``は、 `` some_id``という属性の下にある `` MyClass``のものだけでなく、 `` id``カラムも参照することになります。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：ref： <cite>declarative_inheritance</cite></p>
<p class="last">：ref： <cite>mixin_inheritance_columns</cite></p>
</div>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="sqlalchemy.ext.declarative.api._declarative_constructor">
<code class="descclassname">sqlalchemy.ext.declarative.api.</code><code class="descname">_declarative_constructor</code><span class="sig-paren">(</span><em>self</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.declarative.api._declarative_constructor" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>kwargsからの初期化を可能にする単純なコンストラクタです。</p>
<p>`` kwargs``の名前と値を使って構築されたインスタンスの属性を設定します。</p>
<p>インスタンスのクラスの属性として存在するキーのみが許可されます。これらは、例えば、マップされた列または関係とすることができる。</p>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.ext.declarative.has_inherited_table">
<code class="descclassname">sqlalchemy.ext.declarative.</code><code class="descname">has_inherited_table</code><span class="sig-paren">(</span><em>cls</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.declarative.has_inherited_table" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>与えられたクラスがあれば、それが継承するクラスのいずれかにマップされたテーブルがある場合はTrueを返し、そうでない場合はFalseを返します。</p>
<p>これは、宣言的なミックスインで、継承階層のサブクラスと基本クラスの動作が異なる属性を構築するために使用されます。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>decl_mixin_inheritance</cite></p>
</div>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.ext.declarative.synonym_for">
<code class="descclassname">sqlalchemy.ext.declarative.</code><code class="descname">synonym_for</code><span class="sig-paren">(</span><em>name</em>, <em>map_column=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.declarative.synonym_for" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Python記述子と共に：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.orm.synonym`属性を生成するDecorator。</p>
<p>装飾される関数は、：paramref： <cite>.orm.synonym.descriptor`パラメータとして：func：</cite> .orm.synonym`に渡されます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;my_table&#39;</span>

    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">_job_status</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;job_status&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>

    <span class="nd">@synonym_for</span><span class="p">(</span><span class="s2">&quot;job_status&quot;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">job_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Status: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_status</span></pre></div>
</div>
<p>：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>ハイブリッドプロパティ&lt;mapper_hybrids&gt; SQLAlchemyの機能は、より多くのレガシー機能である同義語の代わりに一般的に好まれます。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：ref： <cite>類義語</cite>  - 類義語の概要</p>
<p>：func： <cite>.orm.synonym</cite>  - マッパーレベルの関数</p>
<p class="last">：ref： <cite>mapper_hybrids</cite>  - ハイブリッド属性拡張は、同義語で達成できるよりも柔軟に属性の振る舞いを拡張するための更新されたアプローチを提供します。</p>
</div>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.ext.declarative.comparable_using">
<code class="descclassname">sqlalchemy.ext.declarative.</code><code class="descname">comparable_using</code><span class="sig-paren">(</span><em>comparator_factory</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.declarative.comparable_using" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>デコレータは、クエリ条件でPython &#64;propertyを使用できるようにします。</p>
<p>これは、compare_factoryと装飾される関数を通過する：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜sqlalchemy.orm.comparable_property`のデコレータフロントエンドです:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@comparable_using</span><span class="p">(</span><span class="n">MyComparatorType</span><span class="p">)</span>
<span class="nd">@property</span>
<span class="k">def</span> <span class="nf">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;special sauce&#39;</span></pre></div>
</div>
<p>通常の `` comparable_property（） <a href="#id1"><span class="problematic" id="id2">``</span></a>も宣言的な設定で直接使用でき、読み書き可能なプロパティに便利です:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">prop</span> <span class="o">=</span> <span class="n">comparable_property</span><span class="p">(</span><span class="n">MyComparatorType</span><span class="p">)</span></pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sqlalchemy.ext.declarative.instrument_declarative">
<code class="descclassname">sqlalchemy.ext.declarative.</code><code class="descname">instrument_declarative</code><span class="sig-paren">(</span><em>cls</em>, <em>registry</em>, <em>metadata</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.declarative.instrument_declarative" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>与えられたクラスを与えられたレジストリを使用して、クラスを宣言的に構成します。辞書は任意の辞書でも、MetaDataオブジェクトでもかまいません。</p>
</dd></dl>

<dl class="class">
<dt id="sqlalchemy.ext.declarative.AbstractConcreteBase">
<em class="property">class </em><code class="descclassname">sqlalchemy.ext.declarative.</code><code class="descname">AbstractConcreteBase</code><a class="headerlink" href="#sqlalchemy.ext.declarative.AbstractConcreteBase" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.declarative.api.ConcreteBase</span></code></p>
<p>「具体的な」宣言的なマッピングのためのヘルパークラス。</p>
<p>：class： <cite>.AbstractConcreteBase`は：func：</cite> .polymorphic_union`関数を、このクラスのサブクラスとしてマップされたすべてのテーブルに対して自動的に使用します。関数は、 `` __declare_last __（） <a href="#id1"><span class="problematic" id="id2">``</span></a>関数を介して呼び出されます。これは、本質的に：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.after_configured`イベントのフックです。</p>
<p>：class： <cite>.AbstractConcreteBase`は基本クラスのためにマップされたクラスを生成しますが、どのテーブルにも保持されません。その代わりに直接&amp;quot;polymorphic &amp;quot;に直接マップされ、選択にのみ使用されます。比較：class： `.ConcreteBase</cite>：基本クラスの永続テーブルを作成します。</p>
<p>例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="k">import</span> <span class="n">AbstractConcreteBase</span>

<span class="k">class</span> <span class="nc">Employee</span><span class="p">(</span><span class="n">AbstractConcreteBase</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Manager</span><span class="p">(</span><span class="n">Employee</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;manager&#39;</span>
    <span class="n">employee_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">manager_data</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">40</span><span class="p">))</span>

    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;polymorphic_identity&#39;</span><span class="p">:</span><span class="s1">&#39;manager&#39;</span><span class="p">,</span>
        <span class="s1">&#39;concrete&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">}</span></pre></div>
</div>
<p>抽象基本クラスは宣言的に特別な方法で処理されます。クラス構成時には、宣言的なmixinや `` __abstract__``の基本クラスのように振る舞います。クラスが設定され、マッピングが生成されると、マッピングはそれ自体ではなく、すべてのデスケッチメントの後にマッピングされます。これは、他のSQLAlchemyシステムにはない非常にユニークなマッピングシステムです。</p>
<p>このアプローチを使用すると、マッピングされたサブクラスで行われる列とプロパティを指定できます：ref： <cite>declarative_mixins</cite></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Company</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;company&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Employee</span><span class="p">(</span><span class="n">AbstractConcreteBase</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="n">employee_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">company_id</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;company.id&#39;</span><span class="p">))</span>

    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">company</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Company&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Manager</span><span class="p">(</span><span class="n">Employee</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;manager&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">manager_data</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">40</span><span class="p">))</span>

    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;polymorphic_identity&#39;</span><span class="p">:</span><span class="s1">&#39;manager&#39;</span><span class="p">,</span>
        <span class="s1">&#39;concrete&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">}</span></pre></div>
</div>
<p>しかし、マッピングを使用すると、 `` Manager``と `` Employee``は、それぞれ独立して使用できる `` company``属性を持ちます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Employee</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Employee</span><span class="o">.</span><span class="n">company</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span></pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.0.0 で変更: </span>- The mechanics of <a class="reference internal" href="#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractConcreteBase</span></code></a>
have been reworked to support relationships established directly
on the abstract base, without any special configurational steps.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：クラス： <cite>.ConcreteBase</cite></p>
<p>：ref： <cite>concrete_inheritance</cite></p>
<p class="last">：ref： <cite>inheritance_concrete_helpers</cite></p>
</div>
</dd></dl>

<dl class="class">
<dt id="sqlalchemy.ext.declarative.ConcreteBase">
<em class="property">class </em><code class="descclassname">sqlalchemy.ext.declarative.</code><code class="descname">ConcreteBase</code><a class="headerlink" href="#sqlalchemy.ext.declarative.ConcreteBase" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>「具体的な」宣言的なマッピングのためのヘルパークラス。</p>
<p>：class： <cite>.ConcreteBase`は：func：</cite> .polymorphic_union`関数を、このクラスのサブクラスとしてマップされたすべてのテーブルに対して自動的に使用します。関数は、 `` __declare_last __（） <a href="#id1"><span class="problematic" id="id2">``</span></a>関数を介して呼び出されます。これは、本質的に：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.after_configured`イベントのフックです。</p>
<p>：class： <cite>.ConcreteBase`は、クラス自体のためのマップされたテーブルを生成します。比較：クラス： `.AbstractConcreteBase</cite>、そうではありません。</p>
<p>例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="k">import</span> <span class="n">ConcreteBase</span>

<span class="k">class</span> <span class="nc">Employee</span><span class="p">(</span><span class="n">ConcreteBase</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;employee&#39;</span>
    <span class="n">employee_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;polymorphic_identity&#39;</span><span class="p">:</span><span class="s1">&#39;employee&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;concrete&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">}</span>

<span class="k">class</span> <span class="nc">Manager</span><span class="p">(</span><span class="n">Employee</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;manager&#39;</span>
    <span class="n">employee_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">manager_data</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">40</span><span class="p">))</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;polymorphic_identity&#39;</span><span class="p">:</span><span class="s1">&#39;manager&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;concrete&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">}</span></pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：クラス： <cite>.AbstractConcreteBase</cite></p>
<p>：ref： <cite>concrete_inheritance</cite></p>
<p class="last">：ref： <cite>inheritance_concrete_helpers</cite></p>
</div>
</dd></dl>

<dl class="class">
<dt id="sqlalchemy.ext.declarative.DeferredReflection">
<em class="property">class </em><code class="descclassname">sqlalchemy.ext.declarative.</code><code class="descname">DeferredReflection</code><a class="headerlink" href="#sqlalchemy.ext.declarative.DeferredReflection" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>遅延リフレクションステップに基づくマッピングの構築のためのヘルパークラス。</p>
<p>通常、宣言型クラスのautoload = Trueを `` __table__``属性として使用して、class： <cite>.Table`オブジェクトを設定することで、宣言型をリフレクションで使用できます。警告：class： `.Table`は、通常の宣言的なマッピングが構築される時点で、少なくとも：class：</cite> .Engine` mustを意味する、主キー列を完全に反映しなければなりませんクラス宣言時に利用できるようにする。</p>
<p>：class： <cite>.DeferredReflection</cite> mixinは、特定のメソッドが呼び出された後で、マッパーの構築を後で行うようにします。これは、これまでに作成されたall：class：` .Table`オブジェクトを最初に反映します。クラスはそれを次のように定義できます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="k">import</span> <span class="n">declarative_base</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="k">import</span> <span class="n">DeferredReflection</span>
<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">DeferredReflection</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;mytable&#39;</span></pre></div>
</div>
<p>上記の &amp;quot;MyClass&amp;quot;はまだマップされていません。上記のように一連のクラスが定義された後、すべてのテーブルを反映させることができ、マッピングは：meth： <cite>.prepare</cite></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;someengine://...&quot;</span><span class="p">)</span>
<span class="n">DeferredReflection</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span></pre></div>
</div>
<p>：class： <cite>.DeferredReflection</cite> mixinは、個々のクラスに適用することも、宣言ベース自体のベースとして使うことも、カスタム抽象クラスで使うこともできます。抽象ベースを使用すると、複数のエンジンを使用するアプリケーションに必要な、特定の準備ステップ用にクラスのサブセットのみを準備することができます。たとえば、アプリケーションにエンジンが2つある場合は、2つのベースを使用し、それぞれを別々に準備することができます（例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ReflectedOne</span><span class="p">(</span><span class="n">DeferredReflection</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="n">__abstract__</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">class</span> <span class="nc">ReflectedTwo</span><span class="p">(</span><span class="n">DeferredReflection</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="n">__abstract__</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">ReflectedOne</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;mytable&#39;</span>

<span class="k">class</span> <span class="nc">MyOtherClass</span><span class="p">(</span><span class="n">ReflectedOne</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;myothertable&#39;</span>

<span class="k">class</span> <span class="nc">YetAnotherClass</span><span class="p">(</span><span class="n">ReflectedTwo</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;yetanothertable&#39;</span>

<span class="c1"># ... etc.</span></pre></div>
</div>
<p>上で、 `` ReflectedOne``と `` ReflectedTwo``のクラス階層を別々に設定することができます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ReflectedOne</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">engine_one</span><span class="p">)</span>
<span class="n">ReflectedTwo</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">engine_two</span><span class="p">)</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.8 で追加.</span></p>
</div>
<dl class="classmethod">
<dt id="sqlalchemy.ext.declarative.DeferredReflection.prepare">
<em class="property">classmethod </em><code class="descname">prepare</code><span class="sig-paren">(</span><em>engine</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.declarative.DeferredReflection.prepare" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>class :: <cite>.DeferredReflection`サブクラスのすべてに対して、class：</cite> .Table`オブジェクトをすべて反映します。</p>
</dd></dl>

</dd></dl>

<div class="section" id="special-directives">
<h3>特別指示<a class="headerlink" href="#special-directives" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="declare-last">
<h4>`` __declare_last __（） ``<a class="headerlink" href="#declare-last" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>`` __declare_last __（） <a href="#id1"><span class="problematic" id="id2">``</span></a>フックは：：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.MapperEvents.after_configured`イベントによって自動的に呼び出されるクラスレベル関数の定義を可能にします。これは、マッピングが完了し、 &amp;#39;configure&amp;#39;ステップが終了した後に発生します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__declare_last__</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="s2">&quot;&quot;</span>
        <span class="c1"># do something with mappings</span></pre></div>
</div>
</div>
<div class="section" id="declare-first">
<h4>`` __declare_first __（） ``<a class="headerlink" href="#declare-first" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>`` __declare_last __（） <a href="#id1"><span class="problematic" id="id2">``</span></a>と似ていますが、：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.MapperEvents.before_configured`イベントを介してマッパー設定の開始時に呼び出されます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__declare_first__</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="s2">&quot;&quot;</span>
        <span class="c1"># do something before mappings are configured</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.9.3 で追加.</span></p>
</div>
</div>
<div class="section" id="abstract">
<span id="declarative-abstract"></span><h4>`` __abstract__``<a class="headerlink" href="#abstract" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>`` __abstract__``は、宣言的にテーブルやマッパーの生成をスキップします。クラスは、mixinと同じ方法で階層内に追加することができます（参照：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>declarative_mixins`を参照）。これにより、サブクラスを特別なクラスから拡張することができます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SomeAbstractBase</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__abstract__</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">some_helpful_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;&quot;</span>

    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">__mapper_args__</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;helpful mapper arguments&quot;</span><span class="p">:</span><span class="kc">True</span><span class="p">}</span>

<span class="k">class</span> <span class="nc">MyMappedClass</span><span class="p">(</span><span class="n">SomeAbstractBase</span><span class="p">):</span>
    <span class="s2">&quot;&quot;</span></pre></div>
</div>
<p>`` __abstract__``の可能な使い方のひとつは、distinct：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.MetaData`を異なるbaseに使うことです:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">DefaultBase</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__abstract__</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">OtherBase</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__abstract__</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span></pre></div>
</div>
<p>`` DefaultBase``を継承したクラスはclass： <cite>.MetaData`をテーブルのレジストリとして使い、</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>OtherBase``を継承するクラスは別のものを使います。テーブル自体は、おそらく異なるデータベース内に作成することができます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DefaultBase</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">some_engine</span><span class="p">)</span>
<span class="n">OtherBase</span><span class="o">.</span><span class="n">metadata_create_all</span><span class="p">(</span><span class="n">some_other_engine</span><span class="p">)</span></pre></div>
</div>
</div>
<div class="section" id="table-cls">
<h4>`` __Table_cls__``<a class="headerlink" href="#table-cls" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Table`を生成するために使用される呼び出し可能/クラスがカスタマイズされることを可能にします。これは非常に自由なフックで、特別なカスタマイズを許可することができます：class： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Table`ここで生成する:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyMixin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__table_cls__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Table</span><span class="p">(</span>
            <span class="s2">&quot;my_&quot;</span> <span class="o">+</span> <span class="n">name</span><span class="p">,</span>
            <span class="n">metadata</span><span class="p">,</span> <span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span>
        <span class="p">)</span></pre></div>
</div>
<p>上記のミックスインは `` &amp;quot;my _ &amp;quot; <a href="#id1"><span class="problematic" id="id2">``</span></a>という接頭辞と `` __tablename__``属性を使って通常指定された名前を含むall：class： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Table`オブジェクトを生成します。</p>
<p>`` __table_cls__``は、 `` None``を返す場合もサポートしています。これにより、クラスは単一テーブルの継承とみなされ、そのサブクラスとみなされます。これは、いくつかのカスタマイズスキームでは、プライマリキーが存在しない場合は単一継承として定義するなど、テーブル自体の引数に基づいて単一テーブルの継承を行う必要があることを確認するのに便利です:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AutoTable</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">__tablename__</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__table_cls__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">arg</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Column</span><span class="p">)</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">primary_key</span><span class="p">)</span> <span class="ow">or</span> \
                    <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">PrimaryKeyConstraint</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">AutoTable</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Employee</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="n">employee_name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">)</span></pre></div>
</div>
<p>上記の `` Employee``クラスは `` Person``に対して単一テーブルの継承としてマップされます。 `` employee_name``カラムは `` Person``テーブルのメンバとして追加されます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.0.0 で追加.</span></p>
</div>
</div>
</div>
</div>
</div>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="mixins.html" title="previous chapter">ミックスインとカスタムベースクラス</a>
        Next:
        <a href="../mutable.html" title="next chapter">突然変異の追跡</a>

    <div id="docs-copyright">
        &copy; <a href="../../../copyright.html">Copyright</a> 2007-2018, the SQLAlchemy authors and contributors.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.8.1.
    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../../../',
          VERSION:     '1.3.0b1',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/translations.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../../../_static/detectmobile.js"></script>
    <script type="text/javascript" src="../../../_static/init.js"></script>


    </body>
</html>


