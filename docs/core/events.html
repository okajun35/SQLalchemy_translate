<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        
        <title>
            
    
    コアイベント
 &mdash;
    SQLAlchemy 1.3 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../_static/changelog.css" type="text/css" />
                <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
        <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="SQLAlchemy 1.3 Documentation" href="../index.html" />
        <link rel="up" title="エンジンと接続の使用" href="engines_connections.html" />
        <link rel="next" title="コアAPIの基礎" href="api_basics.html" />
        <link rel="prev" title="接続プーリング" href="pooling.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">1.3.0b1</span>


        | Release Date: unreleased

    </div>

    <h1>SQLAlchemy 1.3 Documentation</h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">


        <div id="docs-sidebar-popout">
            <h3><a href="../index.html">SQLAlchemy 1.3 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../contents.html">Contents</a> |
                <a href="../genindex.html">Index</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="index.html" title="SQLAlchemyコア">SQLAlchemyコア</a>
        </h3>

        <ul>
<li><span class="link-container first"><a class="reference external" href="tutorial.html">SQL式言語チュートリアル</a></span></li>
<li><span class="link-container first"><a class="reference external" href="expression_api.html">SQL Statements and Expressions API(SQL文とAPI式)</a></span></li>
<li><span class="link-container first"><a class="reference external" href="schema.html">スキーマ定義言語</a></span></li>
<li><span class="link-container first"><a class="reference external" href="types.html">列とデータ型</a></span></li>
<li><span class="link-container first"><a class="reference external" href="engines_connections.html">エンジンと接続の使用</a></span><ul>
<li><span class="link-container first"><a class="reference external" href="engines.html">エンジン構成</a></span></li>
<li><span class="link-container first"><a class="reference external" href="connections.html">エンジンと接続の操作</a></span></li>
<li><span class="link-container first"><a class="reference external" href="pooling.html">接続プーリング</a></span></li>
<li class="selected"><span class="link-container first"><strong>コアイベント</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container first"><a class="reference external" href="#connection-pool-events">接続プールのイベント</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#sql-execution-and-connection-events">SQLの実行と接続のイベント</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#schema-events">スキーマイベント</a></span></li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container first"><a class="reference external" href="api_basics.html">コアAPIの基礎</a></span></li>
</ul>



        </div>

        </div>

    </div>

    

    <div id="docs-body" class="withsidebar" >
        
<div class="section" id="core-events">
<span id="core-event-toplevel"></span><h1>コアイベント<a class="headerlink" href="#core-events" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>このセクションでは、SQLAlchemy Coreで提供されるイベントインターフェイスについて説明します。イベントリスニングAPIの概要については、：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>event_toplevel`を参照してください。 ORMイベントは：ref： <a href="#id3"><span class="problematic" id="id4">`</span></a>orm_event_toplevel`に記述されています。</p>
<dl class="class">
<dt id="sqlalchemy.event.base.Events">
<em class="property">class </em><code class="descclassname">sqlalchemy.event.base.</code><code class="descname">Events</code><a class="headerlink" href="#sqlalchemy.event.base.Events" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>特定のターゲット・タイプのイベント・リスニング機能を定義します。</p>
</dd></dl>

<div class="section" id="connection-pool-events">
<h2>接続プールのイベント<a class="headerlink" href="#connection-pool-events" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="class">
<dt id="sqlalchemy.events.PoolEvents">
<em class="property">class </em><code class="descclassname">sqlalchemy.events.</code><code class="descname">PoolEvents</code><a class="headerlink" href="#sqlalchemy.events.PoolEvents" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy.event.base.Events" title="sqlalchemy.event.base.Events"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.event.base.Events</span></code></a></p>
<p>：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Pool`に対して利用可能なイベントです。</p>
<p>ここでのメソッドは、リスナー関数に渡されるメンバーの名前だけでなく、イベントの名前も定義します。</p>
<p>例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="k">def</span> <span class="nf">my_on_checkout</span><span class="p">(</span><span class="n">dbapi_conn</span><span class="p">,</span> <span class="n">connection_rec</span><span class="p">,</span> <span class="n">connection_proxy</span><span class="p">):</span>
    <span class="s2">&quot;handle an on checkout event&quot;</span>

<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">Pool</span><span class="p">,</span> <span class="s1">&#39;checkout&#39;</span><span class="p">,</span> <span class="n">my_on_checkout</span><span class="p">)</span></pre></div>
</div>
<p>：class： <cite>.Pool`クラスと：class：</cite> .Pool`インスタンスを受け入れることに加えて、：class： <cite>.PoolEvents`は：class：</cite> .Engine`オブジェクトと：class： <cite>.Engine`クラスも受け入れますターゲットとして指定されたエンジンの `</cite> .pool``属性に解決される：class： <cite>.Pool</cite> class</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql://scott:tiger@localhost/test&quot;</span><span class="p">)</span>

<span class="c1"># will associate with engine.pool</span>
<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="s1">&#39;checkout&#39;</span><span class="p">,</span> <span class="n">my_on_checkout</span><span class="p">)</span></pre></div>
</div>
<dl class="method">
<dt id="sqlalchemy.events.PoolEvents.checkin">
<code class="descname">checkin</code><span class="sig-paren">(</span><em>dbapi_connection</em>, <em>connection_record</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.PoolEvents.checkin" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>接続がプールに戻るときに呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngineOrPool</span><span class="p">,</span> <span class="s1">&#39;checkin&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_checkin</span><span class="p">(</span><span class="n">dbapi_connection</span><span class="p">,</span> <span class="n">connection_record</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;checkin&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>接続が閉じられている可能性があります。接続が無効になっている場合は、Noneになることがあります。分離された接続に対して `` checkin``は呼び出されません。 （彼らはプールに戻りません。）</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.PoolEvents.checkin.params.dbapi_connection"></span><strong>dbapi_connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.PoolEvents.checkin.params.dbapi_connection">¶</a> -- DBAPI接続。</li>
<li><span class="target" id="sqlalchemy.events.PoolEvents.checkin.params.connection_record"></span><strong>connection_record</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.PoolEvents.checkin.params.connection_record">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>._ConnectionRecord`はDBAPI接続を管理します。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.PoolEvents.checkout">
<code class="descname">checkout</code><span class="sig-paren">(</span><em>dbapi_connection</em>, <em>connection_record</em>, <em>connection_proxy</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.PoolEvents.checkout" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>接続がプールから取得されたときに呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngineOrPool</span><span class="p">,</span> <span class="s1">&#39;checkout&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_checkout</span><span class="p">(</span><span class="n">dbapi_connection</span><span class="p">,</span> <span class="n">connection_record</span><span class="p">,</span> <span class="n">connection_proxy</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;checkout&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.PoolEvents.checkout.params.dbapi_connection"></span><strong>dbapi_connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.PoolEvents.checkout.params.dbapi_connection">¶</a> -- DBAPI接続。</li>
<li><span class="target" id="sqlalchemy.events.PoolEvents.checkout.params.connection_record"></span><strong>connection_record</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.PoolEvents.checkout.params.connection_record">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>._ConnectionRecord`はDBAPI接続を管理します。</li>
<li><span class="target" id="sqlalchemy.events.PoolEvents.checkout.params.connection_proxy"></span><strong>connection_proxy</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.PoolEvents.checkout.params.connection_proxy">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>._ConnectionFairy`オブジェクトは、チェックアウトの寿命の間、DBAPI接続のパブリックインターフェイスをプロキシします。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜sqlalchemy.exc.DisconnectionError`を発行すると、現在の接続が破棄され、新しい接続が取得されます。すべてのチェックアウトリスナーの処理が中止され、新しい接続を使用して再開されます。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：meth： <cite>.ConnectionEvents.engine_connect</cite>  -  new：class：` .Connection`の作成時に発生する同様のイベントです。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.PoolEvents.close">
<code class="descname">close</code><span class="sig-paren">(</span><em>dbapi_connection</em>, <em>connection_record</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.PoolEvents.close" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>DBAPI接続が閉じられたときに呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngineOrPool</span><span class="p">,</span> <span class="s1">&#39;close&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_close</span><span class="p">(</span><span class="n">dbapi_connection</span><span class="p">,</span> <span class="n">connection_record</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;close&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>イベントは、クローズが発生する前に送出されます。</p>
<p>接続の終了は失敗する可能性があります。これは通常、接続がすでに閉じられているためです。クローズ操作が失敗した場合、接続は破棄されます。</p>
<p>：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.close`イベントは、まだプールに関連付けられている接続に対応します。分離された接続のcloseイベントを傍受するには：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.close_detached`を使用します。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.PoolEvents.close_detached">
<code class="descname">close_detached</code><span class="sig-paren">(</span><em>dbapi_connection</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.PoolEvents.close_detached" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>切り離されたDBAPI接続が閉じられたときに呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngineOrPool</span><span class="p">,</span> <span class="s1">&#39;close_detached&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_close_detached</span><span class="p">(</span><span class="n">dbapi_connection</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;close_detached&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>イベントは、クローズが発生する前に送出されます。</p>
<p>接続の終了は失敗する可能性があります。これは通常、接続がすでに閉じられているためです。クローズ操作が失敗した場合、接続は破棄されます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.PoolEvents.connect">
<code class="descname">connect</code><span class="sig-paren">(</span><em>dbapi_connection</em>, <em>connection_record</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.PoolEvents.connect" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>特定のDBAPI接続が最初に生成されたときに呼び出されます：class： <cite>.Pool</cite>。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngineOrPool</span><span class="p">,</span> <span class="s1">&#39;connect&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_connect</span><span class="p">(</span><span class="n">dbapi_connection</span><span class="p">,</span> <span class="n">connection_record</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;connect&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントにより、新しいDBAPI接続を生成するためにDBAPIモジュールレベルの `` .connect（） <a href="#id1"><span class="problematic" id="id2">``</span></a>メソッドが使用された直後のポイントを取得できます。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.PoolEvents.connect.params.dbapi_connection"></span><strong>dbapi_connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.PoolEvents.connect.params.dbapi_connection">¶</a> -- DBAPI接続。</li>
<li><span class="target" id="sqlalchemy.events.PoolEvents.connect.params.connection_record"></span><strong>connection_record</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.PoolEvents.connect.params.connection_record">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>._ConnectionRecord`はDBAPI接続を管理します。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.PoolEvents.detach">
<code class="descname">detach</code><span class="sig-paren">(</span><em>dbapi_connection</em>, <em>connection_record</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.PoolEvents.detach" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>DBAPI接続がプールから「切り離された」ときに呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngineOrPool</span><span class="p">,</span> <span class="s1">&#39;detach&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_detach</span><span class="p">(</span><span class="n">dbapi_connection</span><span class="p">,</span> <span class="n">connection_record</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;detach&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、デタッチが発生した後に発生します。接続は、指定された接続レコードに関連付けられなくなりました。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.PoolEvents.first_connect">
<code class="descname">first_connect</code><span class="sig-paren">(</span><em>dbapi_connection</em>, <em>connection_record</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.PoolEvents.first_connect" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>DBAPI接続が特定の：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Pool`から最初にチェックアウトされたときに初めて正確に呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngineOrPool</span><span class="p">,</span> <span class="s1">&#39;first_connect&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_first_connect</span><span class="p">(</span><span class="n">dbapi_connection</span><span class="p">,</span> <span class="n">connection_record</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;first_connect&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>：meth： <cite>.PoolEvents.first_connect`の根拠は、すべての接続で使用される設定に基づいて特定の一連のデータベース接続に関する情報を判断することです。特定の：class： `.Pool`は単一の&amp;quot; creator &amp;quot;関数（class：</cite> .Engine`はURLと接続オプションを指します）を参照するので、通常は観測を行うのに有効ですデータベースのバージョン、サーバーとクライアントのエンコーディング設定、照合設定などの後続のすべての接続について、安全に有効と見なすことができる単一の接続について説明します。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.PoolEvents.first_connect.params.dbapi_connection"></span><strong>dbapi_connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.PoolEvents.first_connect.params.dbapi_connection">¶</a> -- DBAPI接続。</li>
<li><span class="target" id="sqlalchemy.events.PoolEvents.first_connect.params.connection_record"></span><strong>connection_record</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.PoolEvents.first_connect.params.connection_record">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>._ConnectionRecord`はDBAPI接続を管理します。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.PoolEvents.invalidate">
<code class="descname">invalidate</code><span class="sig-paren">(</span><em>dbapi_connection</em>, <em>connection_record</em>, <em>exception</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.PoolEvents.invalidate" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>DBAPI接続が&amp;quot;無効化&amp;quot;されるときに呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngineOrPool</span><span class="p">,</span> <span class="s1">&#39;invalidate&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_invalidate</span><span class="p">(</span><span class="n">dbapi_connection</span><span class="p">,</span> <span class="n">connection_record</span><span class="p">,</span> <span class="n">exception</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;invalidate&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、APIの使用法または&amp;quot;自動無効化&amp;quot;を介して、 `` soft``フラグなしで：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>._ConnectionRecord.invalidate`メソッドが呼び出されたときに呼び出されます。</p>
<p>このイベントは、接続時に `` .close（） <a href="#id1"><span class="problematic" id="id2">``</span></a>を呼び出す最後の試行が発生する前に発生します。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.PoolEvents.invalidate.params.dbapi_connection"></span><strong>dbapi_connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.PoolEvents.invalidate.params.dbapi_connection">¶</a> -- DBAPI接続。</li>
<li><span class="target" id="sqlalchemy.events.PoolEvents.invalidate.params.connection_record"></span><strong>connection_record</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.PoolEvents.invalidate.params.connection_record">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>._ConnectionRecord`はDBAPI接続を管理します。</li>
<li><span class="target" id="sqlalchemy.events.PoolEvents.invalidate.params.exception"></span><strong>exception</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.PoolEvents.invalidate.params.exception">¶</a> -- 存在する場合、この無効化の理由に対応する例外オブジェクト`` None``かもしれません。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.9.2 で追加: </span>接続無効化リスニングのサポートが追加されました。</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>pool_connection_invalidation</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.PoolEvents.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><em>dbapi_connection</em>, <em>connection_record</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.PoolEvents.reset" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>プールされた接続に対して「リセット」アクションが発生する前に呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngineOrPool</span><span class="p">,</span> <span class="s1">&#39;reset&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_reset</span><span class="p">(</span><span class="n">dbapi_connection</span><span class="p">,</span> <span class="n">connection_record</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;reset&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、プールに返される前にDBAPI接続で `` rollback（） <a href="#id1"><span class="problematic" id="id2">``</span></a>メソッドが呼び出されたときを表します。 `` reset &amp;quot;の動作は、` <a href="#id3"><span class="problematic" id="id4">`</span></a>reset_on_return``プール引数を使って無効にすることもできます。</p>
<p>：meth： <cite>.PoolEvents.reset`イベントの後には通常、リセット直後に接続が破棄される場合を除いて：meth：</cite> .PoolEvents.checkin`イベントが呼び出されます。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.PoolEvents.reset.params.dbapi_connection"></span><strong>dbapi_connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.PoolEvents.reset.params.dbapi_connection">¶</a> -- DBAPI接続。</li>
<li><span class="target" id="sqlalchemy.events.PoolEvents.reset.params.connection_record"></span><strong>connection_record</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.PoolEvents.reset.params.connection_record">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>._ConnectionRecord`はDBAPI接続を管理します。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.8 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：meth： <cite>.ConnectionEvents.rollback</cite></p>
<p class="last">：meth： <cite>.ConnectionEvents.commit</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.PoolEvents.soft_invalidate">
<code class="descname">soft_invalidate</code><span class="sig-paren">(</span><em>dbapi_connection</em>, <em>connection_record</em>, <em>exception</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.PoolEvents.soft_invalidate" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>DBAPI接続が&amp;quot;ソフト無効&amp;quot;になるときに呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngineOrPool</span><span class="p">,</span> <span class="s1">&#39;soft_invalidate&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_soft_invalidate</span><span class="p">(</span><span class="n">dbapi_connection</span><span class="p">,</span> <span class="n">connection_record</span><span class="p">,</span> <span class="n">exception</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;soft_invalidate&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは：meth： <cite>._ConnectionRecord.invalidate`メソッドが</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>soft``フラグで呼び出されたときに呼び出されます。</p>
<p>ソフト無効化とは、現在の接続がチェックインされた後に、この接続を追跡する接続レコードが強制的に再接続するときのことを指します。dbapi_connectionは、呼び出された時点でアクティブに閉じません。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.0.3 で追加.</span></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="sql-execution-and-connection-events">
<h2>SQLの実行と接続のイベント<a class="headerlink" href="#sql-execution-and-connection-events" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="class">
<dt id="sqlalchemy.events.ConnectionEvents">
<em class="property">class </em><code class="descclassname">sqlalchemy.events.</code><code class="descname">ConnectionEvents</code><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy.event.base.Events" title="sqlalchemy.event.base.Events"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.event.base.Events</span></code></a></p>
<p>class： <cite>.Connectionable</cite>：class：` .Connection`と：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Engine`を含むイベントです。</p>
<p>ここでのメソッドは、リスナー関数に渡されるメンバーの名前だけでなく、イベントの名前も定義します。</p>
<p>イベントリスナーは：class： <cite>.Engine`のようなclass：</cite> .Connectable`クラスまたはインスタンスに関連付けることができます：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span><span class="p">,</span> <span class="n">create_engine</span>

<span class="k">def</span> <span class="nf">before_cursor_execute</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">statement</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span>
                                                <span class="n">executemany</span><span class="p">):</span>
    <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Received statement: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">statement</span><span class="p">)</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;postgresql://scott:tiger@localhost/test&#39;</span><span class="p">)</span>
<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="s2">&quot;before_cursor_execute&quot;</span><span class="p">,</span> <span class="n">before_cursor_execute</span><span class="p">)</span></pre></div>
</div>
<p>または特定の：class： <cite>.Connection</cite></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="s1">&#39;before_cursor_execute&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">before_cursor_execute</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">statement</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span>
                                    <span class="n">context</span><span class="p">,</span> <span class="n">executemany</span><span class="p">):</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Received statement: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">statement</span><span class="p">)</span></pre></div>
</div>
<p>メソッドが：meth： <cite>.after_cursor_execute</cite>、：meth：` .before_cursor_execute`と：meth： <cite>.dbapi_error`のような</cite> statement`パラメータで呼び出されたとき、その文は準備された正確なSQL文字列です接続：class： <cite>.Dialect`内のDBAPI</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>cursor``への送信。</p>
<p>：meth： <cite>.before_execute`と：meth：</cite> .before_cursor_execute`イベントは、 `` retval = True``フラグで設定することもできます。このフラグは、データベースに送られる文とパラメータの変更を可能にします。 ：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.before_cursor_execute`イベントは、コメントなどの特別な文字列変換をすべての実行に追加するのに特に役に立ちます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.engine</span> <span class="k">import</span> <span class="n">Engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">Engine</span><span class="p">,</span> <span class="s2">&quot;before_cursor_execute&quot;</span><span class="p">,</span> <span class="n">retval</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">comment_sql_calls</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">statement</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span>
                                    <span class="n">context</span><span class="p">,</span> <span class="n">executemany</span><span class="p">):</span>
    <span class="n">statement</span> <span class="o">=</span> <span class="n">statement</span> <span class="o">+</span> <span class="s2">&quot; -- some comment&quot;</span>
    <span class="k">return</span> <span class="n">statement</span><span class="p">,</span> <span class="n">parameters</span></pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">：class： <cite>.ConnectionEvents`は：class：</cite> .Engine`、：class： <cite>.Connection</cite>、そしてこれらのクラスのそれぞれのインスタンスの任意の組み合わせで確立できます。 4つのスコープのすべてのイベントは、class： <cite>.Connection`のインスタンスに対して起動します。しかし、パフォーマンス上の理由から、：class： `.Connection`オブジェクトは、インスタンス化時にparent：class：</cite> .Engine`にイベントリスナーが設定されているかどうかを判断します。 ：class： <cite>.Engine`クラスに、または：class：</cite> .Engine` <em>のインスタンスに追加されたイベントリスナーは、従属：class： `.Connection`インスタンスのインスタンス化は*通常</em> <a href="#id1"><span class="problematic" id="id2">*</span></a>できません：class： <cite>.Connection`インスタンスです。新しく追加されたリスナーは、親：class： `.Engine`クラスまたはインスタンスで確立されたイベントリスナーの後に作成されるclass：</cite> .Connection`インスタンスに代わり有効です。</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><span class="target" id="sqlalchemy.events.ConnectionEvents.params.retval"></span><strong>retval=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.params.retval">¶</a> -- ：meth： <cite>.before_execute`と：meth：</cite> .before_cursor_execute`イベントにのみ適用されます。 Trueの場合、ユーザー定義のイベント関数には戻り値が必要です。戻り値は、指定されたステートメントとパラメーターを置き換えるパラメーターのタプルです。特定の戻り引数については、これらのメソッドを参照してください。</td>
</tr>
</tbody>
</table>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 0.8 で変更: </span>：class： <cite>.ConnectionEvents`は：class：</cite> .Engine`のための既存のサポートに加えて：class： <cite>.Connection`を含む：class：</cite> .Connectable`に関連付けることができます。</p>
</div>
<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.after_cursor_execute">
<code class="descname">after_cursor_execute</code><span class="sig-paren">(</span><em>conn</em>, <em>cursor</em>, <em>statement</em>, <em>parameters</em>, <em>context</em>, <em>executemany</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.after_cursor_execute" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>実行後に低レベルカーソルのexecute（）イベントを代行受信します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;after_cursor_execute&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_cursor_execute</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">statement</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">executemany</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_cursor_execute&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span>

<span class="c1"># named argument style (new in 0.9)</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;after_cursor_execute&#39;</span><span class="p">,</span> <span class="n">named</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_cursor_execute</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_cursor_execute&#39; event&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;conn&#39;</span><span class="p">]</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;cursor&#39;</span><span class="p">]</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.after_cursor_execute.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.after_cursor_execute.params.conn">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.after_cursor_execute.params.cursor"></span><strong>cursor</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.after_cursor_execute.params.cursor">¶</a> -- DBAPIカーソルオブジェクト。ステートメントがSELECTであった場合、結果は保留になりますが、これらは：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.ResultProxy`で必要となるので消費されるべきではありません。</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.after_cursor_execute.params.statement"></span><strong>statement</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.after_cursor_execute.params.statement">¶</a> -- DBAPIに渡される文字列SQL文</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.after_cursor_execute.params.parameters"></span><strong>parameters</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.after_cursor_execute.params.parameters">¶</a> -- DBAPIの `` cursor``の `` execute（） <a href="#id1"><span class="problematic" id="id2">``</span></a>や `` executemany（） <a href="#id3"><span class="problematic" id="id4">``</span></a>メソッドに渡される、辞書、タプル、またはパラメータのリストです。場合によっては、「なし」とすることができる。</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.after_cursor_execute.params.context"></span><strong>context</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.after_cursor_execute.params.context">¶</a> -- ：class： <cite>.ExecutionContext`オブジェクトが使用中です。 `</cite> None``かもしれません。</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.after_cursor_execute.params.executemany"></span><strong>executemany</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.after_cursor_execute.params.executemany">¶</a> -- boolean、 `` True``の場合は `` executemany（） <a href="#id1"><span class="problematic" id="id2">``</span></a>の呼び出し、 `` False``の場合は `` execute（） <a href="#id3"><span class="problematic" id="id4">``</span></a>の呼び出しです。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.after_execute">
<code class="descname">after_execute</code><span class="sig-paren">(</span><em>conn</em>, <em>clauseelement</em>, <em>multiparams</em>, <em>params</em>, <em>result</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.after_execute" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>実行後に高水準のexecute（）イベントを代行受信します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;after_execute&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_execute</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">clauseelement</span><span class="p">,</span> <span class="n">multiparams</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_execute&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span>

<span class="c1"># named argument style (new in 0.9)</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;after_execute&#39;</span><span class="p">,</span> <span class="n">named</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_execute</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_execute&#39; event&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;conn&#39;</span><span class="p">]</span>
    <span class="n">clauseelement</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;clauseelement&#39;</span><span class="p">]</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.after_execute.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.after_execute.params.conn">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.after_execute.params.clauseelement"></span><strong>clauseelement</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.after_execute.params.clauseelement">¶</a> -- SQL式の構文、：class： <cite>.Compiled`インスタンス、または：meth：</cite> .Connection.execute`に渡される文字列ステートメント。</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.after_execute.params.multiparams"></span><strong>multiparams</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.after_execute.params.multiparams">¶</a> -- 複数のパラメータセット、辞書のリスト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.after_execute.params.params"></span><strong>params</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.after_execute.params.params">¶</a> -- 単一のパラメータセット、単一の辞書。</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.after_execute.params.result"></span><strong>result</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.after_execute.params.result">¶</a> -- ：class：実行によって生成された <cite>.ResultProxy</cite>。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.before_cursor_execute">
<code class="descname">before_cursor_execute</code><span class="sig-paren">(</span><em>conn</em>, <em>cursor</em>, <em>statement</em>, <em>parameters</em>, <em>context</em>, <em>executemany</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.before_cursor_execute" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>実行前に低レベルカーソルのexecute（）イベントを代行受信し、カーソルに対して呼び出されるSQL文とDBAPI固有のパラメータ文字列を受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;before_cursor_execute&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_before_cursor_execute</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">statement</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">executemany</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;before_cursor_execute&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span>

<span class="c1"># named argument style (new in 0.9)</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;before_cursor_execute&#39;</span><span class="p">,</span> <span class="n">named</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_before_cursor_execute</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;before_cursor_execute&#39; event&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;conn&#39;</span><span class="p">]</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;cursor&#39;</span><span class="p">]</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、SQL文字列のロギングおよび遅延の変更に適しています。ターゲットバックエンドに固有のものを除き、パラメータの変更にはあまり理想的ではありません。</p>
<p>このイベントは、 `` retval = True``フラグで任意に設定することができます。この場合、 `` statement``と `` parameters``引数は2タプルとして返されます。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">Engine</span><span class="p">,</span> <span class="s2">&quot;before_cursor_execute&quot;</span><span class="p">,</span> <span class="n">retval</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">before_cursor_execute</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">statement</span><span class="p">,</span>
                <span class="n">parameters</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">executemany</span><span class="p">):</span>
    <span class="c1"># do something with statement, parameters</span>
    <span class="k">return</span> <span class="n">statement</span><span class="p">,</span> <span class="n">parameters</span></pre></div>
</div>
<p>次の例を参照してください：class： <cite>.ConnectionEvents</cite>。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.before_cursor_execute.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.before_cursor_execute.params.conn">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.before_cursor_execute.params.cursor"></span><strong>cursor</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.before_cursor_execute.params.cursor">¶</a> -- DBAPIカーソルオブジェクト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.before_cursor_execute.params.statement"></span><strong>statement</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.before_cursor_execute.params.statement">¶</a> -- DBAPIに渡す文字列SQL文</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.before_cursor_execute.params.parameters"></span><strong>parameters</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.before_cursor_execute.params.parameters">¶</a> -- DBAPIの `` cursor``の `` execute（） <a href="#id1"><span class="problematic" id="id2">``</span></a>や `` executemany（） <a href="#id3"><span class="problematic" id="id4">``</span></a>メソッドに渡される、辞書、タプル、またはパラメータのリストです。場合によっては、「なし」とすることができる。</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.before_cursor_execute.params.context"></span><strong>context</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.before_cursor_execute.params.context">¶</a> -- ：class： <cite>.ExecutionContext`オブジェクトが使用中です。 `</cite> None``かもしれません。</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.before_cursor_execute.params.executemany"></span><strong>executemany</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.before_cursor_execute.params.executemany">¶</a> -- boolean、 `` True``の場合は `` executemany（） <a href="#id1"><span class="problematic" id="id2">``</span></a>の呼び出し、 `` False``の場合は `` execute（） <a href="#id3"><span class="problematic" id="id4">``</span></a>の呼び出しです。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>参照：</p>
<p>：meth： <cite>.before_execute</cite></p>
<p>：meth： <cite>.after_cursor_execute</cite></p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.before_execute">
<code class="descname">before_execute</code><span class="sig-paren">(</span><em>conn</em>, <em>clauseelement</em>, <em>multiparams</em>, <em>params</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.before_execute" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>高水準のexecute（）イベントを代行受信し、コンパイルされていないSQL構文やその他のオブジェクトをSQLにレンダリングする前に受信します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;before_execute&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_before_execute</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">clauseelement</span><span class="p">,</span> <span class="n">multiparams</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;before_execute&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span>

<span class="c1"># named argument style (new in 0.9)</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;before_execute&#39;</span><span class="p">,</span> <span class="n">named</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_before_execute</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;before_execute&#39; event&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;conn&#39;</span><span class="p">]</span>
    <span class="n">clauseelement</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;clauseelement&#39;</span><span class="p">]</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、パラメータリストがここで一貫したフォーマットになるため、SQLコンパイルの問題のデバッグやデータベースへのパラメータの早期操作に適しています。</p>
<p>このイベントは、 `` retval = True``フラグで任意に設定することができます。この場合、 `` clauseelement``、 `` multiparams``、 `` params``引数は三つ組として返されます。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">Engine</span><span class="p">,</span> <span class="s2">&quot;before_execute&quot;</span><span class="p">,</span> <span class="n">retval</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">before_execute</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">clauseelement</span><span class="p">,</span> <span class="n">multiparams</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
    <span class="c1"># do something with clauseelement, multiparams, params</span>
    <span class="k">return</span> <span class="n">clauseelement</span><span class="p">,</span> <span class="n">multiparams</span><span class="p">,</span> <span class="n">params</span></pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.before_execute.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.before_execute.params.conn">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.before_execute.params.clauseelement"></span><strong>clauseelement</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.before_execute.params.clauseelement">¶</a> -- SQL式の構文、：class： <cite>.Compiled`インスタンス、または：meth：</cite> .Connection.execute`に渡される文字列ステートメント。</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.before_execute.params.multiparams"></span><strong>multiparams</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.before_execute.params.multiparams">¶</a> -- 複数のパラメータセット、辞書のリスト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.before_execute.params.params"></span><strong>params</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.before_execute.params.params">¶</a> -- 単一のパラメータセット、単一の辞書。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>参照：</p>
<p>：meth： <cite>.before_cursor_execute</cite></p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.begin">
<code class="descname">begin</code><span class="sig-paren">(</span><em>conn</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.begin" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>begin（）イベントを傍受します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;begin&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_begin</span><span class="p">(</span><span class="n">conn</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;begin&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><span class="target" id="sqlalchemy.events.ConnectionEvents.begin.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.begin.params.conn">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクト</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.begin_twophase">
<code class="descname">begin_twophase</code><span class="sig-paren">(</span><em>conn</em>, <em>xid</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.begin_twophase" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>begin_twophase（）イベントを傍受します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;begin_twophase&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_begin_twophase</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">xid</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;begin_twophase&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.begin_twophase.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.begin_twophase.params.conn">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.begin_twophase.params.xid"></span><strong>xid</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.begin_twophase.params.xid">¶</a> -- 二相XID識別子</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.commit">
<code class="descname">commit</code><span class="sig-paren">(</span><em>conn</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.commit" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Transaction`によって開始されたcommit（）イベントをインターセプトします。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;commit&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_commit</span><span class="p">(</span><span class="n">conn</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;commit&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>`` reset_on_return``フラグが `` &amp;#39;commit```に設定されている場合、class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Pool`はチェックイン時にDBAPI接続を自動的にコミットすることもあります。このコミットをインターセプトするには、：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.PoolEvents.reset`フックを使用します。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><span class="target" id="sqlalchemy.events.ConnectionEvents.commit.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.commit.params.conn">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクト</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.commit_twophase">
<code class="descname">commit_twophase</code><span class="sig-paren">(</span><em>conn</em>, <em>xid</em>, <em>is_prepared</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.commit_twophase" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>commit_twophase（）イベントをインターセプトします。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;commit_twophase&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_commit_twophase</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">xid</span><span class="p">,</span> <span class="n">is_prepared</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;commit_twophase&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.commit_twophase.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.commit_twophase.params.conn">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.commit_twophase.params.xid"></span><strong>xid</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.commit_twophase.params.xid">¶</a> -- 二相XID識別子</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.commit_twophase.params.is_prepared"></span><strong>is_prepared</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.commit_twophase.params.is_prepared">¶</a> -- booleanは、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.TwoPhaseTransaction.prepare`が呼び出されたかどうかを示します。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.dbapi_error">
<code class="descname">dbapi_error</code><span class="sig-paren">(</span><em>conn</em>, <em>cursor</em>, <em>statement</em>, <em>parameters</em>, <em>context</em>, <em>exception</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.dbapi_error" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>未処理のDBAPIエラーを代行受信します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;dbapi_error&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_dbapi_error</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">statement</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">exception</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;dbapi_error&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span>

<span class="c1"># named argument style (new in 0.9)</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;dbapi_error&#39;</span><span class="p">,</span> <span class="n">named</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_dbapi_error</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;dbapi_error&#39; event&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;conn&#39;</span><span class="p">]</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;cursor&#39;</span><span class="p">]</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、DBAPI自体から受信したDBAPI例外インスタンスを使用して呼び出されます。* SQLAlchemyでは、独自の例外ラッパーを使用して例外がラップされる前、およびDBAPIカーソルに対して他の操作が実行される前に*既存のトランザクションは、カーソル上の任意の状態と同様に有効なままである。</p>
<p>ここでの使用例は、低レベルの例外処理を：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Engine`に注入することです。通常は、ロギングとデバッグの目的のためです。</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">コードはSQLAlchemyのクリーンアップとエラー処理ルーチンを妨害するので、<a href="#id1"><span class="problematic" id="id2">**</span></a>状態**を変更しないで**ここに例外を投げてはいけません。例外の修正については、新しい：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.ConnectionEvents.handle_error`イベントを参照してください。</p>
</div>
<p>このフックに続いて、SQLAlchemyは、コネクションレス/カーソルの操作をいくつでも試みることができます。これには、カーソルのクローズ、コネクションレス実行の場合のトランザクションのロールバック、&amp;quot;切断&amp;quot;の場合の接続プール全体の破棄検出された。例外は、SQLAlchemy DBAPI例外ラッパーにラップされ、再スローされます。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.dbapi_error.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.dbapi_error.params.conn">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.dbapi_error.params.cursor"></span><strong>cursor</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.dbapi_error.params.cursor">¶</a> -- DBAPIカーソルオブジェクト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.dbapi_error.params.statement"></span><strong>statement</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.dbapi_error.params.statement">¶</a> -- DBAPIに渡される文字列SQL文</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.dbapi_error.params.parameters"></span><strong>parameters</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.dbapi_error.params.parameters">¶</a> -- DBAPIの `` cursor``の `` execute（） <a href="#id1"><span class="problematic" id="id2">``</span></a>や `` executemany（） <a href="#id3"><span class="problematic" id="id4">``</span></a>メソッドに渡される、辞書、タプル、またはパラメータのリストです。場合によっては、「なし」とすることができる。</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.dbapi_error.params.context"></span><strong>context</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.dbapi_error.params.context">¶</a> -- ：class： <cite>.ExecutionContext`オブジェクトが使用中です。 `</cite> None``かもしれません。</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.dbapi_error.params.exception"></span><strong>exception</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.dbapi_error.params.exception">¶</a> -- ** unwrapped <a href="#id1"><span class="problematic" id="id2">**</span></a>例外はDBAPIから直接出力されます。ここのクラスは、使用中のDBAPIモジュールに固有です。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="deprecated">
<p><span class="versionmodified">バージョン 0.9.7 で撤廃: </span>- replaced by
<a class="reference internal" href="#sqlalchemy.events.ConnectionEvents.handle_error" title="sqlalchemy.events.ConnectionEvents.handle_error"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.handle_error()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.engine_connect">
<code class="descname">engine_connect</code><span class="sig-paren">(</span><em>conn</em>, <em>branch</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.engine_connect" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>new：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`の作成を傍受します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;engine_connect&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_engine_connect</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">branch</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;engine_connect&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、通常：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Engine.connect`メソッドを呼び出すことによって直接的に呼び出されます。</p>
<p>これは：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.PoolEvents.connect`メソッドとは異なります。これはDBAPIレベルのデータベースへの実際の接続を指します。 DBAPI接続をプールして、多くの操作で再利用することができます。対照的に、このイベントはより高いレベルの生成にのみ参照されます：クラス：このようなDBAPI接続の周りの <a href="#id3"><span class="problematic" id="id4">`</span></a>.Connection`ラッパー。</p>
<p>これは、：meth： <cite>.PoolEvents.checkout`イベントとは異なり、：class：</cite> .Connection`オブジェクトに固有であり、：meth： <cite>.PoolEvents.checkout`が扱うDBAPI接続ではありません。 DBAPI接続は、ここでは：attr： `.Connection.connection`属性で利用できます。しかし、実際には：class： `.Connection`が無効化され、再確立された場合、class：</cite> .Connection`オブジェクトの存続期間内に複数の：meth： <cite>.PoolEvents.checkout`イベントが存在することに注意してください。 ：class： `.Connection`の&amp;quot; branch &amp;quot;が生成された場合には、すでにチェックアウトされた同じDBAPI接続に対して生成された複数の：class：</cite> .Connection`オブジェクトが存在することもあります。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.engine_connect.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.engine_connect.params.conn">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクトです。</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.engine_connect.params.branch"></span><strong>branch</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.engine_connect.params.branch">¶</a> -- Trueの場合、これは既存の：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`の&amp;quot;ブランチ&amp;quot;です。分岐は、最も一般的にはINSERTステートメントの目的のためにデフォルト値のSELECTを事前に実行するために、ステートメント実行中に補足ステートメントを呼び出すために生成されます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.9.0 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：ref： <cite>pool_disconnects_pessimistic</cite>  - プールされた接続が透過的にデータベースに接続されていることを透過的に確認するために：meth：` .ConnectionEvents.engine_connect`を使用する方法を示します。</p>
<p>：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.PoolEvents.checkout`個々のDBAPI接続の下位レベルのプールチェックアウトイベント</p>
<p class="last">：meth： <cite>.ConnectionEvents.set_connection_execution_options</cite>  - ：class：` .Connection`のコピーは、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection.execution_options`メソッドが呼び出されたときにも作成されます。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.engine_disposed">
<code class="descname">engine_disposed</code><span class="sig-paren">(</span><em>engine</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.engine_disposed" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Engine.dispose`メソッドが呼び出されたときに代行受信を行います。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;engine_disposed&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_engine_disposed</span><span class="p">(</span><span class="n">engine</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;engine_disposed&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>：meth： <cite>.Engine.dispose`メソッドはエンジンに接続プール（例えば：class：</cite> .Pool`）の&amp;quot;dispose &amp;quot;を指示し、それを新しいものに置き換えます。古いプールを廃棄すると、既存のチェックインされた接続が閉じられるという効果があります。新しいプールは、最初に使用されるまで新しい接続を確立しません。</p>
<p>このイベントは、：class： <cite>.Engine`に関連するリソースもクリーンアップする必要があることを示すために使用できます：class：</cite> .Engine`は新しいリクエストにも使用できることを覚えておいてください。接続リソースを取得します。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.0.5 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.handle_error">
<code class="descname">handle_error</code><span class="sig-paren">(</span><em>exception_context</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.handle_error" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`によって処理されたすべての例外を傍受します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;handle_error&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_handle_error</span><span class="p">(</span><span class="n">exception_context</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;handle_error&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>これには、DBAPIおよびSQLAlchemyの文呼び出しプロセスで発生したすべての例外（エンコードエラーやその他の文の検証エラーなど）が含まれます。イベントが呼び出される他の領域には、トランザクションの開始と終了、結果行のフェッチ、カーソルの作成などがあります。</p>
<p>注意：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.handle_error`は、いつでも*の新しい種類の例外と新しい呼び出しシナリオをサポートするかもしれません。このイベントを使用するコードは、マイナーリリースで新しい呼び出しパターンが存在することを期待する必要があります。</p>
<p>例外に対応する多種多様なメンバをサポートし、後方互換性のないイベントの拡張性を可能にするために、受信される唯一の引数は：class：<a href="#id1"><span class="problematic" id="id2">`</span></a>ExceptionContext`のインスタンスです。このオブジェクトには、例外に関する詳細を表すデータメンバーが含まれます。</p>
<p>このフックでサポートされているユースケースは次のとおりです。</p>
<ul class="simple">
<li>読み取り専用、ロギングおよびデバッグ目的の低レベル例外処理</li>
<li>例外の書き換え</li>
<li>特定の例外に応答して、接続または所有接続プールが無効化されるか、期限切れになるかの確立または無効化。</li>
</ul>
<p>フックは、失敗した操作（存在する場合）からのカーソルがまだ開いていてアクセス可能な間に呼び出されます。このクリーンアップでは、特別なクリーンアップ操作を呼び出すことができます。 SQLAlchemyは、このフックが呼び出された後にこのカーソルを閉じることを試みます。接続が&amp;quot;自動コミット&amp;quot;モードの場合、トランザクションはこのフックの範囲内でも開いたままです。文単位トランザクションのロールバックもフックが呼び出された後に発生します。</p>
<p>SQLAlchemyの方言で現在処理されていない&amp;quot;disconnect &amp;quot;状況を検出する一般的なケースでは、：attr： <a href="#id1"><span class="problematic" id="id2">`</span></a>.ExceptionContext.is_disconnect`フラグをTrueに設定すると例外が切断とみなされます通常は、接続プールが無効になります。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">Engine</span><span class="p">,</span> <span class="s2">&quot;handle_error&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">handle_exception</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">original_exception</span><span class="p">,</span> <span class="n">pyodbc</span><span class="o">.</span><span class="n">Error</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">code</span> <span class="ow">in</span> <span class="p">(</span>
            <span class="s1">&#39;08S01&#39;</span><span class="p">,</span> <span class="s1">&#39;01002&#39;</span><span class="p">,</span> <span class="s1">&#39;08003&#39;</span><span class="p">,</span>
            <span class="s1">&#39;08007&#39;</span><span class="p">,</span> <span class="s1">&#39;08S02&#39;</span><span class="p">,</span> <span class="s1">&#39;08001&#39;</span><span class="p">,</span> <span class="s1">&#39;HYT00&#39;</span><span class="p">,</span> <span class="s1">&#39;HY010&#39;</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">code</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">original_exception</span><span class="p">):</span>
                <span class="n">context</span><span class="o">.</span><span class="n">is_disconnect</span> <span class="o">=</span> <span class="kc">True</span></pre></div>
</div>
<p>ハンドラ関数には、SQLAlchemyによって構築された例外をユーザ定義のものに置き換えるための2つのオプションがあります。この新しい例外を直接呼び出すことができます。この場合、以降のすべてのイベントリスナーはバイパスされ、適切なクリーンアップが実行された後に例外が発生します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">Engine</span><span class="p">,</span> <span class="s2">&quot;handle_error&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">handle_exception</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">original_exception</span><span class="p">,</span>
        <span class="n">psycopg2</span><span class="o">.</span><span class="n">OperationalError</span><span class="p">)</span> <span class="ow">and</span> \
        <span class="s2">&quot;failed&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">original_exception</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">MySpecialException</span><span class="p">(</span><span class="s2">&quot;failed operation&quot;</span><span class="p">)</span></pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.ConnectionEvents.handle_error`イベントは、特に失敗したステートメントによって引き起こされる最終的な例外として再スローされる例外を提供するため、<a href="#id3"><span class="problematic" id="id4">**</span></a>スタックトレースはユーザー定義のイベントハンドラ自体が失敗した場合に誤解を招く**予期しない例外がスローされます。スタックトレースは失敗した実際のコード行を示していないかもしれません！予期しない例外が発生している場合は、ここで注意深くコーディングし、ロギングまたはインラインデバッグを使用することをお勧めします。</p>
</div>
<p>あるいは、ハンドリングを `` retval = True``修飾子で設定し、その関数から新しい例外インスタンスを返すことで、イベントハンドリングの&amp;quot;連鎖&amp;quot;スタイルを使用することができます。この場合、イベントハンドリングは次のハンドラ上で継続されます。 &amp;quot;連鎖&amp;quot;例外は、以下を使用して利用できます：attr： <cite>.ExceptionContext.chained_exception</cite></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">Engine</span><span class="p">,</span> <span class="s2">&quot;handle_error&quot;</span><span class="p">,</span> <span class="n">retval</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">handle_exception</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">chained_exception</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> \
        <span class="s2">&quot;special&quot;</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">chained_exception</span><span class="o">.</span><span class="n">message</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">MySpecialException</span><span class="p">(</span><span class="s2">&quot;failed&quot;</span><span class="p">,</span>
            <span class="n">cause</span><span class="o">=</span><span class="n">context</span><span class="o">.</span><span class="n">chained_exception</span><span class="p">)</span></pre></div>
</div>
<p>チェーン内で `` None``を返すハンドラを使うことができます。ハンドラが `` None``を返すとき、前の例外インスタンスがあればそれが次のハンドラに渡される現在の例外として維持されます。</p>
<p>カスタム例外が発生または返されると、SQLAlchemyはこの新しい例外をそのまま引き上げ、SQLAlchemyオブジェクトでラップされません。例外が：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>sqlalchemy.exc.StatementError`のサブクラスでない場合、特定の機能が利用できない場合があります。現在のところ、これにはORFのautoflushプロセス内で発生した例外に&amp;quot;autoflush &amp;quot;の詳細ヒントを追加する機能が含まれています。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><span class="target" id="sqlalchemy.events.ConnectionEvents.handle_error.params.context"></span><strong>context</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.handle_error.params.context">¶</a> -- an：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.ExceptionContext`オブジェクトです。使用可能なすべてのメンバーの詳細については、このクラスを参照してください。</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.9.7 で追加: </span>：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.ConnectionEvents.handle_error`フックを追加しました。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.1 で変更: </span>：meth： <cite>.handle_error`イベントは、</cite> <cite>SystemExit``と</cite> <cite>KeyboardInterrupt``を含む</cite> <cite>BaseException``を継承したすべての例外を受け取ります。この場合、attr： `.ExceptionContext.is_disconnect`の設定は</cite> <cite>True``であり、：attr：</cite> .ExceptionContext.invalidate_pool_on_disconnect`のデフォルトは `` False``です。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.0.0 で変更: </span>：meth： <cite>.Engine.connect`の最初の呼び出しの間に：class：</cite> .Engine`が失敗したとき、：class： <cite>.Connection`オブジェクトのときに：meth：</cite> .handle_error`イベントが呼び出されるようになりました再接続操作中にエラーが発生しました。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.0.0 で変更: </span>dialectが `` skip_user_error_events``実行オプションを利用するとき、：meth： <cite>.handle_error`イベントは起動しません。これは、MySQLの方言が `</cite> has_table（） <a href="#id1"><span class="problematic" id="id2">``</span></a>方言メソッドの中に存在しないテーブルを検出した場合など、特定の操作の中でSQLAlchemy特有の例外を捕捉しようとする方言によって使用されます。 1.0.0より前のバージョンでは、：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.handle_error`を実装するコードでは、これらのシナリオでスローされた例外が修正されずに確実に再生成される必要があります。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.prepare_twophase">
<code class="descname">prepare_twophase</code><span class="sig-paren">(</span><em>conn</em>, <em>xid</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.prepare_twophase" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>prepare_twophase（）イベントをインターセプトします。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;prepare_twophase&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_prepare_twophase</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">xid</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;prepare_twophase&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.prepare_twophase.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.prepare_twophase.params.conn">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.prepare_twophase.params.xid"></span><strong>xid</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.prepare_twophase.params.xid">¶</a> -- 二相XID識別子</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.release_savepoint">
<code class="descname">release_savepoint</code><span class="sig-paren">(</span><em>conn</em>, <em>name</em>, <em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.release_savepoint" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>release_savepoint（）イベントを傍受します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;release_savepoint&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_release_savepoint</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;release_savepoint&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.release_savepoint.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.release_savepoint.params.conn">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.release_savepoint.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.release_savepoint.params.name">¶</a> -- セーブポイントに使用される指定された名前。</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.release_savepoint.params.context"></span><strong>context</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.release_savepoint.params.context">¶</a> -- ：class： <cite>.ExecutionContext`が使用中です。 `</cite> None``かもしれません。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.rollback">
<code class="descname">rollback</code><span class="sig-paren">(</span><em>conn</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.rollback" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Transaction`によって開始されたrollback（）イベントを傍受します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;rollback&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_rollback</span><span class="p">(</span><span class="n">conn</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;rollback&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>`` reset_on_return``フラグが `` &amp;#39;rollback```のデフォルト値に設定されている場合、：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Pool`はチェックイン時にDBAPI接続も自動的にロールバックします。このロールバックをインターセプトするには、：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.PoolEvents.reset`フックを使用します。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><span class="target" id="sqlalchemy.events.ConnectionEvents.rollback.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.rollback.params.conn">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクト</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：meth： <cite>.PoolEvents.reset</cite></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.rollback_savepoint">
<code class="descname">rollback_savepoint</code><span class="sig-paren">(</span><em>conn</em>, <em>name</em>, <em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.rollback_savepoint" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>rollback_savepoint（）イベントを代行します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;rollback_savepoint&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_rollback_savepoint</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;rollback_savepoint&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.rollback_savepoint.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.rollback_savepoint.params.conn">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.rollback_savepoint.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.rollback_savepoint.params.name">¶</a> -- セーブポイントに使用される指定された名前。</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.rollback_savepoint.params.context"></span><strong>context</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.rollback_savepoint.params.context">¶</a> -- ：class： <cite>.ExecutionContext`が使用中です。 `</cite> None``かもしれません。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.rollback_twophase">
<code class="descname">rollback_twophase</code><span class="sig-paren">(</span><em>conn</em>, <em>xid</em>, <em>is_prepared</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.rollback_twophase" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>rollback_twophase（）イベントを代行受信します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;rollback_twophase&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_rollback_twophase</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">xid</span><span class="p">,</span> <span class="n">is_prepared</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;rollback_twophase&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.rollback_twophase.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.rollback_twophase.params.conn">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.rollback_twophase.params.xid"></span><strong>xid</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.rollback_twophase.params.xid">¶</a> -- 二相XID識別子</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.rollback_twophase.params.is_prepared"></span><strong>is_prepared</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.rollback_twophase.params.is_prepared">¶</a> -- booleanは、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.TwoPhaseTransaction.prepare`が呼び出されたかどうかを示します。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.savepoint">
<code class="descname">savepoint</code><span class="sig-paren">(</span><em>conn</em>, <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.savepoint" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>savepoint（）イベントを代行します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;savepoint&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_savepoint</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;savepoint&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.savepoint.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.savepoint.params.conn">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.savepoint.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.savepoint.params.name">¶</a> -- セーブポイントに使用される指定された名前。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.set_connection_execution_options">
<code class="descname">set_connection_execution_options</code><span class="sig-paren">(</span><em>conn</em>, <em>opts</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.set_connection_execution_options" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection.execution_options`メソッドが呼び出されたときに代行受信します。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;set_connection_execution_options&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_set_connection_execution_options</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">opts</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;set_connection_execution_options&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このメソッドは、new：class： <cite>.Connection`が生成された後に、新しく更新された実行オプションのコレクションが呼び出された後、：class：</cite> .Dialect`がそれらの新しいオプションのいずれかに作用する前に呼び出されます。</p>
<p>このメソッドは、親：class： <cite>.Engine`から実行オプションを継承するnew：class：</cite> .Connection`が生成されたときには呼び出されません。この条件を傍受するには、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.ConnectionEvents.engine_connect`イベントを使用します。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.set_connection_execution_options.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.set_connection_execution_options.params.conn">¶</a> -- 新たにコピーされた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`オブジェクト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.set_connection_execution_options.params.opts"></span><strong>opts</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.set_connection_execution_options.params.opts">¶</a> -- ：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection.execution_options`メソッドに渡されたオプションの辞書。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.9.0 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：meth： <cite>.ConnectionEvents.set_engine_execution_options</cite>  -  meth：` .Engine.execution_options`が呼び出されたときに呼び出されるイベントです。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.ConnectionEvents.set_engine_execution_options">
<code class="descname">set_engine_execution_options</code><span class="sig-paren">(</span><em>engine</em>, <em>opts</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.ConnectionEvents.set_engine_execution_options" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Engine.execution_options`メソッドが呼び出されたときにインターセプトします。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;set_engine_execution_options&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_set_engine_execution_options</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="n">opts</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;set_engine_execution_options&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>：meth： <cite>.Engine.execution_options`メソッドは、新しいオプションを格納する：class：</cite> .Engine`の浅いコピーを生成します。その新しい：クラス： <cite>.Engine`がここに渡されます。このメソッドの特定のアプリケーションは、：meth： `.ConnectionEvents.engine_connect`イベントハンドラを与えられた：class：</cite> .Engine`に追加して、これらの実行オプションに固有のper-：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`タスクを実行することです。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.set_engine_execution_options.params.conn"></span><strong>conn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.set_engine_execution_options.params.conn">¶</a> -- 新しくコピーされた：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Engine`オブジェクト</li>
<li><span class="target" id="sqlalchemy.events.ConnectionEvents.set_engine_execution_options.params.opts"></span><strong>opts</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.ConnectionEvents.set_engine_execution_options.params.opts">¶</a> -- ：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection.execution_options`メソッドに渡されたオプションの辞書。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.9.0 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：meth： <cite>.ConnectionEvents.set_connection_execution_options</cite>  - ：meth：` .Connection.execution_options`が呼び出されたときに呼び出されるイベントです。</p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sqlalchemy.events.DialectEvents">
<em class="property">class </em><code class="descclassname">sqlalchemy.events.</code><code class="descname">DialectEvents</code><a class="headerlink" href="#sqlalchemy.events.DialectEvents" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy.event.base.Events" title="sqlalchemy.event.base.Events"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.event.base.Events</span></code></a></p>
<p>実行置換機能のためのイベントインタフェース。</p>
<p>これらのイベントにより、DBAPIと対話する主要な方言関数の直接的な計測と置き換えが可能になります。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.DialectEvents`フックは** semi-public <a href="#id3"><span class="problematic" id="id4">**</span></a>とexperimentalとみなされます。これらのフックは一般的な用途ではなく、複雑なDBAPI機構の再記述が既存の方言に注入されなければならない状況にのみ適用されます。一般的なステートメント・インターセプト・イベントの場合は、：class： <a href="#id5"><span class="problematic" id="id6">`</span></a>.ConnectionEvents`インターフェースを使用してください。</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p>：meth： <cite>.ConnectionEvents.before_cursor_execute</cite></p>
<p>：meth： <cite>.ConnectionEvents.before_execute</cite></p>
<p>：meth： <cite>.ConnectionEvents.after_cursor_execute</cite></p>
<p class="last">：meth： <cite>.ConnectionEvents.after_execute</cite></p>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 0.9.4 で追加.</span></p>
</div>
<dl class="method">
<dt id="sqlalchemy.events.DialectEvents.do_connect">
<code class="descname">do_connect</code><span class="sig-paren">(</span><em>dialect</em>, <em>conn_rec</em>, <em>cargs</em>, <em>cparams</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.DialectEvents.do_connect" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>接続が確立される前に接続引数を受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;do_connect&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_do_connect</span><span class="p">(</span><span class="n">dialect</span><span class="p">,</span> <span class="n">conn_rec</span><span class="p">,</span> <span class="n">cargs</span><span class="p">,</span> <span class="n">cparams</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;do_connect&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span>

<span class="c1"># named argument style (new in 0.9)</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;do_connect&#39;</span><span class="p">,</span> <span class="n">named</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_do_connect</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;do_connect&#39; event&quot;</span>
    <span class="n">dialect</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;dialect&#39;</span><span class="p">]</span>
    <span class="n">conn_rec</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;conn_rec&#39;</span><span class="p">]</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>DBAPI接続を戻して、起動した後のイベントを停止します。返された接続が使用されます。</p>
<p>あるいは、イベントは、カーグおよび/またはパラパラコレクションを操作することができます。 cargsは、常に、インプレースで突然変異することができるPythonリストであり、cparamsはPython辞書である。 Noneを返すと、制御は次のイベントハンドラに渡され、最終的に更新された引数が与えられれば、方言が正常に接続できるようになります。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.0.3 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.DialectEvents.do_execute">
<code class="descname">do_execute</code><span class="sig-paren">(</span><em>cursor</em>, <em>statement</em>, <em>parameters</em>, <em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.DialectEvents.do_execute" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>execute（）を呼び出すためのカーソルを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;do_execute&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_do_execute</span><span class="p">(</span><span class="n">cursor</span><span class="p">,</span> <span class="n">statement</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;do_execute&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span>

<span class="c1"># named argument style (new in 0.9)</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;do_execute&#39;</span><span class="p">,</span> <span class="n">named</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_do_execute</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;do_execute&#39; event&quot;</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;cursor&#39;</span><span class="p">]</span>
    <span class="n">statement</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;statement&#39;</span><span class="p">]</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>値がTrueを返すと、呼び出すことからさらにイベントが停止し、カーソルがイベントハンドラ内で既に実行されたことを示すことができます。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.DialectEvents.do_execute_no_params">
<code class="descname">do_execute_no_params</code><span class="sig-paren">(</span><em>cursor</em>, <em>statement</em>, <em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.DialectEvents.do_execute_no_params" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>パラメータを指定せずにexecute（）を実行するカーソルを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;do_execute_no_params&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_do_execute_no_params</span><span class="p">(</span><span class="n">cursor</span><span class="p">,</span> <span class="n">statement</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;do_execute_no_params&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>値がTrueを返すと、呼び出すことからさらにイベントが停止し、カーソルがイベントハンドラ内で既に実行されたことを示すことができます。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.DialectEvents.do_executemany">
<code class="descname">do_executemany</code><span class="sig-paren">(</span><em>cursor</em>, <em>statement</em>, <em>parameters</em>, <em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.DialectEvents.do_executemany" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>executemany（）を呼び出すためにカーソルを受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;do_executemany&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_do_executemany</span><span class="p">(</span><span class="n">cursor</span><span class="p">,</span> <span class="n">statement</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;do_executemany&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span>

<span class="c1"># named argument style (new in 0.9)</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;do_executemany&#39;</span><span class="p">,</span> <span class="n">named</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_do_executemany</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;do_executemany&#39; event&quot;</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;cursor&#39;</span><span class="p">]</span>
    <span class="n">statement</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;statement&#39;</span><span class="p">]</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>値がTrueを返すと、呼び出すことからさらにイベントが停止し、カーソルがイベントハンドラ内で既に実行されたことを示すことができます。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.DialectEvents.do_setinputsizes">
<code class="descname">do_setinputsizes</code><span class="sig-paren">(</span><em>inputsizes</em>, <em>cursor</em>, <em>statement</em>, <em>parameters</em>, <em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.DialectEvents.do_setinputsizes" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>可能な変更のためにsetinputsizes辞書を受け取ります。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;do_setinputsizes&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_do_setinputsizes</span><span class="p">(</span><span class="n">inputsizes</span><span class="p">,</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">statement</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;do_setinputsizes&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span>

<span class="c1"># named argument style (new in 0.9)</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeEngine</span><span class="p">,</span> <span class="s1">&#39;do_setinputsizes&#39;</span><span class="p">,</span> <span class="n">named</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_do_setinputsizes</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;do_setinputsizes&#39; event&quot;</span>
    <span class="n">inputsizes</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;inputsizes&#39;</span><span class="p">]</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;cursor&#39;</span><span class="p">]</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>このイベントは、特定のステートメントのパラメータバインディングに関する情報を渡すDBAPIの `` cursor.setinputsizes（） <a href="#id1"><span class="problematic" id="id2">``</span></a>メソッドを使用する場合に発生します。指定された `` inputsizes``辞書には、class： <cite>.BindParameter`オブジェクトがキーとして含まれ、値としてDBAPI固有の型オブジェクトにリンクされます。バインドされていないパラメータの場合は、 `</cite> None``を値として辞書に追加されます。これは、パラメータが最終的なsetinputsizes呼び出しに含まれないことを意味します。このイベントは、バインドされているデータ型を検査および/またはログ記録するため、およびその場で辞書を変更するために使用することができる。この辞書にパラメータを追加、変更、または削除することができます。呼び出し側は、通常、DBAPIオブジェクトに関する決定を行うために、指定されたバインド・オブジェクトの：attr： <a href="#id3"><span class="problematic" id="id4">`</span></a>.BindParameter.type`属性を検査する必要があります。</p>
<p>イベントの後、 `` inputsizes``辞書は適切なデータ構造に変換され、 `` cursor.setinputsizes``に渡されます。位置限定パラメータ実行スタイルのリスト、または名前付きバインドされたパラメータ実行スタイルのDBAPIタイプオブジェクトへの文字列パラメータキーの辞書のいずれかです。</p>
<p>ほとんどの方言**はこのメソッドをまったく使用しません。このフックを使用する唯一の組み込み方言はcx_Oracle方言です。ここのフックは、cx_Oracle DBAPIを使用してデータ型を設定する方法をカスタマイズできるようになっています。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.2.9 で追加.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>cx_oracle_setinputsizes</cite></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="schema-events">
<h2>スキーマイベント<a class="headerlink" href="#schema-events" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="class">
<dt id="sqlalchemy.events.DDLEvents">
<em class="property">class </em><code class="descclassname">sqlalchemy.events.</code><code class="descname">DDLEvents</code><a class="headerlink" href="#sqlalchemy.events.DDLEvents" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sqlalchemy.event.base.Events" title="sqlalchemy.event.base.Events"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.event.base.Events</span></code></a></p>
<p>スキーマオブジェクトのイベントリスナーを定義します。つまり：class： <cite>.SchemaItem`と他の：class：</cite> .SchemaEventTarget`サブクラス（class： <cite>.MetaData</cite>、：class：` .Table`、：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>）を定義します。列 &amp;#39;。</p>
<p>：class： <cite>.MetaData`と：class：</cite> .Table`は、CREATEとDROP DDLがいつデータベースに発行されるかに関するイベントをサポートします。</p>
<p>アタッチメントイベントは、a：class： <cite>.Column`がa：class：</cite> .Table`に関連付けられている場合など、子スキーマ要素が親に関連付けられるたびに動作をカスタマイズするためにも提供されます。 ForeignKeyConstraint`は：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Table`などに関連付けられています。</p>
<p>`` after_create``イベントを使った例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Metadata</span><span class="p">,</span> <span class="n">Integer</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>
<span class="n">some_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&#39;some_table&#39;</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">after_create</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;ALTER TABLE </span><span class="si">%s</span><span class="s2"> SET name=foo_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span>
                            <span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">target</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">some_table</span><span class="p">,</span> <span class="s2">&quot;after_create&quot;</span><span class="p">,</span> <span class="n">after_create</span><span class="p">)</span></pre></div>
</div>
<p>DDLイベントは、：class： <cite>.DDL`クラスと：class：</cite> .DDLElement`階層のDDL句構造体と密接に統合されます。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">DDL</span>
<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span>
    <span class="n">some_table</span><span class="p">,</span>
    <span class="s2">&quot;after_create&quot;</span><span class="p">,</span>
    <span class="n">DDL</span><span class="p">(</span><span class="s2">&quot;ALTER TABLE </span><span class="si">%(table)s</span><span class="s2"> SET name=foo_</span><span class="si">%(table)s</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>ここでのメソッドは、リスナー関数に渡されるメンバーの名前だけでなく、イベントの名前も定義します。</p>
<p>all：class： <cite>.DDLEvent`イベントの場合、</cite> <cite>propagate = True``キーワード引数は、与えられたイベントハンドラが：meth：</cite> .Table.tometadata <a href="#id1"><span class="problematic" id="id2">`</span></a>メソッド:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">DDL</span>
<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span>
    <span class="n">some_table</span><span class="p">,</span>
    <span class="s2">&quot;after_create&quot;</span><span class="p">,</span>
    <span class="n">DDL</span><span class="p">(</span><span class="s2">&quot;ALTER TABLE </span><span class="si">%(table)s</span><span class="s2"> SET name=foo_</span><span class="si">%(table)s</span><span class="s2">&quot;</span><span class="p">),</span>
    <span class="n">propagate</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="n">new_table</span> <span class="o">=</span> <span class="n">some_table</span><span class="o">.</span><span class="n">tometadata</span><span class="p">(</span><span class="n">new_metadata</span><span class="p">)</span></pre></div>
</div>
<p>上記の：class： <cite>.DDL`オブジェクトは、</cite> <cite>new_table``で表される：class：</cite> .Table`オブジェクトにも関連付けられます。</p>
<p>参照：</p>
<blockquote>
<div><p>：ref： <cite>event_toplevel</cite></p>
<p>：クラス： <cite>.DDLElement</cite></p>
<p>：クラス： <cite>.DDL</cite></p>
<p>：ref： <cite>schema_ddl_sequences</cite></p>
</div></blockquote>
<dl class="method">
<dt id="sqlalchemy.events.DDLEvents.after_create">
<code class="descname">after_create</code><span class="sig-paren">(</span><em>target</em>, <em>connection</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.DDLEvents.after_create" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>CREATE文が発行された後に呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSchemaClassOrObject</span><span class="p">,</span> <span class="s1">&#39;after_create&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_create</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_create&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.DDLEvents.after_create.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.DDLEvents.after_create.params.target">¶</a> -- イベントのターゲットである：class： <cite>.MetaData`または：class：</cite> .Table`オブジェクトです。</li>
<li><span class="target" id="sqlalchemy.events.DDLEvents.after_create.params.connection"></span><strong>connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.DDLEvents.after_create.params.connection">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`ここで、CREATE文は発行されています。</li>
<li><span class="target" id="sqlalchemy.events.DDLEvents.after_create.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.DDLEvents.after_create.params.**kw">¶</a> -- イベントに関連する追加のキーワード引数。この辞書の内容はリリースによって異なる場合があり、メタデータレベルのイベント、checkfirstフラグ、および内部イベントによって使用されるその他の要素に対して生成されるテーブルのリストが含まれます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>：func： <cite>.event.listen`はこのイベントの</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>propagate = True``修飾子も受け付けます。 Trueの場合、ターゲットオブジェクトで作成されたコピー、つまり：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Table.tometadata`が使用されたときに生成されるコピーに対して、リスナー関数が確立されます。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.DDLEvents.after_drop">
<code class="descname">after_drop</code><span class="sig-paren">(</span><em>target</em>, <em>connection</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.DDLEvents.after_drop" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>DROP文が発行された後に呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSchemaClassOrObject</span><span class="p">,</span> <span class="s1">&#39;after_drop&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_drop</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_drop&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.DDLEvents.after_drop.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.DDLEvents.after_drop.params.target">¶</a> -- イベントのターゲットである：class： <cite>.MetaData`または：class：</cite> .Table`オブジェクトです。</li>
<li><span class="target" id="sqlalchemy.events.DDLEvents.after_drop.params.connection"></span><strong>connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.DDLEvents.after_drop.params.connection">¶</a> -- DROP文が発行された：class： <cite>.Connection</cite>。</li>
<li><span class="target" id="sqlalchemy.events.DDLEvents.after_drop.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.DDLEvents.after_drop.params.**kw">¶</a> -- イベントに関連する追加のキーワード引数。この辞書の内容はリリースによって異なる場合があり、メタデータレベルのイベント、checkfirstフラグ、および内部イベントによって使用されるその他の要素に対して生成されるテーブルのリストが含まれます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>：func： <cite>.event.listen`はこのイベントの</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>propagate = True``修飾子も受け付けます。 Trueの場合、ターゲットオブジェクトで作成されたコピー、つまり：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Table.tometadata`が使用されたときに生成されるコピーに対して、リスナー関数が確立されます。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.DDLEvents.after_parent_attach">
<code class="descname">after_parent_attach</code><span class="sig-paren">(</span><em>target</em>, <em>parent</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.DDLEvents.after_parent_attach" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>a：class： <cite>.SchemaItem`は親：class：</cite> .SchemaItem`に関連付けられています。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSchemaClassOrObject</span><span class="p">,</span> <span class="s1">&#39;after_parent_attach&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_after_parent_attach</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;after_parent_attach&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.DDLEvents.after_parent_attach.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.DDLEvents.after_parent_attach.params.target">¶</a> -- ターゲットオブジェクト</li>
<li><span class="target" id="sqlalchemy.events.DDLEvents.after_parent_attach.params.parent"></span><strong>parent</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.DDLEvents.after_parent_attach.params.parent">¶</a> -- ターゲットが接続されている親。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>：func： <cite>.event.listen`はこのイベントの</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>propagate = True``修飾子も受け付けます。 Trueの場合、ターゲットオブジェクトで作成されたコピー、つまり：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Table.tometadata`が使用されたときに生成されるコピーに対して、リスナー関数が確立されます。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.DDLEvents.before_create">
<code class="descname">before_create</code><span class="sig-paren">(</span><em>target</em>, <em>connection</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.DDLEvents.before_create" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>CREATE文が発行される前に呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSchemaClassOrObject</span><span class="p">,</span> <span class="s1">&#39;before_create&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_before_create</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;before_create&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.DDLEvents.before_create.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.DDLEvents.before_create.params.target">¶</a> -- イベントのターゲットである：class： <cite>.MetaData`または：class：</cite> .Table`オブジェクトです。</li>
<li><span class="target" id="sqlalchemy.events.DDLEvents.before_create.params.connection"></span><strong>connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.DDLEvents.before_create.params.connection">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`ここで、CREATE文が発行されます。</li>
<li><span class="target" id="sqlalchemy.events.DDLEvents.before_create.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.DDLEvents.before_create.params.**kw">¶</a> -- イベントに関連する追加のキーワード引数。この辞書の内容はリリースによって異なる場合があり、メタデータレベルのイベント、checkfirstフラグ、および内部イベントによって使用されるその他の要素に対して生成されるテーブルのリストが含まれます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>：func： <cite>.event.listen`はこのイベントの</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>propagate = True``修飾子も受け付けます。 Trueの場合、ターゲットオブジェクトで作成されたコピー、つまり：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Table.tometadata`が使用されたときに生成されるコピーに対して、リスナー関数が確立されます。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.DDLEvents.before_drop">
<code class="descname">before_drop</code><span class="sig-paren">(</span><em>target</em>, <em>connection</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.DDLEvents.before_drop" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>DROP文が発行される前に呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSchemaClassOrObject</span><span class="p">,</span> <span class="s1">&#39;before_drop&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_before_drop</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;before_drop&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.DDLEvents.before_drop.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.DDLEvents.before_drop.params.target">¶</a> -- イベントのターゲットである：class： <cite>.MetaData`または：class：</cite> .Table`オブジェクトです。</li>
<li><span class="target" id="sqlalchemy.events.DDLEvents.before_drop.params.connection"></span><strong>connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.DDLEvents.before_drop.params.connection">¶</a> -- ：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Connection`ここでDROP文が発行されます。</li>
<li><span class="target" id="sqlalchemy.events.DDLEvents.before_drop.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.DDLEvents.before_drop.params.**kw">¶</a> -- イベントに関連する追加のキーワード引数。この辞書の内容はリリースによって異なる場合があり、メタデータレベルのイベント、checkfirstフラグ、および内部イベントによって使用されるその他の要素に対して生成されるテーブルのリストが含まれます。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>：func： <cite>.event.listen`はこのイベントの</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>propagate = True``修飾子も受け付けます。 Trueの場合、ターゲットオブジェクトで作成されたコピー、つまり：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Table.tometadata`が使用されたときに生成されるコピーに対して、リスナー関数が確立されます。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.DDLEvents.before_parent_attach">
<code class="descname">before_parent_attach</code><span class="sig-paren">(</span><em>target</em>, <em>parent</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.DDLEvents.before_parent_attach" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>before：class： <cite>.SchemaItem`は親：class：</cite> .SchemaItem`に関連付けられています。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSchemaClassOrObject</span><span class="p">,</span> <span class="s1">&#39;before_parent_attach&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_before_parent_attach</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;before_parent_attach&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">パラメータ:</th><td class="field-body"><ul class="first last simple">
<li><span class="target" id="sqlalchemy.events.DDLEvents.before_parent_attach.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.DDLEvents.before_parent_attach.params.target">¶</a> -- ターゲットオブジェクト</li>
<li><span class="target" id="sqlalchemy.events.DDLEvents.before_parent_attach.params.parent"></span><strong>parent</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.events.DDLEvents.before_parent_attach.params.parent">¶</a> -- ターゲットが接続されている親。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>：func： <cite>.event.listen`はこのイベントの</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>propagate = True``修飾子も受け付けます。 Trueの場合、ターゲットオブジェクトで作成されたコピー、つまり：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Table.tometadata`が使用されたときに生成されるコピーに対して、リスナー関数が確立されます。</p>
</dd></dl>

<dl class="method">
<dt id="sqlalchemy.events.DDLEvents.column_reflect">
<code class="descname">column_reflect</code><span class="sig-paren">(</span><em>inspector</em>, <em>table</em>, <em>column_info</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.events.DDLEvents.column_reflect" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Table`が反映されているときに取得される &amp;#39;列情報&amp;#39;の各ユニットに対して呼び出されます。</p>
<div class="event-signatures docutils container">
<p>引数フォームの例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="c1"># standard decorator style</span>
<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">SomeSchemaClassOrObject</span><span class="p">,</span> <span class="s1">&#39;column_reflect&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">receive_column_reflect</span><span class="p">(</span><span class="n">inspector</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">column_info</span><span class="p">):</span>
    <span class="s2">&quot;listen for the &#39;column_reflect&#39; event&quot;</span>

    <span class="c1"># ... (event handling logic) ...</span></pre></div>
</div>
</div>
<p>ダイアレクトによって返された列情報の辞書は渡され、変更することができます。辞書は：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>.reflection.Inspector.get_columns`によって返されたリストの各要素で返されます。</p>
<blockquote>
<div><ul>
<li><p class="first">`` name``  - 列の名前</p>
</li>
<li><p class="first">`` type``  - この列の型で、class： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜sqlalchemy.types.TypeEngine`のインスタンスにする必要があります。</p>
</li>
<li><p class="first">`` nullable``  - カラムがNULLかNOT NULLの場合のブールフラグ</p>
</li>
<li><p class="first">`` default``  - カラムのサーバのデフォルト値です。これは通常、普通の文字列SQL式として指定されますが、イベントは：class： <cite>.FetchedValue</cite>、：class：` .DefaultClause`、または：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>.sql.expression.text`オブジェクトを渡すことができます。</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.1.6 で変更: </span>：meth： <cite>.DDLEvents.column_reflect`イベントは、class：</cite> .FetchedValue`、：func： <cite>.sql.expression.text</cite>、または` <a href="#id1"><span class="problematic" id="id2">`</span></a>default``の値として指定される派生オブジェクトの非文字列を許可します。列の辞書に</p>
</div>
</li>
<li><p class="first">`` attrs``  - オプションのカラム属性を含むdict</p>
</li>
</ul>
</div></blockquote>
<p>このディクショナリに対してアクションが実行される前にイベントが呼び出され、内容を変更できます。 ：class： <cite>.Column`固有の引数</cite> <cite>info`</cite>、` <cite>key`</cite>、` <cite>quote``も辞書に追加することができ、class：</cite> .Column`のコンストラクタに渡されます。 。</p>
<p>このイベントは、：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Table`クラスに関連していれば意味があります。例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.schema</span> <span class="k">import</span> <span class="n">Table</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">event</span>

<span class="k">def</span> <span class="nf">listen_for_reflect</span><span class="p">(</span><span class="n">inspector</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">column_info</span><span class="p">):</span>
    <span class="s2">&quot;receive a column_reflect event&quot;</span>
    <span class="c1"># ...</span>

<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span>
        <span class="n">Table</span><span class="p">,</span>
        <span class="s1">&#39;column_reflect&#39;</span><span class="p">,</span>
        <span class="n">listen_for_reflect</span><span class="p">)</span></pre></div>
</div>
<p>...または `` listeners``引数を使って特定の：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Table`インスタンスを使用しています:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">listen_for_reflect</span><span class="p">(</span><span class="n">inspector</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">column_info</span><span class="p">):</span>
    <span class="s2">&quot;receive a column_reflect event&quot;</span>
    <span class="c1"># ...</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s1">&#39;sometable&#39;</span><span class="p">,</span>
    <span class="n">autoload</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">listeners</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;column_reflect&#39;</span><span class="p">,</span> <span class="n">listen_for_reflect</span><span class="p">)</span>
    <span class="p">])</span></pre></div>
</div>
<p>これは、 `` autoload = True``で開始されたリフレクションプロセスが：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.Table`のコンストラクタのスコープ内で完了するためです。</p>
<p>：func： <cite>.event.listen`はこのイベントの</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>propagate = True``修飾子も受け付けます。 Trueの場合、ターゲットオブジェクトで作成されたコピー、つまり：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>.Table.tometadata`が使用されたときに生成されるコピーに対して、リスナー関数が確立されます。</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sqlalchemy.events.SchemaEventTarget">
<em class="property">class </em><code class="descclassname">sqlalchemy.events.</code><code class="descname">SchemaEventTarget</code><a class="headerlink" href="#sqlalchemy.events.SchemaEventTarget" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>class： <a href="#id1"><span class="problematic" id="id2">`</span></a>.DDLEvents`イベントの対象となる要素の基本クラスです。</p>
<p>これには、class： <cite>.SchemaItem`と：class：</cite> .SchemaType`が含まれます。</p>
</dd></dl>

</div>
</div>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="pooling.html" title="previous chapter">接続プーリング</a>
        Next:
        <a href="api_basics.html" title="next chapter">コアAPIの基礎</a>

    <div id="docs-copyright">
        &copy; <a href="../copyright.html">Copyright</a> 2007-2018, the SQLAlchemy authors and contributors.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.8.1.
    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '1.3.0b1',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../_static/detectmobile.js"></script>
    <script type="text/javascript" src="../_static/init.js"></script>


    </body>
</html>


